<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Development Guide :: causeway</title>
    <link rel="canonical" href="https://causeway.apache.org/incubator/latest/kroviz/DevelopmentGuide.html">
    <meta name="generator" content="Antora 3.1.1">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="../../../_/css/site-custom.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Raleway:300,400,500,700,800|Montserrat:300,400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/>
<link rel="home" href="https://causeway.apache.org" title="causeway">
  <link rel="next" href="UsersGuide.html" title="Users Guide">
  <link rel="prev" href="about.html" title="Kroviz">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://causeway.apache.org">
          <span class="icon">
            <img src="../../../_/img/causeway-logo-no-words-65x48.png"></img>
          </span>
        <span class="navbar-title">causeway</span>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <a class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Starter Apps</span>
            <a class="navbar-item" href="../../../docs/2.0.0-RC1/starters/helloworld.html">Hello World</a>
            <a class="navbar-item" href="../../../docs/2.0.0-RC1/starters/simpleapp.html">Simple App</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Demos &amp; Tutorials</span>
            <a class="navbar-item" href="../../../docs/2.0.0-RC1/demo/about.html">Demo App</a>
            <a class="navbar-item" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic (tutorial)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Resources</span>
            <a class="navbar-item" href="../../../docs/2.0.0-RC1/resources/cheatsheet.html">Cheatsheet</a>
            <a class="navbar-item" href="../../../docs/2.0.0-RC1/resources/icons.html">Icons</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Core</span>
            <a class="navbar-item" href="../../../userguide/2.0.0-RC1/about.html">User Guide</a>
            <a class="navbar-item" href="../../../refguide/2.0.0-RC1/about.html">Reference Guide</a>
            <a class="navbar-item" href="../../../testing/2.0.0-RC1/about.html">Testing Guide</a>
            <a class="navbar-item" href="../../../security/2.0.0-RC1/about.html">Security Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Development</span>
            <a class="navbar-item" href="../../../setupguide/2.0.0-RC1/about.html">Setup Guide</a>
            <a class="navbar-item" href="../../../conguide/2.0.0-RC1/about.html">Contributors' Guide</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Viewers</span>
            <a class="navbar-item" href="../../../vw/2.0.0-RC1/about.html">Web UI (Wicket)</a>
            <a class="navbar-item" href="../../../vro/2.0.0-RC1/about.html">REST API (Restful Objects)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Persistence</span>
            <a class="navbar-item" href="../../../pjpa/2.0.0-RC1/about.html">JPA (EclipseLink)</a>
            <a class="navbar-item" href="../../../pjdo/2.0.0-RC1/about.html">JDO (DataNucleus)</a>
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../../security/2.0.0-RC1/bypass/about.html">Bypass (Authenticator & Authorizor)</a>
            <a class="navbar-item" href="../../../security/2.0.0-RC1/shiro/about.html">Shiro (Authenticator & Authorizor)</a>
            <a class="navbar-item" href="../../../security/2.0.0-RC1/spring/about.html">Spring (Authenticator only)</a>
            <a class="navbar-item" href="../../../security/2.0.0-RC1/keycloak/about.html">Keycloak (Authenticator only)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Catalogs</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">For Use in Apps</span>
            <a class="navbar-item" href="../../../valuetypes/2.0.0-RC1/about.html">Value Types</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Extending the framework itself</span>
            <a class="navbar-item" href="../../../extensions/2.0.0-RC1/about.html">Extensions</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Contact</span>
            <a class="navbar-item" href="../../../docs/2.0.0-RC1/support/slack-channel.html">Slack</a>
            <a class="navbar-item" href="../../../docs/2.0.0-RC1/support/mailing-list.html">Mailing Lists</a>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/CAUSEWAY">JIRA</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/causeway">Stack Overflow</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Releases</span>
            <a class="navbar-item" href="../../../docs/2.0.0-RC1/downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="../../../relnotes/2.0.0-RC1/about.html">Release Notes</a>
            <hr class="navbar-divider"/>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Framework</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Process</span>
            <a class="navbar-item" href="../../../comguide/2.0.0-RC1/about.html">Committers' Guide</a>
            <a class="navbar-item" href="../../../tooling/2.0.0-RC1/about.html">Tooling</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Automated Analysis</span>
            <a class="navbar-item" href="https://sonarcloud.io/dashboard?id=apache_isis">SonarCloud.io</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Interim Builds</span>
            <a class="navbar-item" href="../../../comguide/2.0.0-RC1/nightly-builds.html">Nightly builds</a>
            <a class="navbar-item" href="../../../comguide/2.0.0-RC1/weekly-builds.html">Weekly builds</a>
            <a class="navbar-item" href="https://apache-causeway-committers.github.io/causeway-nightly">Website Preview (not ASF hosted)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Development</span>
            <a class="navbar-item" href="../../../core/2.0.0-RC1/about.html">Internal Design Docs</a>
            <a class="navbar-item" href="../../../regressiontests/2.0.0-RC1/about.html">Regression Tests</a>
            <a class="navbar-item" href="../../../incubator/2.0.0-RC1/about.html">Incubator</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Thanks</span>
            <a class="navbar-item" href="../../../more-thanks/2.0.0-RC1/more-thanks.html">Acknowledgements</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">Licenses</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Causeway.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="../../../docs/2.0.0-RC1/about.html">
          <span class="icon">
            <img src="../../../_/img/home.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body ">
<div class="nav-container" data-component="incubator" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-search hide-for-print">
  <input id="algolia-search-input" placeholder="Search"></span>
</div>
<div class="nav-panel-pagination">
  <a class="page-previous" rel="prev" href="about.html" title="Kroviz"><span></span></a>
  <a class="page-next" rel="next"
     href="UsersGuide.html" title="Users Guide"><span></span></a>
<!--
page.parent doesn't seem to be set...
  <a class="page-parent" rel="prev" href="about.html" title="Kroviz"><span></span></a>
-->
</div>
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../about.html">Incubator Catalog</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../graphql/about.html">GraphQL</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../graphql/devnotes.html">Development Environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="about.html">Kroviz</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="DevelopmentGuide.html">Development Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="UsersGuide.html">Users Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="regression-test.html">RO-based Regression Testing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../vaadin/about.html">Vaadin</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../commandreplay/about.html">Command Replay</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Incubator Catalog</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title"> </span>
      <ul class="versions">
        <li class="version">
          <a href="../../../docs/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Committers' Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../comguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Contributors' Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../conguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Design Docs</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../core/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions Catalog</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../extensions/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Incubator Catalog</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="../about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">JDO/DataNucleus</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../pjdo/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">JPA</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../pjpa/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Reference Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../refguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">regressiontests</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../regressiontests/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Release Notes</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../relnotes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">REST API (Restful Objects Viewer)</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../vro/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../security/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Setup Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../setupguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../testing/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Tooling</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../tooling/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Tutorials</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../tutorials/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">User Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../userguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Value Types Catalog</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../valuetypes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Web UI (Wicket Viewer)</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../vw/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../docs/latest/about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../about.html">Incubator Catalog</a></li>
    <li><a href="about.html">Kroviz</a></li>
    <li><a href="DevelopmentGuide.html">Development Guide</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/causeway/edit/release-2.0.0-RC1-RC1/incubator/clients/kroviz/adoc/modules/kroviz/pages/DevelopmentGuide.adoc">Edit</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<h1 class="page">Development Guide</h1>
<div id="preamble">
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="_images/WheatFieldWithCrows.png" alt="WheatFieldWithCrows">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="quickstart"><a class="anchor" href="#quickstart"></a>Quickstart</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Build Causeway with kroviz</p>
<div class="listingblock">
<div class="content">
<pre>cd ~/causeway
mvn -T 1C clean install \
 -Dmodule-kroviz \
 -Dmaven.source.skip=true</pre>
</div>
</div>
</li>
<li>
<p>Start kroviz</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">cd ~/causeway/incubator/clients/kroviz/
#gradle build
./gradlew.sh -t run</code></pre>
</div>
</div>
</li>
<li>
<p>Start the Server App</p>
</li>
<li>
<p>Enter in the Browser:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">http://localhost:3000</code></pre>
</div>
</div>
</li>
<li>
<p>Select 'Connect' in the Burger Menu</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Originally Apache Causeway SimpleApp 1.16.0 was used as the reference RO backend.
This required some extra steps in order to deal with CORS setup, see sections on pre 2.0.0-M3 and CORS.
Currently (2.0.0-M6) Demo is used as reference - at the moment  it&#8217;s the only CORS enabled application.
=== Frontend
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="requirements"><a class="anchor" href="#requirements"></a>Requirements</h3>
<div class="paragraph">
<p>Kotlin/JS uses <code>Gradle</code> for the build, for the JS runtime <code>NodeJS</code>, and for the JS dependency management part <code>npm</code>.
You should have installed:
* node js (<a href="https://nodejs.org/en/download/current/" class="bare">https://nodejs.org/en/download/current/</a>)
* Apache Gradle
* Google Chrome (72.0.3626.81 or higher)
* &lt;Moesif CORS Plugin (for Chrome)</p>
</div>
</div>
<div class="sect2">
<h3 id="build"><a class="anchor" href="#build"></a>Build</h3>
<div class="paragraph">
<p>gradle can be run under Windows with git-bash:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>./gradlew.bat tasks # list all gradle tasks</p>
</li>
<li>
<p>./gradlew.bat webpack-bundle # create main.bundle.js</p>
</li>
<li>
<p>./gradlew.bat test –exclude-task npm-install</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Internally gradle uses npm for the JS part.</p>
</div>
<div class="paragraph">
<p>In IntelliJ import the gradle project residing in ~/causeway/incubator/clients/kroviz/.
TIP: In case the project isn&#8217;t working as expected, you may try File &#8594; Invalidate Caches &#8230;&#8203;
Alternatively you can e.g. in IntelliJ a Run/Debug Configuration:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/kroviz_Run_Debug_Configuration.png" alt="Preview">
</div>
</div>
<div class="listingblock">
<div class="content">
<pre> npm --verbose</pre>
</div>
</div>
<div class="paragraph">
<p>If task npm-install hangs, try</p>
</div>
<div class="listingblock">
<div class="content">
<pre> ./gradlew.bat npm-install --info --debug --stacktrace</pre>
</div>
</div>
<div class="paragraph">
<p>Helps in identifying thing that may go wrong (e.g. due to proxy settings).</p>
</div>
</div>
<div class="sect2">
<h3 id="run"><a class="anchor" href="#run"></a>Run</h3>
<div class="listingblock">
<div class="content">
<pre>gradlew.bat -t run</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="backend"><a class="anchor" href="#backend"></a>Backend</h3>
<div class="sect3">
<h4 id="via-docker-image"><a class="anchor" href="#via-docker-image"></a>Via Docker Image</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="design"><a class="anchor" href="#design"></a>Design</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the following section you&#8217;ll find information that likely helps understanding the implementation.</p>
</div>
<div class="sect2">
<h3 id="overview"><a class="anchor" href="#overview"></a>Overview</h3>
<div class="listingblock kroki-error">
<div class="title">Overview Diagram</div>
<div class="content">
<pre>@startuml

package handler {
    class ResponseHandler&lt;&lt;Facade&gt;&gt;&lt;&lt;ChainOfResponsibility&gt;&gt;{
        handle(LogEntry)
        canHandle(json)
        doHandle()
        parse(json)
    }
}

package core {
    package event {
        class XHR {
            invoke()
        }
        class EventStore&lt;&lt;Cache&gt;&gt;&lt;&lt;EventSourcing&gt;&gt; {
            log:LogEntry[]
            start()
            end()
            fault()
            find(href)
        }
        class LogEntry&lt;&lt;EventSourcing&gt;&gt; {
            url:Href
            title:String
            startedAt:Date
            updatedAt:Date
            request:String
            response:String
            blob:Blob
            object:TransferObject
            aggregators:BaseAggregator[]
            cacheHits:int
        }
        class ResourceProxy&lt;&lt;Proxy&gt;&gt; {
            + load(tObject:Tobject)
            + fetch(...)
            - process()
            - processCached()
        }

        EventStore o- LogEntry
        ResourceProxy "(1)"--&gt; EventStore
        ResourceProxy "(2)"--&gt; XHR
    }

    package aggregator {
        abstract  BaseAggregator&lt;&lt;Redux&gt;&gt;&lt;&lt;Aggregator&gt;&gt; {
            update(logEntry)
        }
        abstract AggregatorWithLayout {
            layout:Layout
        }
        BaseAggregator &lt;|.. AggregatorWithLayout
    }
}

package "to" {
    interface TransferObject&lt;&lt;TransferObject&gt;&gt;
}

XHR --&gt; ResponseHandler : TransferObject \n is written into \n LogEntry
LogEntry -&gt; TransferObject
LogEntry --&gt;"1..n" BaseAggregator

ResponseHandler .&gt; TransferObject : converts \n JSON \n into TO

circle RestfulObjects&lt;&lt;RemoteFacade&gt;&gt;
package remote &lt;&lt;Node&gt;&gt; {
    class ApacheCauseway&lt;&lt;(F, #FF7700)FrameWork&gt;&gt;
    class NakedObjects&lt;&lt;(F, #FF7700)FrameWork&gt;&gt;
    RestfulObjects &lt;|- ApacheCauseway
    RestfulObjects &lt;|-- NakedObjects
}
XHR -( RestfulObjects : invoke() \njson string / blob &lt;

note right of ResourceProxy
When ever a resource is required, the proxy is queried.
(1) It's served from the &lt;b&gt;EventStore&lt;/b&gt;, if possible. &lt;b&gt;LogEntry.cacheHits&lt;/b&gt; will be incremented.
(2) If it's not available yet, &lt;b&gt;XHR&lt;/b&gt; fetches it from remote and puts it into the &lt;b&gt;EventStore&lt;/b&gt;.

In any case, a &lt;b&gt;LogEntry&lt;/b&gt; containing the response (blob) will be passed on to it's aggregator(s).

The aggregator to be used is either determined at the point where the resource is requested,
or, based on the content of the response, assigned by the matching handler.
end note

@enduml</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="patterns-applied"><a class="anchor" href="#patterns-applied"></a>Patterns Applied</h3>
<div class="sect3">
<h4 id="redux"><a class="anchor" href="#redux"></a>Redux</h4>
<div class="paragraph">
<p>The implementation is an (independent) reinvention of Redux.
I prefer the name Aggregator over Reducer though - IIRC Aggregator is prior art.</p>
</div>
</div>
<div class="sect3">
<h4 id="half-object-protocol"><a class="anchor" href="#half-object-protocol"></a>Half Object Protocol</h4>
<div class="paragraph">
<p>The HOP pattern dates back to the early 2000, namely CanooULC.
IMO Naked Objects together with the RO API and kroViz resembles something similar.</p>
</div>
</div>
<div class="sect3">
<h4 id="transfer-object-jee-eaa"><a class="anchor" href="#transfer-object-jee-eaa"></a>Transfer Object (JEE / EAA)</h4>
<div class="paragraph">
<p>TO&#8217;s are created from JSON responses</p>
</div>
</div>
<div class="sect3">
<h4 id="event-sourcing-eaa"><a class="anchor" href="#event-sourcing-eaa"></a>Event Sourcing (EAA)</h4>
<div class="paragraph">
<p>Requests, reponses, and resulting TO&#8217;s are logged.
Before requests are sent out to the server this log is consulted and used as a cache.</p>
</div>
</div>
<div class="sect3">
<h4 id="proxy-gof"><a class="anchor" href="#proxy-gof"></a>Proxy (GOF)</h4>
<div class="paragraph">
<p>The event source acts as a Proxy and thereby saves time and bandwidth.</p>
</div>
</div>
<div class="sect3">
<h4 id="aggregator-eai"><a class="anchor" href="#aggregator-eai"></a>Aggregator (EAI)</h4>
<div class="paragraph">
<p>Various aggregators are responsible to collect or assemble displayable objects.
Once all layout information is there, the UI will be rendered, even if not all elements of a list
have arrived. Those elements will be added as they arrive. This is done with the help of
mutable lists.</p>
</div>
<div class="listingblock kroki-error">
<div class="title">CollectionAggregator Sequence Diagram</div>
<div class="content">
<pre>@startuml

actor User
participant "&lt;&lt;Singleton&gt;&gt;\nUI Manager" as UI
participant "&lt;&lt;description&gt;&gt;\nLink" as LNK #LightBlue
participant "(Xml)HttpRequest" as XHR
participant "&lt;&lt;ChainOfResponsibility&gt;&gt;\nResponseHandler" as RH
participant "&lt;&lt;description&gt;&gt;\n&lt;&lt;EventStore&gt;&gt;\nLogEntry" as LE #LightBlue
participant "&lt;&lt;moment-interval&gt;&gt;\nCollectionAggregator" as AGGT  #Pink
participant "&lt;&lt;thing&gt;&gt;\n&lt;&lt;DisplayModel&gt;&gt;\nCollectionDM" as DM #LightGreen
participant "&lt;&lt;description&gt;&gt;\nTransferObject" as TO #LightBlue

User -&gt; UI : listAll()
UI -&gt; LNK : invoke()
LNK -&gt; XHR : Invoke()
XHR -&gt; RH : handle()
activate RH
RH -&gt; RH : successor.handle()
RH -&gt; TO : parse()
RH -&gt; LE : setTransferObject()
RH -&gt; LE : addAggegator()
RH -&gt; AGGT : update(logEntry)
deactivate RH
activate AGGT

AGGT -&gt; AGGT : handleList()
activate AGGT
AGGT -&gt; LNK : invokeWith(this)
LNK -&gt; XHR: invoke(this, aggt)
deactivate AGGT

AGGT -&gt; AGGT : handleObject()
activate AGGT
AGGT -&gt; DM : addData(to)
AGGT -&gt; LNK : invokeWith(this, "json")
LNK -&gt; XHR: invoke(this, aggt, "json")
AGGT -&gt; LNK : invokeWith(this, "xml")
LNK -&gt; XHR: invoke(this, aggt, "xml")
deactivate AGGT

AGGT -&gt; AGGT : handleLayout()
activate AGGT
AGGT -&gt; DM : addLayout(to)
AGGT -&gt; DM : addPropertyDescription(to)
AGGT -&gt; LNK : invokeWith(this)
LNK -&gt; XHR: invoke(this, aggt)
deactivate AGGT

AGGT -&gt; DM : canBeDisplayed()
AGGT -&gt; UI : openView()
deactivate AGGT


UI -&gt; User : present

@enduml</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="chain-of-responsibility-gof"><a class="anchor" href="#chain-of-responsibility-gof"></a>Chain of Responsibility (GOF)</h4>
<div class="paragraph">
<p>A chain of handlers is used to identify what kind of TO is to be generated from the
JSON response. Handlers are responsible for initial assignment of aggregators.</p>
</div>
<div class="listingblock kroki-error">
<div class="title">Overview Handler</div>
<div class="content">
<pre>interface IHandler {
    handle()
    canHandle()
    doHandle()
}
abstract class AbstractHandler {
    successor:IHandler
    handle()
    canHandle()
    doHandle()
}
IHandler &lt;|-- AbstractHandler
AbstractHandler &lt;|-- ListHandler
AbstractHandler &lt;|-- MemberHandler
AbstractHandler &lt;|-- ServiceHandler
AbstractHandler &lt;|-- DefaultHandler
AbstractHandler &lt;|-- LayoutHandler
AbstractHandler &lt;|-- ObjectListHandler
AbstractHandler &lt;|-- ActionHandler

class core.Dispatcher {
    delegate:IHandler
}
core.Dispatcher --&gt; ServiceHandler : delegate
ServiceHandler --&gt; ActionHandler : successor
ActionHandler --&gt; MemberHandler : successor
MemberHandler --&gt;  ListHandler : successor
ListHandler --&gt;  ObjectListHandler : successor
ObjectListHandler --&gt;  LayoutHandler : successor
LayoutHandler --&gt;  DefaultHandler : successor</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="template-method-gof"><a class="anchor" href="#template-method-gof"></a>Template Method (GOF)</h4>
<div class="paragraph">
<p>The Handler base class makes use of this pattern. Some methods have to be implemented
in each subclass, in some cases the default implementation in the base class is used.</p>
</div>
</div>
<div class="sect3">
<h4 id="composite-pattern-gof"><a class="anchor" href="#composite-pattern-gof"></a>Composite Pattern (GOF)</h4>
<div class="paragraph">
<p>UI elements are hierarchically grouped, cf. *layout.xml</p>
</div>
</div>
<div class="sect3">
<h4 id="factory-gof"><a class="anchor" href="#factory-gof"></a>Factory (GOF)</h4>
<div class="paragraph">
<p>Used for building tables dynamically.</p>
</div>
</div>
<div class="sect3">
<h4 id="remote-facade"><a class="anchor" href="#remote-facade"></a>Remote Facade</h4>
<div class="paragraph">
<p>The Restful Objects API.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="code"><a class="anchor" href="#code"></a>Code</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Thanks to Kotlin, code is very compact and readable.
And, since Kotlin is a typed language and IDE&#8217;s can infer a lot about the code, there are only few surprises.
Nevertheless Kotlin/JS allows to use JavaScript features alongside the typed part, what effectively makes it a dynamic language.</p>
</div>
<div class="sect2">
<h3 id="hot-spots"><a class="anchor" href="#hot-spots"></a>Hot Spots</h3>
<div class="paragraph">
<p>Look out for places where typing is escaped and the DOM is manipulated directly:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>asDynamic()</p>
</li>
<li>
<p>hasOwnProperty()</p>
</li>
<li>
<p>stopPropagation()</p>
</li>
<li>
<p>getElementById()</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="trouble-shooting"><a class="anchor" href="#trouble-shooting"></a>Trouble Shooting</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="corporate-firewall-with-ssl-inspection"><a class="anchor" href="#corporate-firewall-with-ssl-inspection"></a>Corporate Firewall with SSL 'inspection'</h3>
<div class="paragraph">
<p>There are some questionable setups in coporate settings that are based on SSL replacement.
In order to cope with it, you may try to import the Certificate into cacerts,
see <a href="https://intellij-support.jetbrains.com/hc/en-us/community/posts/115000094584-IDEA-Ultimate-2016-3-4-throwing-unable-to-find-valid-certification-path-to-requested-target-when-trying-to-refresh-gradle" class="bare">https://intellij-support.jetbrains.com/hc/en-us/community/posts/115000094584-IDEA-Ultimate-2016-3-4-throwing-unable-to-find-valid-certification-path-to-requested-target-when-trying-to-refresh-gradle</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="network-proxy"><a class="anchor" href="#network-proxy"></a>Network Proxy</h2>
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre> Depending on the network you are in, you may need to configure the proxy settings. Among the relevant files are:
 `bash
    ~/.npmrc
    ~/.gitconfig
    ~/.ssh/config
    ~/.ssh/id_rsa
`
 ### References
 * https://jjasonclark.com/how-to-setup-node-behind-web-proxy/
 * https://gist.github.com/EudesSilva/0329645b9c258e0495544b8a5ccd1454</pre>
</div>
</div>
<div class="sect2">
<h3 id="access-to-git-from-npm"><a class="anchor" href="#access-to-git-from-npm"></a>Access to git from npm</h3>
<div class="sect3">
<h4 id="problem"><a class="anchor" href="#problem"></a>Problem</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">   npm ERR! Error while executing:
   npm ERR! C:\Program Files\Git\bin\git.EXE ls-remote -h -t ssh://git@github.com/jarecsni/font-awesome-webpack.git
   npm ERR!
   npm ERR! git@ssh.github.com: Permission denied (publickey).
   npm ERR! fatal: Could not read from remote repository.
   npm ERR!
   npm ERR! Please make sure you have the correct access rights
   npm ERR! and the repository exists.
   npm ERR!
   npm ERR! exited with error code: 128</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="solution"><a class="anchor" href="#solution"></a>Solution</h4>
<div class="listingblock">
<div class="title">~/.ssh/config</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">ProxyCommand /bin/connect.exe -H proxy.server.name:3128 %h %p</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">Host github.com
 User git
 Port 22
 Hostname github.com
 IdentityFile "C:\users\username.ssh\id_rsa"
 TCPKeepAlive yes
 IdentitiesOnly yes</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">Host ssh.github.com
 User git
 Port 443
 Hostname ssh.github.com
 IdentityFile "C:\users\username.ssh\id_rsa"
 TCPKeepAlive yes
 IdentitiesOnly yes</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="karma-tests-do-not-respond-to-code-changes"><a class="anchor" href="#karma-tests-do-not-respond-to-code-changes"></a>Karma-Tests do not respond to code changes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Windows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>taskkill /f /im node.exe</pre>
</div>
</div>
<div class="paragraph">
<p>Linux:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>killall node</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="misc"><a class="anchor" href="#misc"></a>Misc</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="toolchain-overview"><a class="anchor" href="#toolchain-overview"></a>Toolchain Overview</h3>
<div class="paragraph">
<p>When you are accustomed to the well settled Java ecosystem with integrated development environments, prepare yourself for learning new tools and addressing new problems.</p>
</div>
<div class="paragraph">
<p>Kotlin is straightforward and once you know it, you may not want to go back.</p>
</div>
<div class="imageblock kroki">
<div class="content">
<object type="image/svg+xml" data="_images/diag-072b8075ebb346178adef9d48467395384af90d7.svg"><span class="alt">Development MindMap</span></object>
</div>
<div class="title">Figure 1. Development MindMap</div>
</div>
<div class="ulist">
<ul>
<li>
<p>JSON structures can be visualized via kroki (cf. History &#8594; Details)</p>
</li>
<li>
<p>Layout: for FLEX see <a href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/" class="bare">https://css-tricks.com/snippets/css/a-guide-to-flexbox/</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="the-browser-as-client-runtime-environment"><a class="anchor" href="#the-browser-as-client-runtime-environment"></a>The Browser as Client Runtime Environment</h3>
<div class="paragraph">
<p>Google Chrome is used as browser. It has a very feature rich debugger (&lt;CTRL&gt;-&lt;SHIFT&gt;-I) which can even be connected to IntelliJ&#8217;s debugger (Settings &#8594; Preferences &#8594; Extension &#8594; Link handling). For a nice introduction to Chrome, see: <a href="https://www.google.com/googlebooks/chrome/" class="bare">https://www.google.com/googlebooks/chrome/</a>.</p>
</div>
<div class="paragraph">
<p>All current browsers implement some security features in order to counteract Cross-Site-Resource-Forgery (XSRF). CORS (Cross-Origin-Resource-Sharing) is beeing devised to allow access to resources from a different host-port under certain circumstances. It is said to be bypassable via <a href="https://www.npmjs.com/package/node-iframe" class="bare">https://www.npmjs.com/package/node-iframe</a>, cf. <a href="https://stackoverflow.com/questions/33143776/ajax-request-refused-to-set-unsafe-header/66782595#66782595" class="bare">https://stackoverflow.com/questions/33143776/ajax-request-refused-to-set-unsafe-header/66782595#66782595</a></p>
</div>
</div>
<div class="sect2">
<h3 id="visualize-js-dependencies"><a class="anchor" href="#visualize-js-dependencies"></a>Visualize JS dependencies</h3>
<div class="paragraph">
<p>E.g. via <a href="https://npmgraph.js.org/" class="bare">https://npmgraph.js.org/</a></p>
</div>
</div>
<div class="sect2">
<h3 id="measure-test-coverage"><a class="anchor" href="#measure-test-coverage"></a>Measure Test Coverage</h3>
<div class="listingblock">
<div class="content">
<pre>nyc npm test</pre>
</div>
</div>
<div class="paragraph">
<p>References: <a href="https://github.com/istanbuljs/nyc" class="bare">https://github.com/istanbuljs/nyc</a></p>
</div>
</div>
<div class="sect2">
<h3 id="gradle-build-overview"><a class="anchor" href="#gradle-build-overview"></a>Gradle Build Overview</h3>
<div class="listingblock kroki-error">
<div class="title">Development Overview Diagram</div>
<div class="content">
<pre>@startuml
skinparam nodesep 20
skinparam ranksep 5

top to bottom direction

component gradle &lt;&lt;build.tool&gt;&gt; {
    component kotlinFrontend &lt;&lt;gradle.plugin&gt;&gt; as KF
    component kotlin2js &lt;&lt;transpiler&gt;&gt; as K2JS
    component DCE
}


package root #gold {
    rectangle "build.gradle\nsettings.gradle\ngradle.properties" as GCFG
    rectangle karma.conf.js as KC
    rectangle package.json as PJ
    GCFG -[hidden]--&gt; PJ
}
package root.build  #gold {
}
package root.node_modules as NM #gold {
    component karma
    component webpack
}
component NodeJS
component Browser

gradle .&gt; GCFG : configured\nthrough
gradle --&gt; webpack

K2JS --&gt; root.build : generates\n*.js\n*-tests.js
KF --&gt; KC : initially generates
KC -&gt; PJ : requires
PJ -&gt; NM : adds to

:Developer,\nalmost\ngone\ncrazy;-): as DEV
($ gradlew -t run) as RUN
($ npm install &lt;&gt; --save-dev) as NI
($ npm test) as TEST

DEV --&gt; RUN
DEV --&gt; NI
RUN --&gt; gradle


component npm
NI .&gt; npm : uses
NI -&gt; PJ : updates


DEV --&gt; TEST
TEST .&gt; npm : uses
TEST --&gt; karma : runs
karma --&gt; Browser : displays\ntest results\nvia port 9876

note left of PJ
package.json.lock
end note

@enduml</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="build-the-backend-yourself"><a class="anchor" href="#build-the-backend-yourself"></a>Build the Backend Yourself</h3>
<div class="sect3">
<h4 id="tool-chain"><a class="anchor" href="#tool-chain"></a>Tool Chain</h4>
<div class="ulist">
<ul>
<li>
<p>(Oracle) JDK 11 (or higher)</p>
</li>
<li>
<p>Apache Maven 3.6.3 (or later)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="create-from-archetype"><a class="anchor" href="#create-from-archetype"></a>Create from Archetype</h4>
<div class="paragraph">
<p>Create from the Apache Causeway SimpleApp archetype:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn archetype:generate \
    -D archetypeGroupId=org.apache.causeway.archetype \
    -D archetypeArtifactId=simpleapp-archetype \
    -D archetypeVersion=2.0.0-M3 \
    -D groupId=org.my \
    -D artifactId=myapp-2.0.0-M3 \
    -D version=1.0.0 -B</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="compile"><a class="anchor" href="#compile"></a>Compile</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn clean install -DskipTests</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="run-2"><a class="anchor" href="#run-2"></a>Run</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cd webapp
mvn -Djetty.port=8080 jetty:run -DPROTOTYPING</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix"><a class="anchor" href="#appendix"></a>Appendix</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="json-terminology"><a class="anchor" href="#json-terminology"></a>JSON Terminology</h3>
<div class="paragraph">
<p>See: elp.kapowsoftware.com/9.4/index.jsp?topic=/doc/rm/JSONTerminology.html</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON Text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON Object &vert; JSON Array</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON&nbsp;Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">{} &vert; { Properties }</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON Array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[] &vert; [ Items ]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Properties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property, Properties</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String : JSON Value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Items</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON Value, Items</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON Value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON Text &vert; String &vert; Number &vert; false &vert; null &vert; true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&quot;" &vert; " Characters "</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Characters</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Character Characters</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Character</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">any Unicode character except ", \ or control character &vert; &quot; &vert; \ &vert; \/ &vert; \b &vert; \f &vert; \n &vert; \r &vert; \t &vert; \u 4 hex digits</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a number very much like a C or Java number, see RFC 4627 for details.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="cors"><a class="anchor" href="#cors"></a>CORS</h3>
<div class="paragraph">
<p>CORS stands for 'Cross Origin Resource Sharing' aka: 'Same Origin Policy' was designed to improve security and is implemented in browsers.
 In short it means: your browser will allow loading of resources only if host and port are identical to the url you are on.
 Ie. webpage loaded from <a href="http://localhost:8088/" class="bare">http://localhost:8088/</a> resources from <a href="http://localhost:8080/restful" class="bare">http://localhost:8080/restful</a> will not be accessible.</p>
</div>
<div class="sect3">
<h4 id="solution-1-qd"><a class="anchor" href="#solution-1-qd"></a>Solution 1 (Q&amp;D):</h4>
<div class="literalblock">
<div class="content">
<pre>Disable CORS in your browser, e.g. for Chrome with the MOESIF plugin.</pre>
</div>
</div>
<div class="paragraph">
<p>Nicely done introduction:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.moesif.com/blog/technical/cors/Authoritative-Guide-to-CORS-Cross-Origin-Resource-Sharing-for-REST-APIs/#how-is-origin-definedhttps://www.moesif.com/blog/technical/cors/Authoritative-Guide-to-CORS-Cross-Origin-Resource-Sharing-for-REST-APIs/#how-is-origin-defined" class="bare">https://www.moesif.com/blog/technical/cors/Authoritative-Guide-to-CORS-Cross-Origin-Resource-Sharing-for-REST-APIs/#how-is-origin-definedhttps://www.moesif.com/blog/technical/cors/Authoritative-Guide-to-CORS-Cross-Origin-Resource-Sharing-for-REST-APIs/#how-is-origin-defined</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="solution-2"><a class="anchor" href="#solution-2"></a>Solution 2:</h4>
<div class="literalblock">
<div class="content">
<pre>Add to webapp\src\main\webapp\WEB-INF\web.xml</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;!-- CORS filter for XmlHttpRequests --&gt;
&lt;filter&gt;
    &lt;filter-name&gt;cross-origin&lt;/filter-name&gt;
    &lt;filter-class&gt;org.eclipse.jetty.servlets.CrossOriginFilter&lt;/filter-class&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;allowedOrigins&lt;/param-name&gt;
        &lt;param-value&gt;*&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;allowedMethods&lt;/param-name&gt;
        &lt;value&gt;*&lt;/value&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;allowedHeaders&lt;/param-name&gt;
        &lt;param-value&gt;*&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;supportsCredentials&lt;/param-name&gt;
        &lt;param-value&gt;true&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;chainPreflight&lt;/param-name&gt;
        &lt;param-value&gt;false&lt;/param-value&gt;
    &lt;/init-param&gt;
&lt;/filter&gt;
&lt;filter-mapping&gt;
    &lt;filter-name&gt;cross-origin&lt;/filter-name&gt;
    &lt;url-pattern&gt;/restful/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>`</p>
</div>
<div class="paragraph">
<p>Put into webapp/src/main/webapp/WEB-INF/lib:
 * <a href="https://search.maven.org/artifact/org.eclipse.jetty/jetty-util/9.4.12.v20180830/jar" class="bare">https://search.maven.org/artifact/org.eclipse.jetty/jetty-util/9.4.12.v20180830/jar</a>
 * <a href="https://search.maven.org/artifact/org.eclipse.jetty/jetty-servlets/9.4.12.v20180830/jar" class="bare">https://search.maven.org/artifact/org.eclipse.jetty/jetty-servlets/9.4.12.v20180830/jar</a></p>
</div>
</div>
<div class="sect3">
<h4 id="solution-3"><a class="anchor" href="#solution-3"></a>Solution 3:</h4>
<div class="literalblock">
<div class="content">
<pre>Incorporate kroviz.js e.g. in the WAR containing your Apache Causeway backend.</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="extensions"><a class="anchor" href="#extensions"></a>Extensions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="osmleaflet"><a class="anchor" href="#osmleaflet"></a>OSM/Leaflet</h3>
<div class="ulist">
<ul>
<li>
<p>2.5D, buildings see <a href="https://osmbuildings.org/documentation/leaflet/" class="bare">https://osmbuildings.org/documentation/leaflet/</a></p>
</li>
<li>
<p>Magnifying Glass</p>
</li>
<li>
<p>Wikipedia markers</p>
</li>
<li>
<p>Routing</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="chart-js"><a class="anchor" href="#chart-js"></a>Chart.js</h3>
<div class="ulist">
<ul>
<li>
<p>SanKey diagarms, see CodePen example</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</article>
<aside class="article-aside toc hide-for-print" role="navigation">
    <p class="toc-title">On this page</p>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
    <div class="content">
        <div class="copyright">
            <p>
                Copyright © 2010~2023 The Apache Software Foundation, licensed under the Apache License, v2.0.
                <br/>
                Apache, the Apache feather logo, Apache Causeway, and the Apache Causeway project logo are all trademarks of The Apache Software Foundation.
            </p>
        </div>
        <div class="revision">
            <p>Revision: release-2.0.0-RC1-RC1.20230318-1900</p>
        </div>
    </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/jquery-3.4.1.min.js"></script>
<script src="../../../_/js/vendor/jquery-ui-1.12.1.custom.widget-only.min.js"></script>
<script src="../../../_/js/vendor/jquery.tocify.min.js"></script>

<script>
    $(function() {
        $("#article-toc").tocify( {
            showEffect: "slideDown",
            hashGenerator: "pretty",
            hideEffect: "slideUp",
            selectors: "h2, h3",
            scrollTo: 120,
            smoothScroll: true,
            theme: "jqueryui",
            highlightOnScroll: true
        } );
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script>
  function focusSearchInput () { document.querySelector('#algolia-search-input').focus() }
  var search = docsearch({
    appId: '5ISP5TFAEN',
    apiKey: '0fc51c28b4ad46e7318e96d4e97fab7c',
    indexName: 'causeway-apache-org',
    inputSelector: '#algolia-search-input',
    autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
    debug: false,
  }).autocomplete
  search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
  focusSearchInput()
  window.addEventListener('load', focusSearchInput);
</script>

<!--
  docsearch options:
  https://docsearch.algolia.com/docs/behavior/
-->
<!--
  https://www.algolia.com/doc/api-reference/api-parameters/
  algoliaOptions: { hitsPerPage: 6 },
-->
  </body>
</html>
