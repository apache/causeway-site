<!doctype html>
<html>
 <head> 
  <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    --> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
  <meta charset="utf-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <!-- No caching headers --> 
  <meta http-equiv="cache-control" content="no-cache"> 
  <meta http-equiv="pragma" content="no-cache"> 
  <meta http-equiv="expires" content="-1"> 
  <title>Fundamentals</title> 
  <link rel="icon" type="image/png" href="../../images/isis-favicon.png"> 
  <!--
        Based on DataNucleus' template,
        that was in turn based on an earlier version of Apache Isis' template,
        that was in turn based on Apache Deltaspike's template.

        This template uses
        * Bootstrap v3.3.7 (https://getbootstrap.com/) for navbar.
        * Bootstrap TOC plugin v0.4.1 (https://afeld.github.io/bootstrap-toc/)
          for the table of contents.
        * jQuery (necessary for Bootstrap's JavaScript plugins)
        * Font-Awesome for some icons used by Asciidoctor

        Also:
        * Bootswatch "flatly" theme for Bootstrap (https://bootswatch.com/flatly).
        * slick.js (carousel)
        * add a link to all headers (home-grown, adapted from blog posts)
        * integration of elasticlunr.js (home-grown, adapted from blog posts)
    --> 
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet"> 
  <link href="../../css/bootstrap-toc/0.4.1/bootstrap-toc.min.css" rel="stylesheet"> 
  <link href="../../css/asciidoctor/foundation.css" rel="stylesheet"> 
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet"> 
  <link href="../../css/slick/1.5.0/slick.css" rel="stylesheet"> 
  <link href="../../css/slick/1.5.0/slick-theme.css" rel="stylesheet"> 
  <link href="../../css/search-panel/search-panel.css" rel="stylesheet"> 
  <link href="../../css/header-links/header-links.css" rel="stylesheet"> 
  <link href="../../css/sticky-header/sticky-header.css" rel="stylesheet"> 
  <link href="../../css/customisations.css" rel="stylesheet"> 
  <!-- Coderay syntax formatter --> 
  <style type="text/css">
        /* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
    </style> 
 </head> 
 <body data-spy="scroll" data-target="#toc"> 
  <div id="basedir" style="display:none;">
   ../../
  </div> 
  <div id="docname" style="display:none;">
   ugfun
  </div> 
  <div id="filetype" style="display:none;">
   html
  </div> 
  <!-- Navbar --> 
  <nav class="navbar navbar-default navbar-static-top header"> 
   <div class="container"> 
    <div class="navbar-header"> 
     <!-- Three line menu button for use on mobile screens --> 
     <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> 
     <a class="navbar-brand" href="../../index.html"> <img alt="Brand" src="../../images/isis-logo-48x48.png"> </a> 
     <a class="navbar-brand" href="../../index.html">Apache Isis</a> 
    </div> 
    <!-- Navbar that will collapse on mobile screens --> 
    <div id="navbar" class="navbar-collapse collapse"> 
     <ul class="nav navbar-nav"> 
      <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Documentation<span class="caret"></span></a> 
       <ul class="dropdown-menu"> 
        <li><a href="../../documentation.html">Table of Contents</a></li> 
        <li role="separator" class="divider"></li> 
        <li class="dropdown-header">User Guides</li> 
        <li><a href="../../guides/ugfun/ugfun.html">Fundamentals</a></li> 
        <li><a href="../../guides/ugvw/ugvw.html">Wicket Viewer</a></li> 
        <li><a href="../../guides/ugvro/ugvro.html">Restful Objects Viewer</a></li> 
        <li><a href="../../guides/ugodn/ugodn.html">DataNucleus Object Store</a></li> 
        <li><a href="../../guides/ugsec/ugsec.html">Security</a></li> 
        <li><a href="../../guides/ugtst/ugtst.html">Testing</a></li> 
        <li><a href="../../guides/ugbtb/ugbtb.html">Beyond the Basics</a></li> 
        <li role="separator" class="divider"></li> 
        <li class="dropdown-header">Reference Guides</li> 
        <li><a href="../../guides/rgant/rgant.html">Annotations</a></li> 
        <li><a href="../../guides/rgsvc/rgsvc.html">Domain Services</a></li> 
        <li><a href="../../guides/rgcfg/rgcfg.html">Core Config' Properties</a></li> 
        <li><a href="../../guides/rgcms/rgcms.html">Classes, Methods and Schema</a></li> 
        <li><a href="../../guides/rgmvn/rgmvn.html">Maven plugin</a></li> 
        <li><a href="../../guides/rgfis/rgfis.html">Framework Internal Services</a></li> 
        <li role="separator" class="divider"></li> 
        <li class="dropdown-header">Javadoc</li> 
        <li><a href="http://javadoc.io/doc/org.apache.isis.core/isis-core-applib">Applib</a></li> 
       </ul> </li> 
      <li class="dropdown  hidden-sm hidden-md"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Downloads<span class="caret"></span></a> 
       <ul class="dropdown-menu"> 
        <li class="dropdown-header">Maven archetypes</li> 
        <li><a href="../../guides/ugfun/ugfun.html#_ugfun_getting-started_helloworld-archetype">helloworld</a></li> 
        <li><a href="../../guides/ugfun/ugfun.html#_ugfun_getting-started_simpleapp-archetype">simpleapp</a></li> 
        <li role="separator" class="divider"></li> 
        <li><a href="../../downloads.html">Downloads</a></li> 
        <li><a href="../../release-notes/release-notes.html">Release Notes</a></li> 
        <li><a href="../../migration-notes/migration-notes.html">Migration Notes</a></li> 
        <li role="separator" class="divider"></li> 
        <li><a href="https://github.com/apache/isis">Github mirror</a></li> 
       </ul> </li> 
      <li class="dropdown  hidden-sm"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Support<span class="caret"></span></a> 
       <ul class="dropdown-menu"> 
        <li class="dropdown-header">Guides</li> 
        <li><a href="../../guides/dg/dg.html">Developers' Guide</a></li> 
        <li><a href="../../guides/cgcom/cgcom.html">Committers' Guide</a></li> 
        <li><a href="../../guides/htg.html">Hints-n-Tips Guide</a></li> 
        <li role="separator" class="divider"></li> 
        <li class="dropdown-header">Mailing Lists</li> 
        <li><a href="../../support.html">How to subscribe</a></li> 
        <li><a href="https://lists.apache.org/list.html?users@isis.apache.org">Archives (ASF Pony mail)</a></li> 
        <li><a href="http://isis.markmail.org/search/?q=">Archives (Markmail)</a></li> 
        <li role="separator" class="divider"></li> 
        <li class="dropdown-header">Other Resources</li> 
        <li><a href="https://issues.apache.org/jira/browse/ISIS">ASF JIRA</a></li> 
        <li><a href="http://stackoverflow.com/questions/tagged/isis">Stack Overflow</a></li> 
        <li><a href="../../help.html">Wiki, Fisheye etc.</a></li> 
       </ul> </li> 
      <li class="dropdown hidden-sm hidden-md"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">@ASF<span class="caret"></span></a> 
       <ul class="dropdown-menu"> 
        <li><a href="http://www.apache.org/">Apache Homepage</a></li> 
        <li><a href="http://www.apache.org/licenses/">Licenses</a></li> 
        <li><a href="http://www.apache.org/security/">Security</a></li> 
        <li><a href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li> 
        <li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li> 
        <li role="separator" class="divider"></li> 
        <li><a href="https://whimsy.apache.org/board/minutes/Isis.html">PMC board minutes</a></li> 
       </ul> </li> 
     </ul> 
     <div class="nav navbar-nav navbar-right"> 
      <!-- 'style' added to fix height of input box. FIX THIS --> 
      <form class="navbar-form" role="search" id="search-form" style="padding: 1px 15px;"> 
       <div class="form-group"> 
        <input class="form-control" id="search-field" type="text" size="30" placeholder="Search"> 
       </div> 
      </form> 
     </div> 
    </div> 
   </div> 
  </nav> 
  <div class="container"> 
   <div class="row-fluid"> 
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-9"> 
     <div id="search-panel"> 
      <div id="search-results"></div> 
      <div> 
       <br> 
       <a href="#" id="search-results-clear">clear</a> 
      </div> 
     </div> 
     <span class="pdf-link"><a href="ugfun.pdf"><img src="../../images/PDF-50.png"></a></span> 
     <div class="page-title"> 
      <h1>Fundamentals</h1> 
     </div> 
     <div id="doc-content">
      <div class="btn-group" style="float: right; font-size: small; padding: 6px;  ">
       <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/ugfun.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
       <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
       <ul class="dropdown-menu">
        <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/ugfun.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
        <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/ugfun.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
        <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/ugfun.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
        <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/ugfun.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
       </ul>
      </div> 
      <div class="sect1"> 
       <h2 id="__ugfun">1. Fundamentals</h2> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>This guide introduces the <a href="../ugfun/ugfun.html#_ugfun_core-concepts">core concepts</a> and ideas behind Apache Isis, and tells you how to <a href="../ugfun/ugfun.html#_ugfun_getting-started">get started</a> with a Maven archetype.</p> 
        </div> 
        <div class="paragraph"> 
         <p>It also describes a number of <a href="../ugfun/ugfun.html#_ugfun_how-tos">how-to</a>s, describes how to influence the <a href="../ugvw/ugvw.html#_ugvw_layout">UI layout</a> of your domain objects (this is ultimately just a type of metadata), and it catalogues various <a href="../dg/dg.html#_dg_hints-and-tips.adoc">FAQ</a>s.</p> 
        </div> 
        <div class="sect2"> 
         <h3 id="_other_guides">1.1. Other Guides</h3> 
         <div class="paragraph"> 
          <p>Apache Isis documentation is broken out into a number of user, reference and "supporting procedures" guides.</p> 
         </div> 
         <div class="paragraph"> 
          <p>The user guides available are:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p><a href="../ugfun/ugfun.html">Fundamentals</a> (this guide)</p> </li> 
           <li> <p><a href="../ugvw/ugvw.html">Wicket viewer</a></p> </li> 
           <li> <p><a href="../ugvro/ugvro.html">Restful Objects viewer</a></p> </li> 
           <li> <p><a href="../ugodn/ugodn.html">DataNucleus object store</a></p> </li> 
           <li> <p><a href="../ugsec/ugsec.html">Security</a></p> </li> 
           <li> <p><a href="../ugtst/ugtst.html">Testing</a></p> </li> 
           <li> <p><a href="../ugbtb/ugbtb.html">Beyond the Basics</a></p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>The reference guides are:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p><a href="../rgant/rgant.html">Annotations</a></p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html">Domain Services</a></p> </li> 
           <li> <p><a href="../rgcfg/rgcfg.html">Configuration Properties</a></p> </li> 
           <li> <p><a href="../rgcms/rgcms.html">Classes, Methods and Schema</a></p> </li> 
           <li> <p><a href="../rgmvn/rgmvn.html">Apache Isis Maven plugin</a></p> </li> 
           <li> <p><a href="../rgfis/rgfis.html">Framework Internal Services</a></p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>The remaining guides are:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p><a href="../dg/dg.html">Developers' Guide</a> (how to set up a development environment for Apache Isis and contribute back to the project)</p> </li> 
           <li> <p><a href="../cgcom/cgcom.html">Committers' Guide</a> (release procedures and related practices)</p> </li> 
          </ul> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_ugfun_core-concepts">2. Core Concepts</h2>
       <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
        <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
        <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
        <ul class="dropdown-menu">
         <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
         <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
         <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
         <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
        </ul>
       </div> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>This introductory chapter should give you a good about what Apache Isis actually <strong>is</strong>: the fundamental ideas and principles that it builds upon, how it compares with other frameworks, what the fundamental building blocks are for actually writing an Isis application, and what services and features the framework provides for you to leverage in your own apps.</p> 
        </div> 
        <div class="paragraph"> 
         <p>Parts of this chapter have been adapted from Dan Haywood’s 2009 book, 'Domain Driven Design using Naked Objects'. We’ve also added some new insights and made sure the material we’ve used is relevant to Apache Isis.</p> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_core-concepts_philosophy">2.1. Philosophy and Architecture</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>This section describes some of the core ideas and architectural patterns upon which Apache Isis builds.</p> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_core-concepts_philosophy_domain-driven-design">2.1.1. Domain-Driven Design</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_domain-driven-design.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_domain-driven-design.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_domain-driven-design.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_domain-driven-design.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_domain-driven-design.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>There’s no doubt that we developers love the challenge of understanding and deploying complex technologies. But understanding the nuances and subtleties of the business domain itself is just as great a challenge, perhaps more so. If we devoted our efforts to understanding and addressing those subtleties, we could build better, cleaner, and more maintainable software that did a better job for our stakeholders. And there’s no doubt that our stakeholders would thank us for it.</p> 
          </div> 
          <div class="paragraph"> 
           <p>A couple of years back Eric Evans wrote his book <a href="http://www.amazon.co.uk/Domain-driven-Design-Tackling-Complexity-Software/dp/0321125215">Domain-Driven Design</a>, which is well on its way to becoming a seminal work. In fact, most if not all of the ideas in Evans' book have been expressed before, but what he did was pull those ideas together to show how predominantly object-oriented techniques can be used to develop rich, deep, insightful, and ultimately useful business applications.</p> 
          </div> 
          <div class="paragraph"> 
           <p>There are two central ideas at the heart of domain-driven design.</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p>the <strong><em>ubiquitous language</em></strong> is about getting the whole team (both domain experts and developers) to communicate more transparently using a domain model.</p> </li> 
            <li> <p>Meanwhile, <strong><em>model-driven design</em></strong> is about capturing that model in a very straightforward manner in code.</p> </li> 
           </ul> 
          </div> 
          <div class="paragraph"> 
           <p>Let’s look at each in turn.</p> 
          </div> 
          <div class="sect4"> 
           <h5 id="__ugfun_core-concepts_philosophy_domain-driven-design_ubiquitous-language">Ubiquitous Language</h5> 
           <div class="paragraph"> 
            <p>It’s no secret that the IT industry is plagued by project failures. Too often systems take longer than intended to implement, and when finally implemented, they don’t address the real requirements anyway.</p> 
           </div> 
           <div class="paragraph"> 
            <p>Over the years we in IT have tried various approaches to address this failing. Using waterfall methodologies, we’ve asked for requirements to be fully and precisely written down before starting on anything else. Or, using agile methodologies, we’ve realized that requirements are likely to change anyway and have sought to deliver systems incrementally using feedback loops to refine the implementation.</p> 
           </div> 
           <div class="paragraph"> 
            <p>But let’s not get distracted talking about methodologies. At the end of the day what really matters is communication between the domain experts (that is, the business) who need the system and the techies actually implementing it. If the two don’t have and cannot evolve a shared understanding of what is required, then the chance of delivering a useful system will be next to nothing.</p> 
           </div> 
           <div class="paragraph"> 
            <p>Bridging this gap is traditionally what business analysts are for; they act as interpreters between the domain experts and the developers. However, this still means there are two (or more) languages in use, making it difficult to verify that the system being built is correct. If the analyst mistranslates a requirement, then neither the domain expert nor the application developer will discover this until (at best) the application is first demonstrated or (much worse) an end user sounds the alarm once the application has been deployed into production.</p> 
           </div> 
           <div class="paragraph"> 
            <p>Rather than trying to translate between a business language and a technical language, with <em>DDD</em> we aim to have the business and developers using the same terms for the same concepts in order to create a single <strong><em>domain model</em></strong>. This domain model identifies the relevant concepts of the domain, how they relate, and ultimately where the responsibilities are. This single domain model provides the vocabulary for the ubiquitous language for our system.</p> 
           </div> 
           <div class="sidebarblock"> 
            <div class="content"> 
             <div class="title">
              Ubiquitous Language
             </div> 
             <div class="paragraph"> 
              <p>Build a common language between the domain experts and developers by using the concepts of the domain model as the primary means of communication. Use the terms in speech, in diagrams, in writing, and when presenting.</p> 
             </div> 
             <div class="paragraph"> 
              <p>If an idea cannot be expressed using this set of concepts, then go back and extend the model. Look for and remove ambiguities and inconsistencies.</p> 
             </div> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>Creating a ubiquitous language calls upon everyone involved in the system’s development to express what they are doing through the vocabulary provided by the model. If this can’t be done, then our model is incomplete. Finding the missing words deepens our understanding of the domain being modeled.</p> 
           </div> 
           <div class="paragraph"> 
            <p>This might sound like nothing more than me insisting that the developers shouldn’t use jargon when talking to the business. Well, that’s true enough, but it’s not a one-way street. A <strong>ubiquitous language</strong> demands that the developers work hard to understand the problem domain, but it also demands that the business works hard in being <strong>precise</strong> in its naming and descriptions of those concepts. After all, ultimately the developers will have to express those concepts in a computer programming language.</p> 
           </div> 
           <div class="paragraph"> 
            <p>Also, although here I’m talking about the "domain experts" as being a homogeneous group of people, often they may come from different branches of the business. Even if we weren’t building a computer system, there’s a lot of value in helping the domain experts standardize their own terminology. Is the marketing department’s "prospect" the same as sales' "customer," and is that the same as an after-sales "contract"?</p> 
           </div> 
           <div class="paragraph"> 
            <p>The need for precision within the ubiquitous language also helps us scope the system. Most business processes evolve piecemeal and are often quite ill-defined. If the domain experts have a very good idea of what the business process should be, then that’s a good candidate for automation, that is, including it in the scope of the system. But if the domain experts find it hard to agree, then it’s probably best to leave it out. After all, human beings are rather more capable of dealing with fuzzy situations than computers.</p> 
           </div> 
           <div class="paragraph"> 
            <p>So, if the development team (business and developers together) continually searches to build their ubiquitous language, then the domain model naturally becomes richer as the nuances of the domain are uncovered. At the same time, the knowledge of the business domain experts also deepens as edge conditions and contradictions that have previously been overlooked are explored.</p> 
           </div> 
           <div class="paragraph"> 
            <p>We use the ubiquitous language to build up a domain model. But what do we do <strong>with</strong> that model? The answer to that is the second of our central ideas.</p> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="_model_driven_design">Model-Driven Design</h5> 
           <div class="paragraph"> 
            <p>Of the various methodologies that the IT industry has tried, many advocate the production of separate analysis models and implementation models. One example (from the mid 2000s) was that of the <em>OMG</em>'s Model-Driven Architecture ( <em>MDA</em>) initiative, with its platform-independent model (the <em>PIM</em>) and a platform-specific model (the <em>PSM</em>).</p> 
           </div> 
           <div class="paragraph"> 
            <p>Bah and humbug! If we use our ubiquitous language just to build up a high-level analysis model, then we will re-create the communication divide. The domain experts and business analysts will look only to the analysis model, and the developers will look only to the implementation model. Unless the mapping between the two is completely mechanical, inevitably the two will diverge.</p> 
           </div> 
           <div class="paragraph"> 
            <p>What do we mean by <strong>model</strong> anyway? For some, the term will bring to mind UML class or sequence diagrams and the like. But this isn’t a model; it’s a visual <strong>representation</strong> of some aspect of a model. No, a domain model is a group of related concepts, identifying them, naming them, and defining how they relate. What is in the model depends on what our objective is. We’re not looking to simply model everything that’s out there in the real world. Instead, we want to take a relevant abstraction or simplification of it and then make it do something useful for us. A model is neither right nor wrong, just more or less useful.</p> 
           </div> 
           <div class="paragraph"> 
            <p>For our ubiquitous language to have value, the domain model that encodes it must have a straightforward, literal representation to the design of the software, specifically to the implementation. Our software’s design should be driven by this model; we should have a model-driven design.</p> 
           </div> 
           <div class="sidebarblock"> 
            <div class="content"> 
             <div class="title">
              Model-Driven Design
             </div> 
             <div class="paragraph"> 
              <p>There must be a straightforward and very literal way to represent the domain model in terms of software. The model should balance these two requirements: form the ubiquitous language of the development team and be representable in code.</p> 
             </div> 
             <div class="paragraph"> 
              <p>Changing the code means changing the model; refining the model requires a change to the code.</p> 
             </div> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>Here also the word <strong>design</strong> might mislead; some might be thinking of design documents and design diagrams, or perhaps of user interface (UX) design. But by <strong>design</strong> we mean a way of organizing the domain concepts, which in turn leads to the way in which we organize their representation in code.</p> 
           </div> 
           <div class="paragraph"> 
            <p>Luckily, using <strong><em>object-oriented</em></strong> (<em>OO</em>) languages such as Java, this is relatively easy to do; <em>OO</em> is based on a modeling paradigm anyway. We can express domain concepts using classes and interfaces, and we can express the relationships between those concepts using associations.</p> 
           </div> 
           <div class="paragraph"> 
            <p>So far so good. Or maybe, so far so much motherhood and apple pie. Understanding the <em>DDD</em> concepts isn’t the same as being able to apply them, and some of the <em>DDD</em> ideas can be difficult to put into practice. Time to discuss the naked objects pattern and how it eases that path by applying these central ideas of <em>DDD</em> in a very concrete way.</p> 
           </div> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_core-concepts_philosophy_naked-objects-pattern">2.1.2. Naked Objects Pattern</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_naked-objects-pattern.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_naked-objects-pattern.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_naked-objects-pattern.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_naked-objects-pattern.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_naked-objects-pattern.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>Apache Isis implements the naked objects pattern, originally formulated by Richard Pawson. So who better than Richard to explain the origination of the idea:</p> 
          </div> 
          <div class="quoteblock"> 
           <blockquote> 
            <div class="paragraph"> 
             <p>The Naked Objects pattern arose, at least in part, from my own frustration at the lack of success of the domain-driven approach. Good examples were hard to find — as they are still.</p> 
            </div> 
            <div class="paragraph"> 
             <p>A common complaint from <em>DDD</em> practitioners was that it was hard to gain enough commitment from business stakeholders, or even to engage them at all. My own experience suggested that it was nearly impossible to engage business managers with UML diagrams. It was much easier to engage them in rapid prototyping — where they could see and interact with the results — but most forms of rapid prototyping concentrate on the presentation layer, often at the expense of the underlying model and certainly at the expense of abstract thinking.</p> 
            </div> 
            <div class="paragraph"> 
             <p>Even if you could engage the business sponsors sufficiently to design a domain model, by the time you’d finished developing the system on top of the domain model, most of its benefits had disappeared. It’s all very well creating an agile domain object model, but if any change to that model also dictates the modification of one or more layers underneath it (dealing with persistence) and multiple layers on top (dealing with presentation), then that agility is practically worthless.</p> 
            </div> 
            <div class="paragraph"> 
             <p>The other concern that gave rise to the birth of Naked Objects was how to make user interfaces of mainstream business systems more "expressive" — how to make them feel more like using a drawing program or <em>CAD</em> system. Most business systems are not at all expressive; they treat the user merely as a dumb <strong>process-follower</strong>, rather than as an empowered <strong>problem-solver</strong>. Even the so-called usability experts had little to say on the subject: try finding the word "empowerment" or any synonym thereof in the index of any book on usability. Research had demonstrated that the best way to achieve expressiveness was to create an object-oriented user interface (<em>OOUI</em>). In practice, though, <em>OOUI</em>s were notoriously hard to develop.</p> 
            </div> 
            <div class="paragraph"> 
             <p>Sometime in the late 1990s, it dawned on me that if the domain model really did represent the "ubiquitous language" of the business and those domain objects were behaviorally rich (that is, business logic is encapsulated as methods on the domain objects rather than in procedural scripts on top of them), then the <em>UI</em> could be nothing more than a reflection of the user interface. This would solve both of my concerns. It would make it easier to do domain-driven design, because one could instantly translate evolving domain modeling ideas into a working prototype. And it would deliver an expressive, object-oriented user interface for free. Thus was born the idea of Naked Objects.</p> 
            </div> 
           </blockquote> 
          </div> 
          <div class="paragraph"> 
           <p>You can learn much more about the pattern in the book, <a href="http://www.amazon.com/exec/obidos/ISBN=0470844205/">Naked Objects</a>, also freely available to <a href="http://www.nakedobjects.org/book/">read online</a>. Richard co-wrote the book with one of Apache Isis' committers, Robert Matthews, who was in turn the author of the Naked Objects Framework for Java (the original codebase of of Apache Isis).</p> 
          </div> 
          <div class="paragraph"> 
           <p>You might also want to read Richard’s <a href="resources/core-concepts/Pawson-Naked-Objects-thesis.pdf">PhD on the subject</a>.</p> 
          </div> 
          <div class="admonitionblock tip"> 
           <table> 
            <tbody>
             <tr> 
              <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
              <td class="content"> 
               <div class="paragraph"> 
                <p>One of the external examiners for Richard’s PhD was <a href="http://en.wikipedia.org/wiki/Trygve_Reenskaug">Trygve Reenskaug</a>, who originally formulated the MVC pattern at Xeroc PARC. In his paper, <a href="http://heim.ifi.uio.no/~trygver/2007/2007.02.13-babyUML.pdf">Baby UML</a>, Reenskaug describes that when implemented the first MVC, "the conventional wisdom in the group was that objects should be visible and tangible, thus bridging the gap between the human brain and the abstract data within the computer." Sound familiar? It’s interesting to speculate what might have been if this idea had been implemented back then in the late 70s.</p> 
               </div> 
               <div class="paragraph"> 
                <p>Reenskaug then goes on to say that "this simple and powerful idea failed because …​ users were used to seeing [objects] from different perspectives. The visible and tangible object would get very complex if it should be able to show itself and be manipulated in many different ways."</p> 
               </div> 
               <div class="paragraph"> 
                <p>In Apache Isis the responsibility of rendering an object is not the object itself, it is the framework. Rather, the object inspects the object and uses that to decide how to render the object. This is also extensible. In the (non-ASF) <a href="http://platform.incode.org" target="_blank">Incode Platform</a> the gmap3 wicket extension renders any object with latitude/longitude on a map, while fullcalendar2 renders any object with date(s) on a calendar.</p> 
               </div> </td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="sect4"> 
           <h5 id="_ugfun_core-concepts_philosophy_naked-objects-pattern_object-interface-mapping">Object Interface Mapping</h5>
           <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
            <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_naked-objects-pattern_object-interface-mapping.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
            <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
            <ul class="dropdown-menu">
             <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_naked-objects-pattern_object-interface-mapping.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
             <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_naked-objects-pattern_object-interface-mapping.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
             <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_naked-objects-pattern_object-interface-mapping.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
             <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_naked-objects-pattern_object-interface-mapping.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
            </ul>
           </div> 
           <div class="paragraph"> 
            <p>Another — more technical — way to think about the naked objects pattern is as an <em>object interface mapper</em>, or <code>OIM</code>. We sometimes use this idea to explain naked objects to a bunch of developers.</p> 
           </div> 
           <div class="paragraph"> 
            <p>Just as an ORM (such as <a href="http://datanucleus.org">DataNucleus</a> or <a href="http://hibernate.org">Hibernate</a>) maps domain entities to a database, you can think of the naked objects pattern as representing the concept of mapping domain objects to a user interface.</p> 
           </div> 
           <div class="paragraph"> 
            <p>This is the way that the <a href="http://metawidget.org/">MetaWidget</a> team, in particular Richard Kennard, the primary contributor, likes to describe their tool. MetaWidget has a number of ideas in common with Apache Isis (we compare Apache Isis' with MetaWidget <a href="../ugfun/ugfun.html#_ugfun_core-concepts_principles_apache-isis-vs_metawidget">here</a>), in particular the runtime generation of a UI for domain objects. You can hear more from Kennard and others on this <a href="http://devchat.tv/js-jabber/150-jsj-oims">Javascript Jabber podcast</a>.</p> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="_what_this_means_in_practice">What this means in practice</h5> 
           <div class="paragraph"> 
            <p>This <a href="https://www.youtube.com/watch?v=ludOLyi6VyY">screencast</a> shows what all of this means in practice, showing the relationship between a running app and the actual code underneath.</p> 
           </div> 
           <div class="admonitionblock note"> 
            <table> 
             <tbody>
              <tr> 
               <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
               <td class="content"> 
                <div class="paragraph"> 
                 <p>This screencast shows Apache Isis v1.0.0, Jan 2013. The UI has been substantially refined since that release.</p> 
                </div> </td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_core-concepts_philosophy_hexagonal-architecture">2.1.3. Hexagonal Architecture</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_hexagonal-architecture.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_hexagonal-architecture.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_hexagonal-architecture.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_hexagonal-architecture.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_hexagonal-architecture.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>One of the patterns that Evans discusses in his book is that of a <strong>layered architecture</strong>. In it he describes why the domain model lives in its own layer within the architecture. The other layers of the application (usually presentation, application, and persistence) have their own responsibilities, and are completely separate. Each layer is cohesive and depending only on the layers below. In particular, we have a layer dedicated to the domain model. The code in this layer is unencumbered with the (mostly technical) responsibilities of the other layers and so can evolve to tackle complex domains as well as simple ones.</p> 
          </div> 
          <div class="paragraph"> 
           <p>This is a well-established pattern, almost a de-facto; there’s very little debate that these responsibilities should be kept separate from each other. With Apache Isis the responsibility for presentation is a framework concern, the responsibility for the domain logic is implemented by the (your) application code.</p> 
          </div> 
          <div class="paragraph"> 
           <p>A few years ago Alistair Cockburn reworked the traditional layered architecture diagram and came up with the <strong><em>hexagonal architecture</em></strong>:.</p> 
          </div> 
          <div class="admonitionblock tip"> 
           <table> 
            <tbody>
             <tr> 
              <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
              <td class="content"> 
               <div class="paragraph"> 
                <p>The hexagonal architecture is also known as the <a href="http://c2.com/cgi/wiki?PortsAndAdaptersArchitecture">Ports and Adapters</a> architecture or (less frequently) as the <a href="http://jeffreypalermo.com/blog/the-onion-architecture-part-1/">Onion</a> architecture.</p> 
               </div> </td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="imageblock"> 
           <div class="content"> 
            <img src="images/core-concepts/philosophy/hexagonal-architecture.png" alt="hexagonal architecture" width="700px"> 
           </div> 
           <div class="title">
            Figure 1. The hexagonal architecture emphasizes multiple implementations of the different layers.
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>What Cockburn is emphasizing is that there’s usually more than one way <strong>into</strong> an application (what he called the <strong><em>user-side' ports</em></strong>) and more than one way <strong>out of</strong> an application too (the <strong><em>data-side ports</em></strong>). This is very similar to the concept of primary and secondary actors in use cases: a primary actor (often a human user but not always) is active and initiates an interaction, while a secondary actor (almost always an external system) is passive and waits to be interacted with.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Associated with each port can be an <strong><em>adapter</em></strong> (in fact, Cockburn’s alternative name for this architecture is <strong><em>ports and adapters</em></strong>). An adapter is a device (piece of software) that talks in the protocol (or <em>API</em>) of the port. Each port could have several adapters.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Apache Isis maps very nicely onto the <strong>hexagonal architecture</strong>. Apache Isis' viewers act as user-side adapters and use the Apache Isis metamodel API as a port into the domain objects. For the data side, we are mostly concerned with persisting domain objects to some sort of object store. Here Apache Isis delegates most of the heavy lifting to ORM implementing the JDO API. Most of the time this will be DataNucleus configured to persist to an RDBMS, but DataNucleus can also support other object stores, for example Neo4J. Alternatively Apache Isis can be configured to persist using some other JDO implementation, for example Google App Engine.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_core-concepts_philosophy_aop">2.1.4. Aspect Oriented</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_aop.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_aop.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_aop.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_aop.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_aop.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>Although not a book about object modelling, Evans' "Domain Driven Design" does use object orientation as its primary modelling tool; while <a href="../ugfun/ugfun.html#_ugfun_core-concepts_philosophy_naked-objects-pattern">naked objects pattern</a> very much comes from an OO background (it even has 'object' in its name). Richard Pawson — the originator of Naked Objects pattern — lists Alan Kay as a key influence.</p> 
          </div> 
          <div class="paragraph"> 
           <p>It’s certainly true that to develop an Apache Isis application you will need to have good object oriented modelling skills. But given that all the mainstream languages for developing business systems are object oriented (Java, C#, Ruby), that’s not such a stretch.</p> 
          </div> 
          <div class="paragraph"> 
           <p>However, what you’ll also find as you write your applications is that in some ways an Isis application is more aspect-oriented than it is object oriented. Given that aspect-orientation — as a programming paradigm at least — hasn’t caught on, that statement probably needs unpacking a little.</p> 
          </div> 
          <div class="sect4"> 
           <h5 id="_aop_concepts">AOP Concepts</h5> 
           <div class="paragraph"> 
            <p>Aspect-orientation, then, is a different way of decomposing your application, by treating <em>cross-cutting concerns</em> as a first-class citizen. The canonical (also rather boring) example of a cross-cutting concern is that of logging (or tracing) all method calls. An aspect can be written that will weave in some code (a logging statement) at specified points in the code).</p> 
           </div> 
           <div class="paragraph"> 
            <p>This idea sounds rather abstract, but what it really amounts to is the idea of interceptors. When one method calls another the AOP code is called in first. This is actually then one bit of AOP that is quite mainstream; DI containers such as Spring provide aspect orientation in supporting annotations such as <code>@Transactional</code> or <code>@Secured</code> to java beans.</p> 
           </div> 
           <div class="paragraph"> 
            <p>Another aspect (so to speak!) of aspect-oriented programming has found its way into other programming languages, that of a mix-in or trait. In languages such as Scala these mix-ins are specified statically as part of the inheritance hierarchy, whereas with AOP the binding of a trait to some other class/type is done without the class "knowing" that additional behaviour is being mixed-in to it.</p> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="_realization_within_apache_isis">Realization within Apache Isis</h5> 
           <div class="paragraph"> 
            <p>What has all this to do with Apache Isis, then?</p> 
           </div> 
           <div class="paragraph"> 
            <p>Well, a different way to think of the naked objects pattern is that the visualization of a domain object within a UI is a cross-cutting concern. By following certain very standard programming conventions that represent the <em>Apache Isis Programming Model</em> (POJOs plus annotations), the framework is able to build a metamodel and from this can render your domain objects in a standard generic fashion. That’s a rather more interesting cross-cutting concern than boring old logging!</p> 
           </div> 
           <div class="paragraph"> 
            <p>Apache Isis also draws heavily on the AOP concept of interceptors. Whenever an object is rendered in the UI, it is filtered with respect to the user’s permissions. That is, if a user is not authorized to either view or perhaps modify an object, then this is applied transparently by the framework. The (non-ASF) <a href="http://platform.incode.org" target="_blank">Incode Platform</a>'s security module, mentioned previously, provides a rich user/role/permissions subdomain to use out of the box; but you can integrate with a different security mechanism if you have one already.</p> 
           </div> 
           <div class="paragraph"> 
            <p>Another example of interceptors are the (non-ASF) <a href="http://platform.incode.org" target="_blank">Incode Platform</a>'s command and audit modules. The command module captures every user interaction that modifies the state of the system (the "cause" of a change) while the audit module captures every change to every object (the "effect" of a change). Again, this is all transparent to the user.</p> 
           </div> 
           <div class="paragraph"> 
            <p>Apache Isis also has an internal event bus (you can switch between an underlying implementation of Gauva or Axon). A domain event is fired whenever an object is interacted with, and this allows any subscribers to influence the operation (or even veto it). This is a key mechanism in ensuring that Isis applications are maintainable, and we discuss it in depth in the section on <a href="../ugbtb/ugbtb.html#_ugbtb_decoupling">Decoupling</a>. But fundamentally its relying on this AOP concept of interceptors.</p> 
           </div> 
           <div class="paragraph"> 
            <p>Finally, Isis also a feature that is akin to AOP mix-ins. A "contributed action" is one that is implemented on a domain service but that appears to be a behaviour of rendered domain object. In other words, we can dissociate behaviour from data. That’s not always the right thing to do of course. In Richard Pawson’s description of the <a href="../ugfun/ugfun.html#_ugfun_core-concepts_philosophy_naked-objects-pattern">naked objects pattern</a> he talks about "behaviourally rich" objects, in other words where the business functionality encapsulated the data. But on the other hand sometimes the behaviour and data structures change at different rates. The <a href="http://en.wikipedia.org/wiki/Single_responsibility_principle">single responsibility principle</a> says we should only lump code together that changes at the same rate. Apache Isis' support for contributions (not only contributed actions, but also contributed properties and contributed collections) enables this. And again, to loop back to the topic of this section, it’s an AOP concept that being implemented by the framework.</p> 
           </div> 
           <div class="paragraph"> 
            <p>The nice thing about aspect orientation is that for the most part you can ignore these cross-cutting concerns and - at least initially - just focus on implementing your domain object. Later when your app starts to grow and you start to break it out into smaller modules, you can leverage Apache Isis' AOP support for (<a href="../ugfun/ugfun.html#_ugfun_building-blocks_types-of-domain-objects_mixins">mixins</a>), (<a href="../ugfun/ugfun.html#_ugfun_programming-model_domain-services_contributions">contributed services</a>) and interceptors (the <a href="../ugfun/ugfun.html#_ugfun_building-blocks_events_domain-events">event bus</a>) to ensure that your codebase remains maintainable.</p> 
           </div> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_core-concepts_philosophy_how-eases-ddd">2.1.5. How Apache Isis eases DDD</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_how-eases-ddd.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_how-eases-ddd.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_how-eases-ddd.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_how-eases-ddd.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_philosophy_how-eases-ddd.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>The case for <em>DDD</em> might be compelling, but that doesn’t necessarily make it easy to do. Let’s take a look at some of the challenges that <em>DDD</em> throws up and see how Apache Isis (and its implementation of the naked objects pattern) helps address them.</p> 
          </div> 
          <div class="sect4"> 
           <h5 id="_ddd_takes_a_conscious_effort">DDD takes a conscious effort</h5> 
           <div class="paragraph"> 
            <p>Here’s what Eric Evans says about ubiquitous language:</p> 
           </div> 
           <div class="quoteblock"> 
            <blockquote> 
             <div class="paragraph"> 
              <p>With a conscious effort by the [development] team the domain model can provide the backbone for [the] common [ubiquitous] language…​connecting team communication to the software implementation.</p> 
             </div> 
            </blockquote> 
           </div> 
           <div class="paragraph"> 
            <p>The word to pick up on here is <strong>conscious</strong>. It takes a <em>conscious</em> effort by the entire team to develop the ubiquitous language. Everyone in the team must challenge the use of new or unfamiliar terms, must clarify concepts when used in a new context, and in general must be on the lookout for sloppy thinking. This takes willingness on the part of all involved, not to mention some practice.</p> 
           </div> 
           <div class="paragraph"> 
            <p>With Apache Isis, though, the ubiquitous language evolves with scarcely any effort at all. For the business experts, the Apache Isis viewers show the domain concepts they identify and the relationships between those concepts in a straightforward fashion. Meanwhile, the developers can devote themselves to encoding those domain concepts directly as domain classes. There’s no technology to get distracted by; there is literally nothing else for the developers to work on.</p> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="_ddd_must_be_grounded">DDD must be grounded</h5> 
           <div class="paragraph"> 
            <p>Employing a model-driven design isn’t necessarily straightforward, and the development processes used by some organizations positively hinder it. It’s not sufficient for the business analysts or architects to come up with some idealized representation of the business domain and then chuck it over the wall for the programmers to do their best with.</p> 
           </div> 
           <div class="paragraph"> 
            <p>Instead, the concepts in the model must have a very literal representation in code. If we fail to do this, then we open up the communication divide, and our ubiquitous language is lost. There is literally no point having a domain model that cannot be represented in code. We cannot invent our ubiquitous language in a vacuum, and the developers must ensure that the model remains grounded in the doable.</p> 
           </div> 
           <div class="paragraph"> 
            <p>In Apache Isis, we have a very pure one-to-one correspondence between the domain concepts and its implementation. Domain concepts are represented as classes and interfaces, easily demonstrated back to the business. If the model is clumsy, then the application will be clumsy too, and so the team can work together to find a better implementable model.</p> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="_model_must_be_understandable">Model must be understandable</h5> 
           <div class="paragraph"> 
            <p>If we are using code as the primary means of expressing the model, then we need to find a way to make this model understandable to the business.</p> 
           </div> 
           <div class="paragraph"> 
            <p>We could generate UML diagrams and the like from code. That will work for some members of the business community, but not for everyone. Or we could generate a PDF document from Javadoc comments, but comments aren’t code and so the document may be inaccurate. Anyway, even if we do create such a document, not everyone will read it.</p> 
           </div> 
           <div class="paragraph"> 
            <p>A better way to represent the model is to show it in action as a working prototype. As we show in the <a href="../ugfun/ugfun.html#_ugfun_getting-started">Getting Started</a> section, Apache Isis enables this with ease. Such prototypes bring the domain model to life, engaging the audience in a way that a piece of paper never can.</p> 
           </div> 
           <div class="paragraph"> 
            <p>Moreover, with Apache Isis prototypes, the domain model will come shining through. If there are mistakes or misunderstandings in the domain model (inevitable when building any complex system), they will be obvious to all.</p> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="_architecture_must_be_robust">Architecture must be robust</h5> 
           <div class="paragraph"> 
            <p><em>DDD</em> rightly requires that the domain model lives in its own layer within the architecture. The other layers of the application (usually presentation, application, and persistence) have their own responsibilities, and are completely separate.</p> 
           </div> 
           <div class="paragraph"> 
            <p>However, there are two immediate issues. The first is rather obvious: custom coding each of those other layers is an expensive proposition. Picking up on the previous point, this in itself can put the kibosh on using prototyping to represent the model, even if we wanted to do so.</p> 
           </div> 
           <div class="paragraph"> 
            <p>The second issue is more subtle. It takes real skill to ensure the correct separation of concerns between these layers, if indeed you can get an agreement as to what those concerns actually are. Even with the best intentions, it’s all too easy for custom-written layers to blur the boundaries and put (for example) validation in the user interface layer when it should belong to the domain layer. At the other extreme, it’s quite possible for custom layers to distort or completely subvert the underlying domain model.</p> 
           </div> 
           <div class="paragraph"> 
            <p>Because of Apache Isis' generic <em>OOUI</em>s, there’s no need to write the other layers of the architecture. Of course, this reduces the development cost. But more than that, there will be no leakage of concerns outside the domain model. All the validation logic <strong>must</strong> be in the domain model because there is nowhere else to put it.</p> 
           </div> 
           <div class="paragraph"> 
            <p>Moreover, although Apache Isis does provide a complete runtime framework, there is no direct coupling of your domain model to the framework. That means it is very possible to take your domain model prototyped in Naked Objects and then deploy it on some other <em>J(2)EE</em> architecture, with a custom <em>UI</em> if you want. Apache Isis guarantees that your domain model is complete.</p> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="_extending_the_reach_of_ddd">Extending the reach of DDD</h5> 
           <div class="paragraph"> 
            <p>Domain-driven design is often positioned as being applicable only to complex domains; indeed, the subtitle of Evans book is "Tackling Complexity in the Heart of Software". The corollary is that DDD is overkill for simpler domains. The trouble is that we immediately have to make a choice: is the domain complex enough to warrant a domain-driven approach?</p> 
           </div> 
           <div class="paragraph"> 
            <p>This goes back to the previous point, building and maintaining a layered architecture. It doesn’t seem cost effective to go to all the effort of a DDD approach if the underlying domain is simple.</p> 
           </div> 
           <div class="paragraph"> 
            <p>However, with Apache Isis, we don’t write these other layers, so we don’t have to make a call on how complex our domain is. We can start working solely on our domain, even if we suspect it will be simple. If it is indeed a simple domain, then there’s no hardship, but if unexpected subtleties arise, then we’re in a good position to handle them.</p> 
           </div> 
           <div class="paragraph"> 
            <p>If you’re just starting out writing domain-driven applications, then Apache Isis should significantly ease your journey into applying <em>DDD</em>. On the other hand, if you’ve used <em>DDD</em> for a while, then you should find Isis a very useful new tool in your arsenal.</p> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_core-concepts_principles">2.2. Principles and Values</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_principles.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_principles.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_principles.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_principles.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_principles.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>Apache Isis is primarily aimed at custom-built "enterprise" applications. The UI provided by the <a href="../ugvw/ugvw.html">Wicket viewer</a> is intended to be usable by domain experts, typically end-users within the organization. The REST API exposed by the <a href="../ugvro/ugvro.html">RestfulObjects viewer</a> allows custom apps to be developed — eg using Angular or similar — for use by those requiring more guidance; typically end-users outside of the organization. This section describes some of the core principles and values that the framework aims to honour and support.</p> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_core-concepts_principles_build-not-buy">2.2.1. Why Build instead of Buy?</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_principles_build-not-buy.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_principles_build-not-buy.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_principles_build-not-buy.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_principles_build-not-buy.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_principles_build-not-buy.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>Buying packaged software makes sense for statutory requirements, such as payroll or general ledger, or document management/retrieval. But (we argue) it makes much less sense to buy packaged software for the systems that support the core business: the software should fit the business, not the other way around.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Packaged software suffers from the problem of both having doing "too much" and "not enough":</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p>it does "too much" because it will have features that are not required by your business. These extra unnecessary features make the system difficult to learn and use.;</p> </li> 
            <li> <p>but it may also do "too little" because there may be crucial functionality not supported by the software.</p> </li> 
           </ul> 
          </div> 
          <div class="paragraph"> 
           <p>The diagram below illustrates the dichotomy:</p> 
          </div> 
          <div class="imageblock"> 
           <div class="content"> 
            <a class="image" href="images/core-concepts/philosophy/build-vs-buy.png"><img src="images/core-concepts/philosophy/build-vs-buy.png" alt="build vs buy" width="800px"></a> 
           </div> 
           <div class="title">
            Figure 2. build-vs-buy
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>What happens in this case is that end-users — needing some sort of solution for their particular business problem — will end up using unused fields to store the information they need. We end up with no correlation between the fields definitions and the values stored therein, sometimes with the datatypes not even matching. Any business rules pertaining to this extra data have to be enforced manually by the users, rather than by the system. The end result is a system even more complicated to learn and use, with the quality of the data held within it degrading as end users inevitably make mistakes in using it.</p> 
          </div> 
          <div class="paragraph"> 
           <p>There are other benefits too for building rather than buying. Packaged software is almost always sold with a support package, the cover of which can vary enormously. At one end of the spectrum the support package ("bronze", say) will amount to little more than the ability to raise bug reports and to receive maintenance patches. At the other end ("platinum"?), the support package might provide the ability to influence the direction of the development of the product, perhaps specific features missing by the business.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Even so, the more widely used is the software package, the less chance of getting it changed. Does anyone reading this think they could get a new feature added (or removed) from Microsoft Word, for example?</p> 
          </div> 
          <div class="paragraph"> 
           <p>Here’s another reason why you should build, and not buy, the software supporting your core business domain. Although most packaged software is customisable to a degree, there is always a limit to what can be customised. The consequence is that the business is forced to operate according to the way in which the software requires.</p> 
          </div> 
          <div class="paragraph"> 
           <p>This might be something as relatively innocuous as imposing its own terminology onto the business, meaning that the end-users must mentally translate concepts in order to use the software. But it might impose larger constraints on the business; some packaged software (we carefully mention no names) is quite notorious for this</p> 
          </div> 
          <div class="paragraph"> 
           <p>If your business is using the same software as your competitor, then obviously there’s no competitive advantage to be gained. And if your competitor has well-crafted custom software, then your business will be at a competitive <em>dis</em>advantage.</p> 
          </div> 
          <div class="paragraph"> 
           <p>So, our philosophy is that custom software — for your core business domain — is the way to go. Let’s now look more closely at the types of custom applications you can consider building with the framework.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_core-concepts_principles_for-the-long-term">2.2.2. For the long-term</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_principles_for-the-long-term.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_principles_for-the-long-term.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_principles_for-the-long-term.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_principles_for-the-long-term.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_principles_for-the-long-term.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>Enterprise applications tend to stick around a long time; a business' core domains don’t tend to change all that often. What this means in turn is that the application needs to be maintainable, so that it is as easy to modify and extend when it’s 10 years old as when it was first written.</p> 
          </div> 
          <div class="paragraph"> 
           <p>That’s a tall order for any application to meet, and realistically it <em>can</em> only be met if the application is modular. Any application that lacks a coherent internal structure will ultimately degrade into an unmaintable "big ball of mud", and the development team’s velocity/capacity to make changes will reduce accordingly.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Apache Isis' architecture allows the internal structure to be maintained in two distinct ways.</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p>first, the naked objects pattern acts as a "firewall", ensuring that any business logic in the domain layer doesn’t leak out into the presentation layer (it can’t, because the developer doesn’t write any controllers/views).</p> </li> 
            <li> <p>second, the framework’s provides various features (discussed in more detail below) to allow the different modules <em>within</em> the domain layer to interact with each in a decoupled fashion.</p> </li> 
           </ul> 
          </div> 
          <div class="paragraph"> 
           <p>The diagram below illustrates this:</p> 
          </div> 
          <div class="imageblock"> 
           <div class="content"> 
            <a class="image" href="images/core-concepts/philosophy/decoupled-applications.png"><img src="images/core-concepts/philosophy/decoupled-applications.png" alt="decoupled applications" width="800px"></a> 
           </div> 
           <div class="title">
            Figure 3. decoupled applications
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>Here, the presentation layer (<a href="../ugvw/ugvw.html">Wicket UI</a> or <a href="../ugvro/ugvro.html">REST API</a>) is handled by the framework, while the developer focusses on just the domain layer. The framework encourages splitting this functionality into modules; each such module has its counterpart (typically tables within a given RDBMS database schema) within the persistence layer.</p> 
          </div> 
          <div class="paragraph"> 
           <p>This architecture means that it’s impossible for business logic to leach out into the adjacent presentation layer because the developer doesn’t (can’t) write any code for presentation layer. We in effect have a "firewall" between the two layers.</p> 
          </div> 
          <div class="paragraph"> 
           <p>To support the business domain being split into separate modules, the framework provides various features, the most important of which are:</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p>dependency injection of services<br></p> 
             <div class="paragraph"> 
              <p>Both <a href="../rgsvc/rgsvc.html">framework-defined domain services</a> and application-defined services (eg repositories and factories) are injected everywhere, using the regular <a href="../rgant/rgant.html#_rgant-Inject"><code>@javax.inject.Inject</code></a> annotation.</p> 
             </div> </li> 
            <li> <p>mixins allow functionality defined in one module to appear (in the UI) to be provided by some other module.<br></p> 
             <div class="paragraph"> 
              <p>For example, a <em>Document</em> module might allow <code>Document</code> objects to be attached to any arbitrary domain object (such as <code>Order</code> or <code>Customer</code>) in other modules. A mixin would allow the UI for a <code>Customer</code> to also display these attached <code>Document</code>s, even though the <em>Customer</em> module would have no knowledge of/dependency on the <em>Workflow</em> module.</p> 
             </div> </li> 
            <li> <p>internal event bus allows modules to influence other modules.<br></p> 
             <div class="paragraph"> 
              <p>A good example is supporting what (in an RDBMS we would call) referential integrity. Suppose the <em>Customer</em> module has a <code>Customer</code> object and a <code>EmailAddress</code> object, with a customer having a collection of email addresses. A <em>Communications</em> module might then use those email addresses to create <code>EmailCommunication</code>s.<br> <br> If the <em>Customer</em> module wants to delete an <code>EmailAddress</code> then the <em>Communications</em> module will probably want to veto this because they are "in use" by those <code>EmailCommunication</code>s. Or, it might conceivably perform a cascade delete of all associated communications. Either way, the <em>Communications</em> module receives an internal event representing the intention to delete the <code>EmailAddress</code>. It can then act accordingly, either vetoing the interaction or performing the cascade delete. The <em>Customer</em> module for its part does not know anything about this other module.</p> 
             </div> </li> 
           </ul> 
          </div> 
          <div class="paragraph"> 
           <p>For those cases where a module needs to interact with other modules but does not know about their implementations, the module can either define its own <a href="https://en.wikipedia.org/wiki/Service_provider_interface">SPI</a> domain services or it can define custom domain events and fire them. This technique is also used extensively by the framework itself. For example, the <a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-spi_AuditerService"><code>AuditerService</code></a> SPI enables custom auditing, and the <a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-spi_PublisherService"><code>PublisherService</code></a> SPI enables custom publishing</p> 
          </div> 
          <div class="paragraph"> 
           <p>When building a modular application, it’s important to consider the logical layering of the modules: we don’t need every module to be completely decoupled from every other. The most important requirement is that there are no cyclic dependencies, because otherwise we run the risk of the application degrading into a <a href="https://en.wikipedia.org/wiki/Big_ball_of_mud">"big ball of mud"</a>. OO design techniques such as the <a href="https://en.wikipedia.org/wiki/Dependency_inversion_principle">dependency inversion principle</a> can be used to any such</p> 
          </div> 
          <div class="admonitionblock tip"> 
           <table> 
            <tbody>
             <tr> 
              <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
              <td class="content"> 
               <div class="paragraph"> 
                <p>For further discussion on modular monolith’s, check out Dan Haywood’s <a href="https://www.infoq.com/articles/monolith-defense-part-1">pair</a> of <a href="https://www.infoq.com/articles/monolith-defense-part-2">articles</a> on InfoQ.</p> 
               </div> </td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_core-concepts_apache-isis-vs">2.3. Apache Isis vs …​</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>Many other frameworks promise rapid application development and provide automatically generated user interfaces, so how do they compare to Apache Isis?</p> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_core-concepts_apache-isis-vs_mvc-server-side">2.3.1. vs MVC server-side</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs_mvc-server-side.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs_mvc-server-side.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs_mvc-server-side.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs_mvc-server-side.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs_mvc-server-side.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>Some of most commonly used frameworks today are <a href="http://www.spring.io/">Spring MVC</a>, <a href="http://rubyonrails.org/">Ruby on Rails</a> and <a href="http://www.grails.org">Grails</a>, all of which implement one flavour or another of the server-side MVC pattern. The MVC 1.0 specification (originally scheduled for JavaEE 8 though since removed) is also similar.</p> 
          </div> 
          <div class="paragraph"> 
           <p>These frameworks all use the classic <strong>model-view-controller</strong> ( <em>MVC</em>) pattern for web applications, with scaffolding, code-generation, and/or metaprogramming tools for the controllers and views, as well as convention over configuration to define how these components interact. The views provided out of the box by these frameworks tend to be simple <em>CRUD</em>-style interfaces. More sophisticated behavior is accomplished by customizing the generated controllers.</p> 
          </div> 
          <div class="paragraph"> 
           <p>The most obvious difference when developing an Apache Isis application is its deliberate lack of an explicit controller layer; non- <em>CRUD</em> behavior is automatically made available in its generic object-oriented _UI_s. More sophisticated UIs can be built either by <a href="../ugvw/ugvw.html#_ugvw_extending">extending Apache Isis' Wicket viewer</a> or by writing a bespoke UI leveraging the REST (hypermedia) API automatically exposed by <a href="../ugvro/ugvro.html">Isis' Restful Objects viewer</a>. Other frameworks can also be used to implement REST APIs, of course, but generally they require a significant amount of development to get anywhere near the level of sophistication provided automatically by Apache Isis' REST API.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Although these frameworks all provide their own ecosystems of extensions, Apache Isis' equivalent <a href="http://platform.incode.org" target="_blank">Incode Platform</a> modules (non-ASF) tend to work at a higher-level of abstraction. For example, each of these frameworks will integrate with various security mechanism, but the (non-ASF) <a href="http://platform.incode.org" target="_blank">Incode Platform</a>'s security module provides a full subdomain of users, roles, features and permissions that can be plugged into any Isis application. Similarly, the <a href="http://platform.incode.org" target="_blank">Incode Platform</a>'s command and audit modules in combination provide a support for auditing and traceability that can also be used for out of the box profiling. Again, these addons can be plugged into any Isis app.</p> 
          </div> 
          <div class="paragraph"> 
           <p>In terms of testing support, each of these other frameworks provide mechanisms to allow the webapp to be tested from within a JUnit test harness. Apache Isis' support is similar. Where Apache Isis differs though is that it enables end-to-end testing without the need for slow and fragile Selenium tests. Instead, Apache Isis provides a "<a href="../ugtst/ugtst.html#_ugtst_integ-test-support_wrapper-factory">WrapperFactory</a>" domain service that allows the generic UI provided to in essence be simulated. On a more pragmatic level, the <a href="http://platform.incode.org" target="_blank">Incode Platform</a>'s fakedata module does "what it says on the tin", allowing both unit- and integration-tests to focus on the salient data and fake out the rest.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_core-concepts_apache-isis-vs_cqrs">2.3.2. vs CQRS</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs_cqrs.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs_cqrs.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs_cqrs.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs_cqrs.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs_cqrs.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>The CQRS architectural pattern (it stands for "Command Query Responsbility Separation") is the idea that the domain objects that mutate the state of the system - to which commands are sent and which then execute - should be separated from the mechanism by which the state of the system is queried (rendered). The former are sometimes called the "write (domain) model", the latter the "read model".</p> 
          </div> 
          <div class="paragraph"> 
           <p>In the canonical version of this pattern there are separate datastores. The commands act upon a command/write datastore. The data in this datastore is then replicated in some way to the query/read datastore, usually denormalized or otherwise such that it is easy to query.</p> 
          </div> 
          <div class="paragraph"> 
           <p>CQRS advocates recommend using very simple (almost naive) technology for the query/read model; it should be a simple projection of the query datastore. Complexity instead lives elsewhere: business logic in the command/write model, and in the transformation logic betweeen the command/write and read/query datastores. In particular, there is no requirement for the two datastores to use the same technology: one might be an RDBMS while the other a NoSQL datastore or even datawarehouse.</p> 
          </div> 
          <div class="paragraph"> 
           <p>In most implementations the command and query datastores are <em>not</em> updated in the same transaction; instead there is some sort of replication mechanism. This also means that the query datastore is eventually consistent rather than always consistent; there could be a lag of a few seconds before it is updated. This means in turn that CQRS implementations require mechanisms to cater for offline query datastores; usually some sort of event bus.</p> 
          </div> 
          <div class="paragraph"> 
           <p>The CQRS architecture’s extreme separation of responsibilities can result in a lot of boilerplate. Any given domain concept, eg <code>Customer</code>, must be represented both in the command/write model and also in the query/read model. Each business operation upon the command model is reified as a command object, for example <code>PlaceOrderCommand</code>.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Comparing CQRS to Apache Isis, the most obvious difference is that Apache Isis does not separate out a command/write model from a query/read model, and there is usually just a single datastore. But then again, having a separate read model just so that the querying is very straightforward is pointless with Apache Isis because, of course, Isis provides the UI "for free".</p> 
          </div> 
          <div class="paragraph"> 
           <p>There are other reasons though why a separate read model might make sense, such as to precompute particular queries, or against denormalized data. In these cases Apache Isis can often provide a reasonable alternative, namely to map domain entities against RDBMS views, either materialized views or dynamic. In such cases there is still only a single physical datastore, and so transactional integrity is retained.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Or, the CQRS architecture can be more fully implemented with Apache Isis by introducing a separate read model, synchronized using the <a href="../rgsvc/rgsvc.html#_rgsvc_api_PublishingService"><code>PublishingService</code></a>, or using <a href="../rgcms/rgcms.html#_rgcms_classes_super_AbstractSubscriber">subscribers</a> on the <a href="../rgsvc/rgsvc.html#_rgsvc_core-domain-api_EventBusService"><code>EventBusService</code></a>. One can then use <a href="../ugfun/ugfun.html#_ugfun_building-blocks_types-of-domain-objects_view-models">view models</a> to surface the data in the external read datastore.</p> 
          </div> 
          <div class="paragraph"> 
           <p>With respect to commands, Apache Isis does of course support the <a href="../rgsvc/rgsvc.html#_rgsvc_application-layer-spi_CommandService"><code>CommandService</code></a> which allows each business action to be reified into a <code>Command</code>. However, names are misleading here: Apache Isis' commands are relatively passive, merely recording the intent of the user to invoke some operation. In a CQRS architecture, though, commands take a more active role, locating and acting upon the domain objects. More significantly, in CQRS each command has its own class, such as <code>PlaceOrderCommand</code>, instantiated by the client and then executed. With Apache Isis, though, the end-user merely invokes the <code>placeOrder(…​)</code> action upon the domain object; the framework itself creates the <code>Command</code> as a side-effect of this.</p> 
          </div> 
          <div class="paragraph"> 
           <p>In CQRS the commands correspond to the business logic that mutates the system. Whether this logic is part of the command class (<code>PlaceOrderCommand</code>) or whether that command delegates to methods on the domain object is an implementation detail; but it certainly is common for the business logic to be wholly within the command object and for the domain object to be merely a data holder of the data within the command/write datastore.</p> 
          </div> 
          <div class="paragraph"> 
           <p>In Apache Isis this same separation of business logic from the underlying data can be accomplished most straightforwardly using <a href="../ugfun/ugfun.html#_ugfun_building-blocks_types-of-domain-objects_mixins">mixins</a> or <a href="../ugfun/ugfun.html#_ugfun_how-tos_contributed-members">contributions</a>. In the UI (surfaced by the <a href="../ugvw/ugvw.html">Wicket viewer</a>) or in the REST API (surfaced by the <a href="../ugvro/ugvro.html">RestfulObjects viewer</a>) the behaviour appears to reside on the domain object; however the behaviour actually resides on separate classes and is mixed in (like a trait) only at runtime.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_core-concepts_apache-isis-vs_event-sourcing">2.3.3. vs Event Sourcing</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs_event-sourcing.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs_event-sourcing.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs_event-sourcing.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs_event-sourcing.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs_event-sourcing.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>The <a href="#">CQRS architecture</a> (discussed above) is often combined with <em>Event Sourcing</em> pattern, though they are separate ideas.</p> 
          </div> 
          <div class="paragraph"> 
           <p>With event sourcing, each business operation emits a domain event (or possibly events) that allow other objects in the system to act accordingly. For example, if a customer places an order then this might emit the <code>OrderPlacedEvent</code>. Most significantly, the subscribers to these events can include the datastore itself; the state of the system is in effect a transaction log of every event that has occurred since "the beginning of time": it is sometimes called an event store. With CQRS, this event datastore corresponds to the command/write datastore (the query/read datastore is of course derived from the command datastore).</p> 
          </div> 
          <div class="paragraph"> 
           <p>Although it might seem counter-intuitive to be able store persistent state in this way (as a souped up "transaction log"), the reality is that with modern compute capabilities make it quite feasible to replay many 10s/100s of thousands of events in a second. And the architecture supports some interesting use cases; for example it becomes quite trivial to rewind the system back to some previous point in time.</p> 
          </div> 
          <div class="paragraph"> 
           <p>When combined with CQRS we see a command that triggers a business operation, and an event that results from it. So, a <code>PlaceOrderCommand</code> command can result in an <code>OrderPlacedEvent</code> event. A subscriber to this event might then generate a further command to act upon some other system (eg to dispatch the system). Note that the event might be dispatched and consumed in-process or alternatively this might occur out-of-process. If the latter, then the subscriber will operate within a separate transaction, meaning the usual eventual consistency concerns and also compensating actions if a rollback is required. CQRS/event sourcing advocates point out — correctly — that this is just how things are in the "real world" too.</p> 
          </div> 
          <div class="paragraph"> 
           <p>In Apache Isis every business action (and indeed, property and collection) emits domain events through the <a href="../rgsvc/rgsvc.html#_rgsvc_core-domain-api_EventBusService"><code>EventBusService</code></a>, and can optionally also be published through the <a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-spi_PublishingService"><code>PublishingService</code></a>. The former are dispatched and consumed in-process and within the same transaction, and for this reason the <a href="../rgcms/rgcms.html#_rgcms_classes_super_AbstractSubscriber">subscribers</a> can also veto the events. The latter are intended for out-of-process consumption; the (obsolete) <a href="http://github.com/isisaddons-legacy/isis-module-publishing">Isis addons' publishing</a> and the (non-ASF) <a href="http://platform.incode.org" target="_blank">Incode Platform</a>'s publishmq modules provide implementations for dispatching either through a RDBMS database table, or directly through to an <a href="http://camel.apache.org">ActiveMQ</a> message queue (eg wired up to <a href="http://camel.apache.org">Apache Camel</a> event bus).</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_core-concepts_apache-isis-vs_metawidget">2.3.4. vs MetaWidget</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs_metawidget.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs_metawidget.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs_metawidget.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs_metawidget.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_apache-isis-vs_metawidget.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>MetaWidget (mentioned <a href="../ugfun/ugfun.html#_ugfun_core-concepts_philosophy_naked-objects-pattern_object-interface-mapping">earlier</a> has a number of ideas in common with Apache Isis, specifically the runtime generation of a UI for domain objects. And like Apache Isis, MetaWidget builds its own metamodel of the domain objects and uses this to render the object.</p> 
          </div> 
          <div class="paragraph"> 
           <p>However, there is a difference in philosophy in that MW is not a full-stack framework and does not (in their words) try to "own the UI". Rather they support a huge variety of UI technologies and allow the domain object to be rendered in any of them.</p> 
          </div> 
          <div class="paragraph"> 
           <p>In contrast, Apache Isis is full-stack and does generate a complete UI; we then allow you to customize or extend this UI (as per the various (non-ASF) <a href="http://platform.incode.org" target="_blank">Incode Platform</a> modules), and we also provide a full REST API through the <a href="../ugvro/ugvro.html">Restful Objects viewer</a></p> 
          </div> 
          <div class="paragraph"> 
           <p>Also, it’s worth noting that MetaWidget does have an elegant pipeline architecture, with APIs to allow even its metamodel to be replaced. It would be feasible and probably quite straightforward to use Apache Isis' own metamodel as an implementation of the MetaWidget API. This would allow MetaWidget to be able to render an Apache Isis domain application.</p> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_core-concepts_deployment-options">2.4. Deployment Options</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_deployment-options.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_deployment-options.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_deployment-options.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_deployment-options.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_core-concepts_deployment-options.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>Apache Isis is a mature platform suitable for production deployment, with its "sweet spot" being line-of-business enterprise applications. So if you’re looking to develop that sort of application, we certainly hope you’ll seriously evaluate it.</p> 
         </div> 
         <div class="paragraph"> 
          <p>But there are other ways that you can make Apache Isis work for you; in this section we explore a few of them.</p> 
         </div> 
         <div class="sect3"> 
          <h4 id="_deploy_to_production">2.4.1. Deploy to production</h4> 
          <div class="paragraph"> 
           <p>Let’s start though with the default use case for Apache Isis: building line-of-business enterprise applications, on top of its Wicket viewer.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Apache Wicket, and therefore Apache Isis in this configuration, is a stateful architecture. As a platform it is certainly capable of supporting user bases of several thousand (with perhaps one or two hundred concurrent); however it isn’t an architecture that you should try to scale up to tens of thousands of concurrent users.</p> 
          </div> 
          <div class="paragraph"> 
           <p>The UI generated by the Wicket viewer is well suited to many line-of-business apps, but it’s also worth knowing that (with a little knowledge of the Wicket APIs) it relatively straightforward to extend. As described in <a href="../ugfun/ugfun.html#_ugfun_available-domain-services_isis-addons">Isis addons</a> chapter, the viewer already has integrations with the (non-ASF) <a href="http://platform.incode.org" target="_blank">Incode Platform</a>'s gmap3, fullcalendar2 and excel Wicket components. We are also aware of integrations with SVG images (for floor maps of shopping center) and of custom widgets displaying a catalogue (text and images) of medical diseases.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Deploying on Apache Isis means that the framework also manages object persistence. For many line-of-business applications this will mean using a relational database. It is also possible (courtesy of its integratinon with <a href="http://www.datanucleus.org">DataNucleus</a>) to deploy an Isis app to a NoSQL store such as Neo4J or MongoDB; and it is also possible to deploy to cloud platforms such as <a href="https://cloud.google.com/appengine/docs">Google App Engine (GAE)</a>.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_prototyping">2.4.2. Prototyping</h4> 
          <div class="paragraph"> 
           <p>Even if you don’t intend to deploy your application on top of Apache Isis, there can be a lot of value in using Apache Isis for prototyping. Because all you need do to get an app running is write domain objects, you can very quickly explore a domain object model and validate ideas with a domain expert.</p> 
          </div> 
          <div class="paragraph"> 
           <p>By focusing just on the domain, you’ll also find that you start to develop a ubiquitous language - a set of terms and concepts that the entire team (business and technologists alike) have a shared understanding.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Once you’ve sketched out your domain model, you can then "start-over" using your preferred platform.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_deploy_on_your_own_platform">2.4.3. Deploy on your own platform</h4> 
          <div class="paragraph"> 
           <p>The programming model defined by Apache Isis deliberately minimizes the dependencies on the rest of the framework. In fact, the only hard dependency that the domain model classes have on Apache Isis is through the <code>org.apache.isis.applib</code> classes, mostly to pick up annotations such as <code>@Disabled</code>. So, if you have used Apache Isis for prototyping (discussed above), then note that it’s quite feasible to take your domain model a the basis of your actual development effort; Apache Isis' annotations and programming conventions will help ensure that any subtle semantics you might have captured in your prototyping are not lost.</p> 
          </div> 
          <div class="paragraph"> 
           <p>If you go this route, your deployment platform will of course need to provide similar capabilities to Apache Isis. In particular, you’ll need to figure out a way to inject domain services into domain entities (eg using a JPA listener), and you’ll also need to reimplement any domain services you have used that Apache Isis provides "out-of-the-box" (eg <a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-api_QueryResultsCache"><code>QueryResultsCache</code></a> domain service).</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_deploy_the_rest_api">2.4.4. Deploy the REST API</h4> 
          <div class="paragraph"> 
           <p>REST (Representation State Transfer) is an architectural style for building highly scalable distributed systems, using the same principles as the World Wide Web. Many commercial web APIs (twitter, facebook, Amazon) are implemented as either pure REST APIs or some approximation therein.</p> 
          </div> 
          <div class="paragraph"> 
           <p>The <a href="http://restfulobjects.org">Restful Objects specification</a> defines a means by a domain object model can be exposed as RESTful resources using JSON representations over HTTP. Apache Isis' <a href="../ugvro/ugvro.html">RestfulObjects viewer</a> is an implementation of that spec, making any Apache Isis domain object automatically available via REST.</p> 
          </div> 
          <div class="paragraph"> 
           <p>There are a number of use cases for deploying Isis as a REST API, including:</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p>to allow a custom UI to be built against the RESTful API<br></p> 
             <div class="paragraph"> 
              <p>For example, using Angular or some other RIA technology such as Flex, JavaFX, Silverlight</p> 
             </div> </li> 
            <li> <p>to enable integration between systems<br></p> 
             <div class="paragraph"> 
              <p>REST is designed to be machine-readable, and so is an excellent choice for synchronous data interchange scenarios.</p> 
             </div> </li> 
            <li> <p>as a ready-made API for migrating data from one legacy system to its replacement.</p> </li> 
           </ul> 
          </div> 
          <div class="paragraph"> 
           <p>As for the auto-generated webapps, the framework manages object persistence. It is perfectly possible to deploy the REST API alongside an auto-generated webapp; both work from the same domain object model.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_implement_your_own_viewer">2.4.5. Implement your own viewer</h4> 
          <div class="paragraph"> 
           <p>Isis' architecture was always designed to support multiple viewers; and indeed Apache Isis out-of-the-box supports two: the Wicket viewer, and the Restful Objects viewer (or three, if one includes the Wrapper Factory).</p> 
          </div> 
          <div class="paragraph"> 
           <p>While we mustn’t understate the effort involved here, it is feasible to implement your own viewers too. Indeed, one of Apache Isis' committers does indeed have a (closed source) viewer, based on <a href="http://www.wavemaker.com/">Wavemaker</a>.</p> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_ugfun_building-blocks">3. Building Blocks</h2>
       <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
        <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
        <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
        <ul class="dropdown-menu">
         <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
         <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
         <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
         <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
        </ul>
       </div> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>In this section we run through the main building blocks that make up an Apache Isis application.</p> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_building-blocks_metamodel">3.1. A MetaModel</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_metamodel.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_metamodel.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_metamodel.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_metamodel.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_metamodel.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>At its core, Apache Isis is a metamodel that is built at runtime from the domain classes (eg <code>Customer.java</code>), along with optional supporting metadata (eg <code>Customer.layout.xml</code>).</p> 
         </div> 
         <div class="paragraph"> 
          <p>The contents of this metamodel is inferred from the Java classes discovered on the classpath: the entities and supporting services, as well the members of those classes. The detail of the metamodel is generally explicit, usually represented by Java annotations such as <code>@Title</code> or <code>@Action</code>. Notably the metamodel is <a href="../ugbtb/ugbtb.html#_ugbtb_programming-model">extensible</a>; it is possible to teach Apache Isis new programming conventions/rules (and conversely to remove those that are built in).</p> 
         </div> 
         <div class="paragraph"> 
          <p>Most of the annotations recognized by the framework are defined by the Apache Isis framework itself. For example the <code>@Title</code> annotation — which identifies how the framework should derive a human-readable label for each rendered domain object — is part of the <code>org.apache.isis.applib.annotations</code> package. However the framework also recognizes certain other JEE annotations such as <code>@javax.inject.Inject</code> (used for dependency injection).</p> 
         </div> 
         <div class="paragraph"> 
          <p>The framework uses DataNucleus for its persistence mechanism. This is an ORM that implements the JDO and JPA APIs, and which can map domain objects either to an RDBMS or to various NoSQL objectstores such as MongoDB or Neo4J. Apache Isis recognizes a number of the JDO annotations such as <code>@javax.jdo.annotations.Column(allowsNull=…​)</code>.</p> 
         </div> 
         <div class="paragraph"> 
          <p>In addition, the framework builds up the metamodel for each domain object using <a href="../ugvw/ugvw.html#_ugvw_layout">layout hints</a>, such as <code>Customer.layout.xml</code>. These provide metadata such as grouping elements of the UI together, using multi-column layouts, and so on. The layout file can be modified while the application is still running, and are picked up automatically; a useful way to speed up feedback.</p> 
         </div> 
         <div class="admonitionblock tip"> 
          <table> 
           <tbody>
            <tr> 
             <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
             <td class="content"> 
              <div class="paragraph"> 
               <p>At the time of writing Apache Isis only recognizes and supports the JDO API, though we expect JPA to be supported in the future.</p> 
              </div> </td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_building-blocks_types-of-domain-objects">3.2. Type of Domain Objects</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>Apache Isis supports recognises four main types of domain classes:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p><strong>domain entities</strong> - domain objects persisted to the database using JDO/DataNucleus; for example <code>Customer</code></p> </li> 
           <li> <p><strong>domain services</strong> - generally singletons, automatically injected, and providing various functionality; for example <code>CustomerRepository</code></p> </li> 
           <li> <p><strong>view models</strong> - domain objects that are a projection of some state held by the database, in support a particular use case; for example <code>CustomerDashboard</code> (to pull together commonly accessed information about a customer).</p> </li> 
           <li> <p><strong>mixins</strong> - allow functionality to be "contributed" in the UI by one module to another object, similar to traits or extension methods provided in some programming languages. This is an important capability to help keep large applications <a href="../ugbtb/ugbtb.html#_ugbtb_decoupling">decoupled</a>.</p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>From the end-user’s perspective the UI displays a single domain object instance that has state (that is, a domain entity or a view model) per page. The end-user can then inspect and modify its state, and navigate to related objects.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Domain classes are generally recognized using annotations. Apache Isis defines its own set of annotations, while entities are annotated using JDO/DataNucleus (though XML can also be used if required). Apache Isis recognizes some of the JDO and JAXB annotations and infers domain semantics from these annotations. Similarly, JAXB annotations are typically used for view models. There is a smattering of other Java/JEE annotations that are also supported, such as <code>@javax.inject.Inject</code> and <code>@javax.annotation.Nullable</code>.</p> 
         </div> 
         <div class="paragraph"> 
          <p>The following subsections explain this in further detail.</p> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_building-blocks_types-of-domain-objects_domain-entities">3.2.1. Domain Entities</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects_domain-entities.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects_domain-entities.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects_domain-entities.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects_domain-entities.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects_domain-entities.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>Most domain objects that the end-user interacts with are <em>domain entities</em>, such as <code>Customer</code>, <code>Order</code>, <code>Product</code> and so on. These are persistent objects and which are mapped to a database (usually relational), using JDO/DataNucleus annotations.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Some domain entities are really aggregates, a combination of multiple objects. A commonly cited example of this is an <code>Order</code>, which really consists of both a root <code>Order</code> entity and a collection of <code>OrderItem</code>s. From the end-users' perspective, when they talk of "order" they almost always mean the aggregate rather than just the <code>Order</code> root entity.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Eric Evans' <a href="http://books.google.com/books/about/Domain_Driven_Design.html?id=hHBf4YxMnWMC">Domain Driven Design</a> has a lot to say about aggregate roots and their responsibilities: in particular that it is the responsibility of the aggregate root to maintain the invariants of its component pieces, and that roots may only reference other roots. There’s good logic here: requiring only root-to-root relationships reduces the number of moving parts that the developer has to think about.</p> 
          </div> 
          <div class="paragraph"> 
           <p>On the other hand, this constraint can substantially complicate matters when mapping domain layer to the persistenec layer. DDD tends to de-emphasise such matters: it aims to be completely agnostic about the persistence layer, with the responsibilities for managing relationships moved (pretty much by definition) into the domain layer.</p> 
          </div> 
          <div class="paragraph"> 
           <p>As a framework though Apache Isis is less dogmatic about such things. Generally the domain objects are mapped to a relational database and so we can lean on the referential integrity capabilities of the persistence layer to maintain referential invariants. Said another way: we don’t tend to require that only roots can maintain roots: we don’t see anything wrong in an <code>InvoiceItem</code> referencing an <code>OrderItem</code>, for example.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Nonetheless the concepts of "aggregate" and "aggregate root" are worth holding onto. You’ll likely find that you’ll define a repository service (discussed in more detail below) for each aggregate root: for example <code>Order</code> will have a corresponding <code>OrderRepository</code> service. Similarly, you may also have a factory service, for example <code>OrderFactory</code>. However, you are less likely to have a repository service for the parts of an aggregate root: the role of retrieving <code>OrderItem</code>s should fall to the <code>Order</code> (typically by way of lazy loading of an "items" collection) rather than through an <code>OrderItemRepository</code> service. Again, this isn’t a hard-n-fast rule, but a good rule of thumb.</p> 
          </div> 
          <div class="admonitionblock tip"> 
           <table> 
            <tbody>
             <tr> 
              <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
              <td class="content"> 
               <div class="paragraph"> 
                <p>Details on how to actually write a domain entity (the programming model for domain entities) is <a href="../ugfun/ugfun.html#_ugfun_programming-model_domain-entities">here</a>.</p> 
               </div> </td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_building-blocks_types-of-domain-objects_domain-services">3.2.2. Domain Services</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects_domain-services.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects_domain-services.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects_domain-services.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects_domain-services.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects_domain-services.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p><em>Domain services</em> are (usually) singleton stateless services that provide additional functionality. Domain services consist of a set of logically grouped actions, and as such follow the same conventions as for entities. However, a service cannot have (persisted) properties, nor can it have (persisted) collections.</p> 
          </div> 
          <div class="paragraph"> 
           <p>A very common type of domain service is a repository, that is used to look up existing instances of a domain entity. For example, for the <code>Customer</code> entity there may be a <code>CustomerRepository</code>, while for <code>Order</code> entity there may be an <code>OrderRepository</code>.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Similarly, entities might also have a corresponding factory service: a <code>CustomerFactory</code> or an <code>OrderFactory</code>; Evans' <a href="http://books.google.com/books/about/Domain_Driven_Design.html?id=hHBf4YxMnWMC">Domain Driven Design</a>, draws a clear distinction between a factory (that creates object) and a repository (that is used to find existing objects).</p> 
          </div> 
          <div class="paragraph"> 
           <p>On the other hand, from an end-users' perspective the act of finding an existing object vs creating a new one are quite closely related. For this reason, in Apache Isis it’s therefore quite common to have a single domain service that acts as both a factory and a repository (and is usually called just a "repository").</p> 
          </div> 
          <div class="paragraph"> 
           <p>The behaviour of these services is rendered in various ways, though the most obvious is as the menu actions on the top-level menu bars in the <a href="../ugvw/ugvw.html">Wicket viewer</a>'s UI.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Domain services can also be used for a number of other purposes:</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p>to provide additional non-UI functionality; an example being to perform an address geocoding lookup against the google-maps API, or to perform some calculation, or attach a barcode, send an email etc</p> </li> 
            <li> <p>to act as a subscribers to the event bus, potentially influencing events fired by some other module (a key technique for decoupling large applications)<br></p> 
             <div class="paragraph"> 
              <p>This is discussed in more detail below, in the section on <a href="../ugfun/ugfun.html#_ugfun_building-blocks_events">events</a>.</p> 
             </div> </li> 
            <li> <p>to implement an <a href="https://en.wikipedia.org/wiki/Service_provider_interface">SPI</a> of the Apache Isis framework, most notably cross-cutting concerns such as security, command profiling, auditing and publishing.</p> </li> 
            <li> <p>to contribute behaviour or (derived) state to entities/view models.<br></p> 
             <div class="admonitionblock note"> 
              <table> 
               <tbody>
                <tr> 
                 <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
                 <td class="content"> 
                  <div class="paragraph"> 
                   <p>Mixins can do everything that contributed services can, and have a cleaner programming model. As such, contributed services should be considered a deprecated feature; it may be removed in a future release.</p> 
                  </div> </td> 
                </tr> 
               </tbody>
              </table> 
             </div> </li> 
           </ul> 
          </div> 
          <div class="paragraph"> 
           <p>Domain objects of any type (entities, other services, view models, mixins) can also delegate to domain services; domain services are automatically injected into every other domain object. This injection of domain services into entities is significant: it allows business logic to be implemented in the domain entities, rather than have it "leach away" into supporting service layers. Said another way: it is the means by which Apache Isis helps you avoid the anaemic domain model anti-pattern.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Domain services are instantiated once and once only by the framework, and are used to centralize any domain logic that does not logically belong in a domain entity or value.</p> 
          </div> 
          <div class="admonitionblock tip"> 
           <table> 
            <tbody>
             <tr> 
              <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
              <td class="content"> 
               <div class="paragraph"> 
                <p>Details on how to actually write a domain service (the programming model for domain services) is <a href="../ugfun/ugfun.html#_ugfun_programming-model_domain-services">here</a>.</p> 
               </div> </td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="sect4"> 
           <h5 id="_hexagonal_arch_services">Hexagonal Arch. + services</h5> 
           <div class="paragraph"> 
            <p>It’s worth extending the <a href="../ugfun/ugfun.html#_ugfun_core-concepts_philosophy_hexagonal-architecture">Hexagonal Architecture</a> to show where domain services fit in:</p> 
           </div> 
           <div class="imageblock"> 
            <div class="content"> 
             <img src="images/core-concepts/philosophy/hexagonal-architecture-addons.png" alt="hexagonal architecture addons" width="700px"> 
            </div> 
            <div class="title">
             Figure 4. The hexagonal architecture with Isis addons
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>The (non-ASF) <a href="http://platform.incode.org" target="_blank">Incode Platform</a> provide SPI implementations of the common cross-cutting concerns. They also provide a number of APIs for domain objects to invoke (not shown in the diagram). You can also write your own domain services as well, for example to interface with some external CMS system, say.</p> 
           </div> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_building-blocks_types-of-domain-objects_view-models">3.2.3. View Models</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects_view-models.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects_view-models.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects_view-models.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects_view-models.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects_view-models.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>View models are similar to entities in that (unlike domain services) there can be many instances of any given type. End users interact with view models in the same way as a domain entity, indeed they are unlikely to distinguish one from the other.</p> 
          </div> 
          <div class="paragraph"> 
           <p>However, whereas domain entities are mapped to a datastore, view models are not. Instead they are recreated dynamically by serializing their state, ultimately into the URL itself (meaning their state it is in effect implicitly managed by the client browser). You will notice that the URL for view models (as shown in <a href="../ugvw/ugvw.html">Wicket viewer</a> or <a href="../ugvro/ugvro.html">RestfulObjects viewer</a>) tends to be quite long.</p> 
          </div> 
          <div class="paragraph"> 
           <p>This capability opens up a number of more advanced use cases:</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p>In the same way that an (RDBMS) database view can aggregate and abstract from multiple underlying database tables, a view model sits on top of one or many underlying entities.</p> </li> 
            <li> <p>A view model could also be used as a proxy for some externally managed entity, accessed over a web service or REST API; it could even be a representation of state held in-memory (such as user preferences, for example).</p> </li> 
            <li> <p>view models can also be used to support a particular use case. An example that comes to mind is to expose a list of scanned PDFs to be processed as an "intray", showing the list of PDFs on one side of the page, and the current PDF being viewed on the other. Such view models are part of the application layer, not part of the domain layer (where entities live).</p> </li> 
           </ul> 
          </div> 
          <div class="paragraph"> 
           <p>We explore these use cases in more detail below.</p> 
          </div> 
          <div class="admonitionblock tip"> 
           <table> 
            <tbody>
             <tr> 
              <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
              <td class="content"> 
               <div class="paragraph"> 
                <p>Details on how to actually write a view model (the programming model for view models) is <a href="../ugfun/ugfun.html#_ugfun_programming-model_view-models">here</a>.</p> 
               </div> </td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="sect4"> 
           <h5 id="__ugfun_building-blocks_view-models_externally-managed-entities">Externally-managed entities</h5> 
           <div class="paragraph"> 
            <p>Sometimes the entities that make up your application are persisted not in the local JDO/DataNucleus database but reside in some other system, for example accessible only through a SOAP web service. Logically that data might still be considered a domain entity and we might want to associate behaviour with it, however it cannot be modelled as a domain entity if only because JDO/DataNucleus doesn’t know about the entity nor how to retrieve or update it.</p> 
           </div> 
           <div class="paragraph"> 
            <p>There are a couple of ways around this: we could either replicate the data somehow from the external system into the Isis-managed database (in which case it is once again just another domain entity), or we could set up a stub/proxy for the externally managed entity. This proxy would hold the reference to the externally-managed domain entity (eg an external id), as well as the "smarts" to know how to interact with that entity (by making SOAP web service calls etc).</p> 
           </div> 
           <div class="paragraph"> 
            <p>The stub/proxy is a type of view model: a view — if you like — onto the domain entity managed by the external system.</p> 
           </div> 
           <div class="admonitionblock note"> 
            <table> 
             <tbody>
              <tr> 
               <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
               <td class="content"> 
                <div class="paragraph"> 
                 <p>DataNucleus does in fact define its own <a href="http://www.datanucleus.org/documentation/extensions/store_manager.html">Store Manager</a> extension point, so an alternative architecture would be to implement this interface such that DataNucleus could make the calls to the external system; these externally-persisted domain entities would therefore be modelled as regular <code>@PersistenceCapable</code> entities after all. For entities not persisted externally the implementation would delegate down to the default RDBMS-specific <code>StoreManager</code> provided by DataNucleus itself.</p> 
                </div> 
                <div class="paragraph"> 
                 <p>An implementation that supported only reading from an external entity ought to be comparatively straight-forward, but implementing one that also supported updating external entities would need to carefully consider error conditions if the external system is unavailable; distributed transactions are most likely difficult/impossible to implement (and not desirable in any case).</p> 
                </div> </td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="__ugfun_building-blocks_view-models_in-memory-entities">In-memory entities</h5> 
           <div class="paragraph"> 
            <p>As a variation on the above, sometimes there are domain objects that are, conceptually at least entities, but whose state is not actually persisted anywhere, merely held in-memory (eg in a hash).</p> 
           </div> 
           <div class="paragraph"> 
            <p>A simple example might be read-only configuration data that is read from a config file (eg log4j appender definitions) but thereafter is presented in the UI just like any other entity.</p> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="__ugfun_building-blocks_view-models_application-layer-view-models">Application-layer view models</h5> 
           <div class="paragraph"> 
            <p>Domain entities (whether locally persisted using JDO/DataNucleus or managed externally) are the bread-and-butter of Apache Isis applications: the focus after all, should be on the business domain concepts and ensuring that they are solid. Generally those domain entities will make sense to the business domain experts: they form the <em>ubiquitous language</em> of the domain. These domain entities are part of the domain layer.</p> 
           </div> 
           <div class="paragraph"> 
            <p>That said, it may not always be practical to expect end-users of the application to interact solely with those domain entities. For example, it may be useful to show a dashboard of the most significant data in the system to a user, often pulling in and aggregating information from multiple points of the app. Obtaining this information by hand (by querying the respective services/repositories) would be tedious and slow; far better to have a dashboard do the job for the end user.</p> 
           </div> 
           <div class="paragraph"> 
            <p>A dashboard object is a model of the most relevant state to the end-user, in other words it is (quite literally) a view model. It is not a persisted entity, instead it belongs to the application layer.</p> 
           </div> 
           <div class="paragraph"> 
            <p>A view model need not merely aggregate data; it could also provide actions of its own. Most likely these actions will be queries and will always ultimately just delegate down to the appropriate domain-layer service/repository. But in some cases such view model actions might also modify state of underlying domain entities.</p> 
           </div> 
           <div class="paragraph"> 
            <p>Another common use for view models is to help co-ordinate complex business processes; for example to perform a quarterly invoicing run, or to upload annual interest rates from an Excel spreadsheet. In these cases the view model might have some state of its own, but in most cases that state does not need to be persisted per se.</p> 
           </div> 
           <div class="sidebarblock"> 
            <div class="content"> 
             <div class="title">
              Desire Lines
             </div> 
             <div class="paragraph"> 
              <p>One way to think of application view models is as modelling the "desire line": the commonly-trod path that end-users must follow to get from point A to point B as quickly as possible.</p> 
             </div> 
             <div class="paragraph"> 
              <p>To explain: there are <a href="http://ask.metafilter.com/62599/Where-the-sidewalk-ends">documented</a> <a href="https://sivers.org/walkways">examples</a> <a href="http://www.softpanorama.org/People/Wall/larry_wall_articles_and_interviews.shtml">that</a> architects of university campus will only add in paths some while after the campus buildings are complete: let the pedestrians figure out the routes they want to take. The name we like best for this idea is "desire lines", though it has also been called a "desire path", "paving the path" or "paving the sidewalk".</p> 
             </div> 
             <div class="paragraph"> 
              <p>What that means is you should add view models <em>after</em> having built up the domain layer, rather than before. These view models pave that commonly-trod path, automating the steps that the end-user would otherwise have to do by hand.</p> 
             </div> 
             <div class="paragraph"> 
              <p>It takes a little practice though, because even when building the domain layer "first", you should still bear in mind what the use cases are that those domain entities are trying to support. You certainly <em>shouldn’t</em> try to build out a domain layer that could support every conceivable use case before starting to think about view models.</p> 
             </div> 
             <div class="paragraph"> 
              <p>Instead, you should iterate. Identify the use case/story/end-user objective that will deliver value to the business. Then build out the minimum domain entities to support that use case (refining the <a href="../ugfun/ugfun.html#__ugfun_core-concepts_philosophy_domain-driven-design_ubiquitous-language">ubiquitous language</a> as you go). Then, identify if there any view models that could be introduced which would simplify the end-user interactions with the system (perhaps automating several related use cases together).</p> 
             </div> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>When developing an Apache Isis application you will most likely start off with the persistent domain entities: <code>Customer</code>, <code>Order</code>, <code>Product</code>, and so on. For some applications this may well suffice.</p> 
           </div> 
           <div class="paragraph"> 
            <p>However, if the application needs to integrate with other systems, or if the application needs to support reasonably complex business processes, then you may need to look beyond just domain entities; view models are the tool of choice.</p> 
           </div> 
           <div class="admonitionblock warning"> 
            <table> 
             <tbody>
              <tr> 
               <td class="icon"> <i class="fa icon-warning" title="Warning"></i> </td> 
               <td class="content"> 
                <div class="paragraph"> 
                 <p>We strongly recommend that you build your applications from the domain layer up, rather than from the view model down.</p> 
                </div> </td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="__ugfun_building-blocks_view-models_dtos">DTOs</h5> 
           <div class="paragraph"> 
            <p>DTOs (data transfer objects) are simple classes that (according to <a href="https://en.wikipedia.org/wiki/Data_transfer_object">wikipedia</a>) "carry data between processes".</p> 
           </div> 
           <div class="paragraph"> 
            <p>If those two processes are parts of the same overall application (the same team builds and deploys both server and client) then there’s generally no need to define a DTO; just access the entities using Apache Isis' <a href="../ugvro/ugvro.html">RestfulObjects viewer</a>.</p> 
           </div> 
           <div class="paragraph"> 
            <p>On the other hand, if the client consuming the DTO is a different application — by which we mean developed/deployed by a different (possible third-party) team — then the DTOs act as a formal contract between the provider and the consumer. In such cases, exposing domain entities over <a href="../ugvro/ugvro.html">RestfulObjects</a> would be "A Bad Thing"™ because the consumer would in effect have access to implementation details that could then not be easily changed by the producer.</p> 
           </div> 
           <div class="paragraph"> 
            <p>To support this use case, a view model can be defined such that it can act as a DTO. This is done by annotating the class using JAXB annotations; this allows the consumer to obtain the DTO in XML format along with a corresponding XSD schema describing the structure of that XML. A discussion of how that might be done using an ESB such as <a href="http://camel.apache.org">Apache Camel™</a> follows <a href="../ugbtb/ugbtb.html#__ugfun_building-blocks_view-models_dtos_consumers">below</a>.</p> 
           </div> 
           <div class="paragraph"> 
            <p>In case it’s not obvious, these DTOs are still usable as "regular" view models; they will render in the <a href="../ugvw/ugvw.html">Wicket viewer</a> just like any other. In fact (as the <a href="../ugfun/ugfun.html#_ugfun_programming-model_view-models_jaxb">programming model</a> section below makes clear), these JAXB-annotated view models are in many regards the most powerful of all the alternative ways of writing view models.</p> 
           </div> 
           <div class="paragraph"> 
            <p>It’s also worth noting that it is also possible to download the XML (or XSD) straight from the UI, useful during development. The view model simply needs to implement the <a href="../rgcms/rgcms.html#_rgcms_classes_mixins_Dto"><code>Dto</code></a> marker interface; the framework has <a href="../rgcms/rgcms.html#_rgcms_classes_mixins_Dto">mixins</a> that contribute the download actions to the view model.</p> 
           </div> 
           <div class="admonitionblock tip"> 
            <table> 
             <tbody>
              <tr> 
               <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
               <td class="content"> 
                <div class="paragraph"> 
                 <p>Details of how to consume such DTOs can be found <a href="../ugfun/ugfun.html#_ugfun_programming-model_view-models_jaxb_dto-consumers">here</a>.</p> 
                </div> </td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="__ugfun_building-blocks_view-models_for-rest-clients">For REST Clients</h5> 
           <div class="paragraph"> 
            <p>The <a href="../ugvro/ugvro.html">Restful Objects</a> viewer automatically provides a REST API for both domain entities. Or, you can use it to only expose view models, taking care to map the state of the domain entity/ies into a view model.</p> 
           </div> 
           <div class="paragraph"> 
            <p>Which beckons the question: when is it safe to safe to expose domain entities directly as REST resources, and when should view models be exposed instead.</p> 
           </div> 
           <div class="paragraph"> 
            <p>If you go searching google you’ll find plenty of discussion on this topic (eg <a href="https://stackoverflow.com/questions/36174516/rest-api-dtos-or-not">here</a> and <a href="https://juristr.com/blog/2012/10/lessions-learned-dont-expose-ef-entities-to-the-client-directly/">here</a>). Almost all of these recommend exposing only DTOs (which is to say view models), not domain entities, in REST APIs.</p> 
           </div> 
           <div class="paragraph"> 
            <p>Not so fast, though: the real question is whether the REST API you are exposing is a public API or an internal private API.</p> 
           </div> 
           <div class="ulist"> 
            <ul> 
             <li> <p>If it’s a public API, which is to say that there are third-party clients out over which you have no control, then view models are the way to go.</p> 
              <div class="paragraph"> 
               <p>In this case view models provide an isolation layer which allow you to modify the structure of the underlying domain entities without breaking this API.</p> 
              </div> </li> 
             <li> <p>If it’s a private API, which is to say that the only clients of the REST API are under your control, then view models are an unnecessary overhead.</p> 
              <div class="paragraph"> 
               <p>In this case, just expose domain entities directly.</p> 
              </div> </li> 
            </ul> 
           </div> 
           <div class="paragraph"> 
            <p>The caveat to the "private API" option is that private APIs have a habit of becoming public APIs. Even if the REST API is only exposed within your organisation’s intranet, other teams may "discover" your REST API and start writing applications that consume it. If that REST API is exposing domain entities, you could easily break those other teams' clients if you refactor.</p> 
           </div> 
           <div class="admonitionblock note"> 
            <table> 
             <tbody>
              <tr> 
               <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
               <td class="content"> 
                <div class="paragraph"> 
                 <p>The <a href="https://projects.spring.io/spring-data-rest/">Spring Data REST</a> subproject has a similar capability of being able to expose domain entities as REST resources. This <a href="https://stackoverflow.com/questions/38874746/is-it-problematic-that-spring-data-rest-exposes-entities-via-rest-resources-with">SO question</a>, which debates the pros-and-cons, is also worth a read.</p> 
                </div> </td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
           <div class="paragraph"> 
            <p>If your REST API is intended to be public (or you can’t be sure that it will remain private), the exposing view models will entail a lot of marshalling of state from domain entities into view models. There are numerous open source tools that can help with that, for example <a href="http://modelmapper.org/">Model Mapper</a>, <a href="http://dozer.sourceforge.net/">Dozer</a> and <a href="https://github.com/orika-mapper/orika">Orika</a>.</p> 
           </div> 
           <div class="paragraph"> 
            <p>Or, rather than marshalling state, the view model could hold a reference to the underlying domain entity/ies and dynamically read from it (ie, all the view model’s properties are derived from the entity’s).</p> 
           </div> 
           <div class="paragraph"> 
            <p>A third option is to define an RDBMS view, and then map a "non-durable" entity to that view. The RDBMS view then becomes the public API that must be preserved. The DataNucleus documents <a href="http://www.datanucleus.org:15080/products/accessplatform_5_1/jdo/mapping.html#schema_rdbms_views">describe</a> how to create non-durable views; a "real-world" example can also be found <a href="https://github.com/estatio/estatio/blob/rel/tag-1.20.20171025-1442/estatioapp/module/lease/dom/src/main/java/org/estatio/dom/lease/invoicing/viewmodel/InvoiceSummaryForInvoiceRun.java#L53">here</a> (in Estatio).</p> 
           </div> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_building-blocks_types-of-domain-objects_mixins">3.2.4. Mixins</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects_mixins.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects_mixins.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects_mixins.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects_mixins.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_types-of-domain-objects_mixins.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>The final type of domain object is the <strong>mixin</strong>. These are similar to traits or extension methods in other programming languages, in that they contribute (or rather, mixin) both behaviour or (derived) state to entities/view models.</p> 
          </div> 
          <div class="paragraph"> 
           <p>A mixin object allows one class to contribute behaviour - actions, (derived) properties and (derived) collections - to another domain object, either a domain entity or view model.</p> 
          </div> 
          <div class="paragraph"> 
           <p>The allows the app to stay decoupled, so that it doesn’t degrade into the proverbial <a href="http://www.laputan.org/mud/mud.html#BigBallOfMud">"big ball of mud"</a>. Mixins allow dependencies to be inverted, so that the dependencies between modules can be kept acyclic and under control.</p> 
          </div> 
          <div class="paragraph"> 
           <p>For example, the contributee (eg <code>Customer</code>, being mixed into) is in one module, while the contributor mixin (<code>DocumentHolder_documents</code>) is in some other module. The <code>customer</code> module knows about the <code>document</code> module, but not vice versa.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Mixins are also a convenient mechanism for grouping functionality even for a concrete type, helping to rationalize about the dependency between the data and the behaviour. Each mixin is in effect a single behavioural "responsibility" of the domain object.</p> 
          </div> 
          <div class="paragraph"> 
           <p>There are also practical reasons for moving behaviour out of entities even within the same module, because structuring your application this way helps support hot-reloading of Java classes (so that you can modify and recompile your application without having to restart it). This can provide substantial productivity gains.</p> 
          </div> 
          <div class="paragraph"> 
           <p>The Hotspot JVM has limited support for hot reloading; generally you can change method implementations but you cannot introduce new methods. However, the <a href="https://dcevm.github.io/">DCEVM</a> open source project will patch the JVM to support much more complete hot reloading support. There are also, of course, commercial products such as JRebel.</p> 
          </div> 
          <div class="paragraph"> 
           <p>The main snag in all this is the DataNucleus enhancer…​ any change to entities is going to require the entity to be re-enhanced, and the JDO metamodel recreated, which invariably breaks things. So hot-reloading of an app whose fundamental structure is changing is likely to remain a no-no.</p> 
          </div> 
          <div class="paragraph"> 
           <p>However, chances are that the structure of your domain objects (the data) will change much less rapidly than the behaviour of those domain objects. Thus, it’s the behaviour that you’re most likely wanting to change while the app is still running. If you move that behaviour out into mixins, then these can be reloaded happily. (And when running in prototype mode), Apache Isis will automatically recreate the portion of the metamodel for any domain object as it is rendered.</p> 
          </div> 
          <div class="admonitionblock tip"> 
           <table> 
            <tbody>
             <tr> 
              <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
              <td class="content"> 
               <div class="paragraph"> 
                <p>Details on how to actually write a mixin (the programming model for mixins) is <a href="../ugfun/ugfun.html#_ugfun_programming-model_mixins">here</a>.</p> 
               </div> </td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="sidebarblock"> 
           <div class="content"> 
            <div class="title">
             DCI Architecture
            </div> 
            <div class="paragraph"> 
             <p>Mixins are an implementation of the <a href="http://www.artima.com/articles/dci_vision.html">DCI architecture</a> architecture, as formulated and described by <a href="https://en.wikipedia.org/wiki/Trygve_Reenskaug">Trygve Reenskaug</a> and <a href="https://en.wikipedia.org/wiki/Jim_Coplien">Jim Coplien</a>. Reenskaug was the inventor of the MVC pattern (and also the external examiner for Richard Pawson’s PhD thesis), while Coplien has a long history in object-orientation, C++ and patterns.</p> 
            </div> 
            <div class="paragraph"> 
             <p>DCI stands for Data-Context-Interaction and is presented as an evolution of object-oriented programming, but one where behaviour is bound to objects dynamically rather than statically in some context or other. The mixin pattern is Apache Isis' straightforward take on the same basic concept.</p> 
            </div> 
            <div class="paragraph"> 
             <p>You might also wish to check out <a href="http://zest.apache.org">Apache Zest</a> (formerly Qi4J), which implements a much more general purpose implementation of the same concepts.</p> 
            </div> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_building-blocks_identifiers">3.3. Identifiers</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_identifiers.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_identifiers.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_identifiers.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_identifiers.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_identifiers.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>The Apache Isis framework actively tracks the identity of each domain object. This identity is represented to the end-user in human-readable form so that they know which object they are interacting with, and is also used and is available internally/for integrations.</p> 
         </div> 
         <div class="paragraph"> 
          <p>This section explores these two related concepts.</p> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_building-blocks_identifiers_title-and-icon">3.3.1. Title and Icon</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_identifiers_title-and-icon.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_identifiers_title-and-icon.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_identifiers_title-and-icon.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_identifiers_title-and-icon.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_identifiers_title-and-icon.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>To allow the end-user to distinguish one domain object from another, it is rendered with a title and an icon. The icon informally identifies the type of the domain object, while the title identifies the instance.</p> 
          </div> 
          <div class="sect4"> 
           <h5 id="_title">Title</h5> 
           <div class="paragraph"> 
            <p>The title of a domain object is shown in several places: as the main heading for an object; as a link text for an object referencing another object, and also in tables representing collections of objects.</p> 
           </div> 
           <div class="paragraph"> 
            <p>The title is not formally required to be a unique identify the object within its type, but it needs to be "unique enough" that a human user is able to distinguish one instance from another.</p> 
           </div> 
           <div class="paragraph"> 
            <p>The title is usually just a simple string, but the framework also allows for the title to be translated into different locales.</p> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="_icon">Icon</h5> 
           <div class="paragraph"> 
            <p>Sometimes it’s helpful for the icon to represent more than just the object’s type; it might also indicate the state of an object. For example, a shipped <code>Order</code> might have a slightly different icon to a yet-to-be-shipped <code>Order</code>; or an overdue <code>Loan</code> might be distinguished separately from a</p> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="_css_class">CSS Class</h5> 
           <div class="paragraph"> 
            <p>In addition to the title and icon, it is also possible for a domain object to provide a CSS class hint. In conjunction with <a href="../ugvw/ugvw.html#_ugvw_customisation_tweaking-css-classes">customized CSS</a> this can be used to apply arbitrary styling; for example each object could be rendered in a page with a different background colour.</p> 
           </div> 
           <div class="admonitionblock tip"> 
            <table> 
             <tbody>
              <tr> 
               <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
               <td class="content"> 
                <div class="paragraph"> 
                 <p>Details on how to actually write titles, icons and CSS classes can be found <a href="../ugfun/ugfun.html#_ugfun_ui-hints_object-titles-and-icons">here</a>.</p> 
                </div> </td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_building-blocks_identifiers_oid">3.3.2. OIDs</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_identifiers_oid.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_identifiers_oid.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_identifiers_oid.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_identifiers_oid.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_identifiers_oid.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>As well as defining a <a href="../ugfun/ugfun.html#__ugfun_building-blocks_metamodel">metamodel</a> of the structure (domain classes) of its domain objects, Apache Isis also manages the runtime instances of said domain objects.</p> 
          </div> 
          <div class="paragraph"> 
           <p>When a domain entity is recreated from the database, the framework keeps track of its identity through an "OID": an object identifier. Fundamentally this is a combination of its type (domain class), along with an identifier. You can think of it as its "primary key", except across all domain entity types.</p> 
          </div> 
          <div class="paragraph"> 
           <p>For portability and resilience, though, the object type is generally an alias for the actual domain class: thus "customers.CUS", say, rather than "com.mycompany.myapp.customers.Customer". This is derived from an annotation. The identifier meanwhile is always converted to a string.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Although simple, the OID is an enormously powerful concept: it represents a URI to any domain object managed by a given Apache Isis application. With it, we have the ability to lookup any arbitrary domain objects.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Some examples:</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p>an OID allows sharing of information between users, eg as a deep link to be pasted into an email.</p> </li> 
            <li> <p>the information within an OID could be converted into a barcode, and stamped onto a PDF form. When the PDF is scanned by the mail room, the barcode could be read to attach the correspondence to the relevant domain object.</p> </li> 
            <li> <p>as a handle to any object in an audit record, as used by <a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-spi_AuditerService"><code>AuditerService</code></a> or <a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-spi_AuditingService"><code>AuditingService</code></a> (the latter deprecated);</p> </li> 
            <li> <p>similarly within implementations of <a href="../rgsvc/rgsvc.html#_rgsvc_application-layer-spi_CommandService"><code>CommandService</code></a> to persist <code>Command</code> objects</p> </li> 
            <li> <p>similarly within implementations of <a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-spi_PublisherService"><code>PublisherService</code></a> to persist published action invocations</p> </li> 
            <li> <p>and of course both the <a href="../ugvro/ugvro.html">RestfulObjects viewer</a> and <a href="../ugvw/ugvw.html">Wicket viewer</a> use the oid tuple to look up, render and allow the user to interact with domain objects.</p> </li> 
           </ul> 
          </div> 
          <div class="paragraph"> 
           <p>Although the exact content of an OID should be considered opaque by domain objects, it is possible for domain objects to obtain OIDs. These are represented as <code>Bookmark`s, obtained from the <a href="../rgsvc/rgsvc.html#_rgsvc_integration-api_BookmarkService">`BookmarkService</a></code>. Deep links meanwhile can be obtained from the <a href="../rgsvc/rgsvc.html#_rgsvc_presentation-api_DeepLinkService"><code>DeepLinkService</code></a>.</p> 
          </div> 
          <div class="paragraph"> 
           <p>OIDs can also be converted into XML format, useful for integration scenarios. The <a href="../rgcms/rgcms.html#_rgcms_schema-common">common schema</a> XSD defines the <code>oidDto</code> complex type for precisely this purpose.</p> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_building-blocks_object-members">3.4. Object Members</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_object-members.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_object-members.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_object-members.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_object-members.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_object-members.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>Every domain object in Apache Isis consists of (at most) three types of members:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p>properties, such as a <code>Customer</code>'s <code>firstName</code></p> </li> 
           <li> <p>collections, such as a <code>Customer</code>'s <code>orders</code> collection of <code>Order</code>s</p> </li> 
           <li> <p>actions, such as a <code>Customer'</code>s <code>placeOrder(…​)</code> method.</p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>Some domain objects — specifically domain services and mixins — only have actions. In the case of contributing services and mixins these actions can (depending upon their semantics and signatures) be represented as derived properties or collections on the entity/view model to which they contribute/mix-in.</p> 
         </div> 
         <div class="sect3"> 
          <h4 id="_properties">3.4.1. Properties</h4> 
          <div class="paragraph"> 
           <p>Properties follow the standard getter/setter pattern, with the return type being a scalar (a value object or another entity or view model).</p> 
          </div> 
          <div class="paragraph"> 
           <p>For example, with:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Customer</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> firstName;
    <span class="directive">public</span> <span class="predefined-type">String</span> getFirstName() { <span class="keyword">return</span> firstName; }
    <span class="directive">public</span> <span class="type">void</span> setFirstName(<span class="predefined-type">String</span> firstName) { <span class="local-variable">this</span>.firstName = firstName; }
    ...
}</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>the framework infers the <code>Customer</code> domain entity, which in turn has a <code>firstName</code> string <em>property</em>.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_collections">3.4.2. Collections</h4> 
          <div class="paragraph"> 
           <p>Collections are also represented by a getter and setter, however the return type is a <code>Collection</code> or subtype.</p> 
          </div> 
          <div class="paragraph"> 
           <p>For example, with:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Customer</span>
    <span class="directive">private</span> <span class="predefined-type">SortedSet</span>&lt;Order&gt; orders = <span class="keyword">new</span> <span class="predefined-type">TreeSet</span>&lt;Order&gt;();
    <span class="directive">public</span> <span class="predefined-type">SortedSet</span>&lt;Order&gt; getOrders() { <span class="keyword">return</span> orders; }
    <span class="directive">public</span> <span class="type">void</span> setOrders(<span class="predefined-type">SortedSet</span>&lt;Order&gt; orders) { <span class="local-variable">this</span>.orders = orders; }
    ...
}</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>the framework infers the <code>orders</code> <em>collection</em>.</p> 
          </div> 
          <div class="admonitionblock tip"> 
           <table> 
            <tbody>
             <tr> 
              <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
              <td class="content"> 
               <div class="paragraph"> 
                <p>The most commonly used collection type is <code>java.util.SortedSet</code>; entities are most commonly mapped to a relational database (ie a datastore with set semantics) and we recommend that all entities define a natural ordering so that when rendered in the UI they will be ordered "meaningfully" to the end-user.</p> 
               </div> </td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_actions">3.4.3. Actions</h4> 
          <div class="paragraph"> 
           <p>The third type of object member is actions. (To a first approximation), actions are all public methods that do not represent properties or collections.</p> 
          </div> 
          <div class="paragraph"> 
           <p>For example:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Customer</span>
    <span class="directive">public</span> Customer placeOrder(Product p, <span class="type">int</span> quantity) { ... }
    ...
}</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>corresponds to the <code>placeOrder</code> <em>action</em>.</p> 
          </div> 
          <div class="admonitionblock note"> 
           <table> 
            <tbody>
             <tr> 
              <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
              <td class="content"> 
               <div class="paragraph"> 
                <p>The above <em>is</em> a simplification; the Apache Isis programming model also recognizes a number of other supporting methods each of which has its own prefix such as <code>hide</code>, <code>disable</code> or <code>validate</code>. These can be considered as "reserved words" in Apache Isis, and do <em>not</em> correspond to actions even though they have public visibility.</p> 
               </div> </td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_building-blocks_events">3.5. Events</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_events.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_events.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_events.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_events.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_events.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>When the framework renders a domain object, and as the end-user interacts with the domain object, the framework it emits multiple events using the intra-process <a href="../rgsvc/rgsvc.html#_rgsvc_core-domain-api_EventBusService">event bus</a>. These events enable other domain services (possibly in other modules) to influence how the domain object is rendered, or to perform side-effects or even veto an action invocation.</p> 
         </div> 
         <div class="admonitionblock tip"> 
          <table> 
           <tbody>
            <tr> 
             <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
             <td class="content"> 
              <div class="paragraph"> 
               <p>It is also possible to simulate the rendering of a domain object by way of the <a href="../rgsvc/rgsvc.html#_rgsvc_application-layer-api_WrapperFactory"><code>WrapperFactory</code></a>. This allows business rules to be enforced for programmatic interactions between objects.</p> 
              </div> </td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
         <div class="paragraph"> 
          <p>To receive the events, the domain service should subscribe to the <a href="../rgsvc/rgsvc.html#_rgsvc_core-domain-api_EventBusService"><code>EventBusService</code></a>, and implement an appropriately annotated method to receive the events.</p> 
         </div> 
         <div class="paragraph"> 
          <p>The framework has several categories of events: domain events, UI events and lifecycle events. These are explored in the sections below.</p> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_building-blocks_events_domain-events">3.5.1. Domain Events</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_events_domain-events.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_events_domain-events.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_events_domain-events.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_events_domain-events.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_events_domain-events.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>Domain events are fired — through the internal <a href="../rgsvc/rgsvc.html#_rgsvc_core-domain-api_EventBusService">event bus</a> — for every user interaction with each object member (property, collection or action).</p> 
          </div> 
          <div class="paragraph"> 
           <p>By default, rendering a property causes a <code>PropertyDomainEvent</code> to be fired, though the <a href="../rgant/rgant.html#_rgant_Property_domainEvent"><code>@Property#domainEvent()</code></a> attribute allows a custom subclass to be specified if necessary. Similarly, rendering a collection causes a <code>CollectionDomainEvent</code> to be fired, and rendering an action causes an <code>ActionDomainEvent</code> to be fired.</p> 
          </div> 
          <div class="paragraph"> 
           <p>In fact, each event can be fired up to five times, with the event’s <code>getEventPhase()</code> method indicating to the subscriber the phase:</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p><strong>hide</strong> phase allows the subscriber to hide the member</p> </li> 
            <li> <p><strong>disable</strong> phase allows the subscriber to disable the member.<br></p> </li> 
           </ul> 
          </div> 
          <div class="paragraph"> 
           <p>For a property this makes it read-only; for an action this makes it "greyed out". (Collections are implicitly read-only).</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p><strong>validate</strong> phase allows the subscriber to validate the proposed change.</p> </li> 
           </ul> 
          </div> 
          <div class="paragraph"> 
           <p>For a property this means validating the proposed new value of the property; for an action this means validating the action parameter arguments. For example, a referential integrity restrict could be implemented here.</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p><strong>executing</strong> phase is prior to the actual property edit/action invocation, allowing the subscriber to perform side-effects.<br></p> </li> 
           </ul> 
          </div> 
          <div class="paragraph"> 
           <p>For example, a cascade delete could be implemented here.</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p><strong>executed</strong> phase is after the actual property edit/action invocation.<br></p> 
             <div class="paragraph"> 
              <p>For example, a business audit event could be implemented here.</p> 
             </div> </li> 
           </ul> 
          </div> 
          <div class="paragraph"> 
           <p>For more details on the actual domain event classes, see the <a href="../rgcms/rgcms.html#_rgcms_classes_domainevent">domain event</a> section of the relevant reference guide.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_building-blocks_events_ui-events">3.5.2. UI Events</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_events_ui-events.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_events_ui-events.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_events_ui-events.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_events_ui-events.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_events_ui-events.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>As explained <a href="../ugfun/ugfun.html#_ugfun_building-blocks_identifiers_title-and-icon">earlier</a>, to allow the end-user to distinguish one domain object from another, it is rendered with a title and an icon.</p> 
          </div> 
          <div class="paragraph"> 
           <p><a href="../ugfun/ugfun.html#_ugfun_ui-hints_object-titles-and-icons">Normally</a> the code to return title and icon of an object is part of the domain object’s implementation. However, UI events allow this title and icon to be provided instead by a subscriber. UI events have higher precedence than the other mechanisms of supplying a title.</p> 
          </div> 
          <div class="paragraph"> 
           <p>If annotated with <a href="../rgant/rgant.html#_rgant_DomainObjectLayout_titleUiEvent"><code>@DomainObjectLayout#titleUiEvent()</code></a>, the appropriate (subclass of) <code>TitleUiEvent</code> will be emitted. Similarly for <a href="../rgant/rgant.html#_rgant_DomainObjectLayout_iconUiEvent"><code>iconUiEvent()</code></a> and <a href="../rgant/rgant.html#_rgant_DomainObjectLayout_cssClassUiEvent"><code>cssClassUiEvent()</code></a>.</p> 
          </div> 
          <div class="paragraph"> 
           <p>This can be particularly useful for <a href="../ugfun/ugfun.html#_ugfun_programming-model_view-models_jaxb">JAXB-style view models</a> which are used as DTOs and so must have no dependencies on the rest of the Apache Isis framework.</p> 
          </div> 
          <div class="paragraph"> 
           <p>It can also be more generally useful to allow one module to influence/fine-tune the title of entities provided by some other module. The obvious use case is when reusing library modules, eg as provided by (non-ASF) <a href="http://platform.incode.org" target="_blank">Incode Platform</a>.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_building-blocks_events_lifecycle-events">3.5.3. Lifecycle Events</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_events_lifecycle-events.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_events_lifecycle-events.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_events_lifecycle-events.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_events_lifecycle-events.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_events_lifecycle-events.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>Lifecycle events allow domain object subscribers to listen for changes to the persistence state of domain entities, and act accordingly.</p> 
          </div> 
          <div class="admonitionblock note"> 
           <table> 
            <tbody>
             <tr> 
              <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
              <td class="content"> 
               <div class="paragraph"> 
                <p>Lifecycle events are <em>not</em> fired for view models.</p> 
               </div> </td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="paragraph"> 
           <p>The lifecycle events supported are:</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p>object created - just instantiated.<br></p> 
             <div class="paragraph"> 
              <p>Note that this requires that the object is instantiated using the framework, see <a href="../ugfun/ugfun.html#_ugfun_crud_instantiating">here</a> for further discussion</p> 
             </div> </li> 
            <li> <p>updated loaded - just retrieved from the database</p> </li> 
            <li> <p>object persisting - object about to be inserted into the database</p> </li> 
            <li> <p>object persisted - object just inserted into the database</p> </li> 
            <li> <p>object updating - object about to be updated</p> </li> 
            <li> <p>object updated - object just updated</p> </li> 
            <li> <p>object removing - object about to be deleted from the database</p> </li> 
           </ul> 
          </div> 
          <div class="paragraph"> 
           <p>There is no lifecycle event for object creating because the framework doesn’t know about newly created objects until they have been created; and there is no lifecycle event for obejcts removed because it is not valid to "touch" a domain entity once deleted.</p> 
          </div> 
          <div class="paragraph"> 
           <p>For example, if annotated with <a href="../rgant/rgant.html#_rgant_DomainObject_updatingLifecycleEvent"><code>@DomainObjectLayout#updatingLifecycleEvent()</code></a>, the appropriate (subclass of) <code>ObjectUpdatingEvent</code> will be emitted. Similarly for <a href="../rgant/rgant.html#_rgant_DomainObjectLayout_iconUiEvent"><code>iconUiEvent()</code></a> and <a href="../rgant/rgant.html#_rgant_DomainObjectLayout_cssClassUiEvent"><code>cssClassUiEvent()</code></a>.</p> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_building-blocks_modules">3.6. Modules</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_modules.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_modules.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_modules.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_modules.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_building-blocks_modules.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>We tend to use Maven modules as a way to group related domain objects together; we can then reason about all the classes in that module as a single unit. By convention there will be a single top-level package corresponding to the module.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For example, the (non-ASF) <a href="http://platform.incode.org" target="_blank">Incode Platform</a>'s document module has a top-level package of <code>org.incode.module.document</code>. Within the module there may be various subpackages, but it’s the module that defines the namespace.</p> 
         </div> 
         <div class="paragraph"> 
          <p>The bootstrapping of Apache Isis also relies on module classes. (Currently) the only role of these classes is to identify a fully qualified package name, for example <code>org.incode.modules.document</code>. The framework then performs classpath scanning across all such packages to locate any domain entities provided by that module (though some modules have no entities), all domain services provided by the module (every module is likely to define at least one), and also any fixture scripts provided by the module.</p> 
         </div> 
         <div class="paragraph"> 
          <p>In the same way that the Java module act as a namespace for domain objects, it’s good practice to map domain entities to their own (database) schemas.</p> 
         </div> 
         <div class="paragraph"> 
          <p>The module class does not <em>need</em> to implement any specific interface; in this case the framework uses the module class simply to obtain a package to scan for entities and domain services. However, it’s recommended to implement the <a href="../rgcms/rgcms.html#_rgcms_classes_Module"><code>Module</code></a> interface because this allows the module to specify its direct dependencies; from these all transitive dependencies are calculated. This should match the compile-time dependencies declared within Maven.</p> 
         </div> 
         <div class="paragraph"> 
          <p>The <code>Module</code> interface also allows a module to declare any configuration properties that should be contributed, as well as fixture scripts for reference data, and to tear down (for integration testing).</p> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_ugfun_getting-started_helloworld-archetype">4. HelloWorld Archetype</h2>
       <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
        <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_getting-started_helloworld-archetype.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
        <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
        <ul class="dropdown-menu">
         <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_getting-started_helloworld-archetype.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
         <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_getting-started_helloworld-archetype.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
         <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_getting-started_helloworld-archetype.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
         <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_getting-started_helloworld-archetype.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
        </ul>
       </div> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>The quickest way to start learning about Apache Isis is to run the <code>helloworld</code> archetype. This will generate a tiny Apache Isis app, consisting of a simple one-class domain model, called <code>HelloWorldObject</code>, and a supporting <code>HelloWorldObjects</code> domain service. Both the business logic and supporting bootstrapping classes are in a single Maven module (in different Java packages).</p> 
        </div> 
        <div class="admonitionblock tip"> 
         <table> 
          <tbody>
           <tr> 
            <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
            <td class="content"> 
             <div class="paragraph"> 
              <p>We don’t recommend that you use the helloworld archetype as the basis for your own applications. Instead, use the <a href="#_ugfun_getting-started_simpleapp-archetype">simpleapp archetype</a>. This also creates a minimal application, but provides more structure and example tests, useful as you build out your own app.</p> 
             </div> </td> 
           </tr> 
          </tbody>
         </table> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_getting-started_prerequisites.adoc">4.1. Prerequisites</h3> 
         <div class="paragraph"> 
          <p>Apache Isis is a Java based framework, so in terms of prerequisites, you’ll need to install:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p>Java 7 or 8 JDK</p> </li> 
           <li> <p><a href="http://maven.apache.org">Apache Maven</a> 3.x</p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>You’ll probably also want to use an IDE; the Apache Isis committers use either IntelliJ or Eclipse; in the <a href="../dg/dg.html#_dg_ide">Developers' Guide</a> we have detailed setup instructions for using these two IDEs. If you’re a NetBeans user you should have no problems as it too has strong support for Maven.</p> 
         </div> 
         <div class="paragraph"> 
          <p>When building and running within an IDE, you’ll also need to configure the Datanucleus enhancer. This is implemented as a Maven plugin, so in the case of IntelliJ, it’s easy enough to run the enhancer as required. It should be just as straightforward for NetBeans too.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For Eclipse the maven integration story is a little less refined. All is not lost, however; DataNucleus also has an implementation of the enhancer as an Eclipse plugin, which usually works well enough.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="__ugfun_getting-started_helloworld-archetype_generating-the-app">4.2. Generating the App</h3> 
         <div class="paragraph"> 
          <p>Create a new directory, and <code>cd</code> into that directory.</p> 
         </div> 
         <div class="paragraph"> 
          <p>To build the app from the latest stable release, then run the following command:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="bash">mvn archetype:generate  \
    -D archetypeGroupId=org.apache.isis.archetype \
    -D archetypeArtifactId=helloworld-archetype \
    -D archetypeVersion=1.16.0 \
    -D groupId=com.mycompany \
    -D artifactId=myapp \
    -D version=1.0-SNAPSHOT \
    -B</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>where:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p><code>groupId</code> represents your own organization, and</p> </li> 
           <li> <p><code>artifactId</code> is a unique identifier for this app within your organization.</p> </li> 
           <li> <p><code>version</code> is the initial (snapshot) version of your app</p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>The archetype generation process will then run; it only takes a few seconds.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="__ugfun_getting-started_helloworld-archetype_structure-of-the-app">4.3. Structure of the App</h3> 
         <div class="paragraph"> 
          <p>As noted above, the application generated by the helloworld archetype is deliberately simplified, with everything contained within a single Maven module.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Under <code>src/main/java</code> we have:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre>domainapp/
├── application/
│   ├── HelloWorldAppManifest.java
│   └── isis.properties
├── dom/
│   ├── HelloWorldModule.java
│   └── impl/
│       ├── HelloWorldObject.java
│       ├── HelloWorldObject.layout.xml
│       ├── HelloWorldObject.png
│       └── HelloWorldObjects.java
└── app/
    ├── HelloWorldApplication.java
    └── welcome.html
META-INF/
└── persistence.xml</pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>For simplicity, all the Java source files generated by the archetype are placed in a <code>domainapp</code> top-level package.</p> 
         </div> 
         <div class="admonitionblock note"> 
          <table> 
           <tbody>
            <tr> 
             <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
             <td class="content"> 
              <div class="paragraph"> 
               <p>While it’s more conventional to use the inverse domain name for package (eg <code>com.mycompany.myapp</code>, that’s only really appropriate for library code that will be released for reuse by multiple applications in different orgnisations (eg open source).</p> 
              </div> 
              <div class="paragraph"> 
               <p>For internal application though this is less of a concern; indeed, avoiding using the domain name means that if the company rebrands or is taken over then nothing needs be changed.</p> 
              </div> 
              <div class="paragraph"> 
               <p>Of course, you are always free to move the classes to a different package if you wish.</p> 
              </div> </td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
         <div class="paragraph"> 
          <p>In <code>domainapp.application</code> package is <code>HelloWorldAppManifest</code>, which implements the <code>AppManifest</code> interface defined by the Apache Isis applib. The class is only small, so is worth showing here in its entirety:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">HelloWorldAppManifest</span> <span class="directive">extends</span> AppManifestAbstract {
    <span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> Builder BUILDER = Builder
            .forModules(HelloWorldModule.class)
            .withConfigurationPropertiesFile(HelloWorldAppManifest.class, <span class="string"><span class="delimiter">"</span><span class="content">isis.properties</span><span class="delimiter">"</span></span>)
            .withAuthMechanism(<span class="string"><span class="delimiter">"</span><span class="content">shiro</span><span class="delimiter">"</span></span>);

    <span class="directive">public</span> HelloWorldAppManifest() {
        <span class="local-variable">super</span>(BUILDER);
    }
}</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Rather than implement <code>AppManifest</code> directly, <code>HelloWorldAppManifest</code> uses the builder provided by the convenience <code>AppManifestAbstract</code>); as you’ll find when you work on bigger applications, it’s common to have variations around the app manifest, so the builder makes it easy to create these variations without lots of boilerplate.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For now, we see that (using the builder) the app manifest defines three things:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p>a list of modules - there’s just one, <code>HelloWorldModule</code> for this class</p> </li> 
           <li> <p>the location of a configuration file, <code>isis.properties</code>, read in as a resource from the classpath</p> </li> 
           <li> <p>specifying an authentication/authorisation mechanism, in this case Apache Shiro integration.</p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>In Apache Isis a module is simply an empty class, which is used simply to obtain a package name. The framework uses classpath scanning to find certain classes; rather than scan the entire classpath it limits its search to the package(s) obtained from the modules.</p> 
         </div> 
         <div class="paragraph"> 
          <p>The packages are scanned to identify three types of classes:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p>all entities.</p> 
            <div class="paragraph"> 
             <p>These are entities that are annotated with <code>@javax.jdo.annotations.PersistenceCapable</code>. These are passed through to the JDO (DataNucleus) object store, in order to create database mappings from the entities to relational tables</p> 
            </div> 
            <div class="paragraph"> 
             <p>In the helloworld application, the only entity is <code>HelloWorldObject</code>.</p> 
            </div> </li> 
           <li> <p>all domain services</p> 
            <div class="paragraph"> 
             <p>These are classes that are annotated with the framework’s <code>@DomainService</code> annotation. Depending on their nature, services are used to build up the menu, or are available to call programmatically, eg repositories. The framework instantiates an instance of each and will automatically inject the services into other domain objects and services.</p> 
            </div> 
            <div class="paragraph"> 
             <p>In the helloworld application, the only domain service is <code>HelloWorldObjects</code>. This appears in the menu, and also acts as a repository for the <code>HelloWorldObject</code> entity.</p> 
            </div> </li> 
           <li> <p>all fixture scripts</p> 
            <div class="paragraph"> 
             <p>These are classes that extend from the applib <code>FixtureScript</code> class, and are used to setup the database when running in prototype mode (against an in-memory database).</p> 
            </div> 
            <div class="paragraph"> 
             <p>The helloworld application doesn’t provide any examples of these.</p> 
            </div> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>The app manifest also identifies the <code>isis.properties</code> file (in the same package as <code>HelloWorldAppManifest</code>) as containing various configuration options. The helloworld application uses these for settings that are unlikely to change and so are loaded as a static resource from the classpath.</p> 
         </div> 
         <div class="paragraph"> 
          <p>You’ll find that there’s another file called <code>isis.properties</code> that’s in <code>WEB-INF/isis.properties</code>. This also provides configuration options (the framework simply combines them) but those in <code>WEB-INF/isis.properties</code> are restricted to settings that are likely to change from environment to environment, most notably JDBC URL connection strings. Separating these out makes it easy to reconfigure the application to run against different databases in different environments (dev, test, production etc).</p> 
         </div> 
         <div class="paragraph"> 
          <p>Finally, the app manifest identifies Apache Shiro for authentication and authorisation. Shiro in turn is configured using the <code>WEB-INF/shiro.ini</code> file.</p> 
         </div> 
         <div class="admonitionblock tip"> 
          <table> 
           <tbody>
            <tr> 
             <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
             <td class="content"> 
              <div class="paragraph"> 
               <p>The security integration provided by Apache Isis and Shiro is quite sophisticated; to get started though you can just login using username: <code>sven</code>, password: <code>pass</code>.</p> 
              </div> </td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
         <div class="paragraph"> 
          <p>In the <code>domainapp.dom</code> module ("dom" stands for "domain object model") is the <code>HelloWorldModule</code>:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">domainapp.dom</span>;
<span class="directive">public</span> <span class="directive">final</span> <span class="type">class</span> <span class="class">HelloWorldModule</span> {
    <span class="directive">private</span> HelloWorldModule(){}
}</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>As already explained, this is simply used by the app manifest to identify "domainapp.dom" as the package to scan to locate entities (<code>HelloWorldObject</code>), services (<code>HelloWorldObjects</code>) and fixture scripts (none provided).</p> 
         </div> 
         <div class="paragraph"> 
          <p>In the <code>domainapp.dom.impl</code> we have the classes that actually comprise our domain object. These are a little large to list here in their entirety, but it’s worth calling out:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p><code>HelloWorldObject</code>:</p> 
            <div class="ulist"> 
             <ul> 
              <li> <p>is annotated with a bunch of JDO annotations, <code>@PersistenceCapable</code> being the most important.</p> 
               <div class="paragraph"> 
                <p>This annotation is what identifies the class as an entity, so that Apache Isis passes through to JDO/DataNucleus during bootstrapping (to create the ORM mappings).</p> 
               </div> </li> 
              <li> <p>is also annotated with Isis' own <code>@DomainObject</code>.</p> 
               <div class="paragraph"> 
                <p>This isn’t mandatory, but since entities are the real building blocks on which Isis applications are built, it’s very common to use this annotation.</p> 
               </div> </li> 
              <li> <p>also uses various Project Lombok annotations to remove boilerplate.</p> </li> 
             </ul> 
            </div> </li> 
           <li> <p><code>HelloWorldObject.layout.xml</code> defines the layout of the members (properties and actions) of the <code>HelloWorldObject</code>.</p> 
            <div class="paragraph"> 
             <p>Layout files are optional - Apache Isis is an implementation of the naked objects pattern, after all - but in most cases you’ll find it easiest to use one</p> 
            </div> </li> 
           <li> <p><code>HelloWorldObject.png</code> is used as an icon for any instances of the domain object shown in the (Wicket) viewer</p> </li> 
           <li> <p><code>HelloWorldObjects</code> is a domain service by virtue of the fact that it is annotated with Isis' <code>@DomainService</code>.</p> 
            <div class="paragraph"> 
             <p>This acts as both a menu (the <code>@DomainService#nature</code> attribute) and also a repository to find/create instances of <code>HelloWorldObject</code>.</p> 
            </div> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>The <code>META-INF/persistence.xml</code> also relates to domain entities. JDO/DataNucleus allows metadata mapping information to be specified using either XML or annotations. In the Apache Isis community we generally prefer to use annotations, but nevertheless this file is required, even though it is basically empty:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;persistence</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://java.sun.com/xml/ns/persistence</span><span class="delimiter">"</span></span>
    <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">"</span></span>
    <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd</span><span class="delimiter">"</span></span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">"</span><span class="content">1.0</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>

    <span class="tag">&lt;persistence-unit</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">helloworld</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/persistence&gt;</span></code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Finally, in the <code>domainapp.webapp</code> we have <code>HelloWorldApplication</code>. This is required to bootstrap the Wicket viewer (it is configured in <code>WEB-INF/web.xml</code>). Internally it uses Google Guice to configure various static resources served up by Wicket:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">HelloWorldApplication</span> <span class="directive">extends</span> IsisWicketApplication {
    ...
    protected Module newIsisWicketModule() {
        <span class="directive">final</span> Module isisDefaults = <span class="local-variable">super</span>.newIsisWicketModule();
        <span class="directive">final</span> Module overrides = <span class="keyword">new</span> AbstractModule() {
            <span class="annotation">@Override</span>
            <span class="directive">protected</span> <span class="type">void</span> configure() {
                ...
            }
        };
        <span class="keyword">return</span> Modules.override(isisDefaults).with(overrides);
    }
}</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>The <code>configure()</code> method is the place to change the name of the application for example, or to change the initial about and welcome messages. The text of the welcome page shown by the Wicket viewer can be found in <code>welcome.html</code>, loaded from the classpath and in the same package as <code>HelloWorldApplication</code>.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Under <code>src/main/webapp</code> we have various resources that are used to configure the webapp, or that are served up by the running webapp:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre>about/
└── index.html
css/
└── application.css
scripts/
└── application.js
swagger-ui/
WEB-INF/
├── isis.properties
├── logging.properties
├── shiro.ini
└── web.xml</pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Most important of these is <code>WEB-INF/web.xml</code>, which bootstraps both the Wicket viewer and the Restful Objects viewer (the REST API derived from the domain object model).</p> 
         </div> 
         <div class="paragraph"> 
          <p>The <code>about/index.html</code> is the page shown at the root of the package, providing links to either the Wicket viewer or to the Swagger UI. In a production application this is usually replaced with a page that does an HTTP 302 redirect to the Wicket viewer.</p> 
         </div> 
         <div class="paragraph"> 
          <p>In <code>css/application.css</code> you can use to customise CSS, typically to highlight certain fields or states. The pages generated by the Wicket viewer have plenty of CSS classes to target. You can also implement the <code>cssClass()</code> method in each domain object to provide additional CSS classes to target.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Similarly, in <code>scripts/application.js</code> you have the option to add arbitrary Javascript. JQuery is available by default.</p> 
         </div> 
         <div class="paragraph"> 
          <p>In <code>swagger-ui</code> is a copy of the Swagger 2.x UI classes, preconfigured to run against the REST API exposed by the Restful Objects viewer. This can be useful for developing custom applications, and is accessible from the initial page (served up by <code>about/index.html</code>).</p> 
         </div> 
         <div class="paragraph"> 
          <p>Finally in <code>WEB-INF</code> we have the standard <code>web.xml</code> (already briefly discussed) along with several other files:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p><code>isis.properties</code> contains further configuration settings for Apache Isis itself.</p> 
            <div class="paragraph"> 
             <p>(As already discussed), these are in addition to the configuration properties found in the <code>isis.properties</code> that lives alongside and that is loaded by the <code>HelloWorldAppManifest</code> class. Those in the WEB-INF/isis.properties file are those that are likely to change when running the application in different environments.</p> 
            </div> </li> 
           <li> <p><code>logging.properties</code> configures log4j.</p> 
            <div class="paragraph"> 
             <p>The framework is configured to use slf4j running against log4j.</p> 
            </div> </li> 
           <li> <p><code>shiro.ini</code> configures Apache Shiro, used for security (authentication and authorisation)</p> </li> 
           <li> <p><code>web.xml</code> configures the Wicket viewer and Restful Objects viewer. It also sets up various filters for serving up static resources with caching HTTP headers.</p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>Under <code>src/test/java</code> we have:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre>domainapp/
└── dom/
    └── impl/
        ├── HelloWorldObjectTest_delete.java
        └── HelloWorldObjectTest_updateName.java</pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>These are very simple unit tests of <code>HelloWorldObject</code>. They use JMock as the mocking library (with some minor extensions provided by Apache Isis itself).</p> 
         </div> 
         <div class="paragraph"> 
          <p>Finally, at the root directory we of course have the <code>pom.xml</code>. Some notable points:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p>since this module generates a WAR file, the <code>pom.xml</code> uses <code>&lt;packaging&gt;war&lt;/packaging&gt;</code></p> </li> 
           <li> <p>maven mixins are used to remove boilerplate configuration of standard plugins (resources, compile, jar etc), for the DataNucleus enhancer, for surefire (tests), and for running the application using jetty plugin</p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>Now you know your way around the code generated by the archetype, lets see how to build the app and run it.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="__ugfun_getting-started_helloworld-archetype_building-the-app">4.4. Building the App</h3> 
         <div class="paragraph"> 
          <p>Switch into the root directory of your newly generated app, and build your app:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="bash">cd myapp
mvn clean install</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>where <code>myapp</code> is the <code>artifactId</code> entered above.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="__ugfun_getting-started_helloworld-archetype_running-the-app">4.5. Running the App</h3> 
         <div class="paragraph"> 
          <p>The <code>helloworld</code> archetype generates a single WAR file, configured to run both the <a href="../ugvw/ugvw.html">Wicket viewer</a> and the <a href="../ugvro/ugvro.html">Restful Objects viewer</a>. The archetype also configures the DataNucleus/JDO Objectstore to use an in-memory HSQLDB connection.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Once you’ve built the app, you can run the WAR in a variety of ways.</p> 
         </div> 
         <div class="sect3"> 
          <h4 id="_using_mvn_jetty_plugin">4.5.1. Using mvn Jetty plugin</h4> 
          <div class="paragraph"> 
           <p>First, you could run the WAR in a Maven-hosted Jetty instance, though you need to <code>cd</code> into the <code>webapp</code> module: (using maven 3.5.0 / isis 1.15 there is no webapp module and there is no need to <code>cd`into a `webapp</code> module. just run mvn jetty:run to fire up the app )</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="bash">mvn jetty:run</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>You can also provide a system property to change the port:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="bash">mvn jetty:run -D jetty.port=9090</code></pre> 
           </div> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_using_a_regular_servlet_container">4.5.2. Using a regular servlet container</h4> 
          <div class="paragraph"> 
           <p>You can also take the built WAR file and deploy it into a standalone servlet container such as [Tomcat](<a href="http://tomcat.apache.org" class="bare">http://tomcat.apache.org</a>). The default configuration does not require any configuration of the servlet container; just drop the WAR file into the <code>webapps</code> directory.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_from_within_the_ide">4.5.3. From within the IDE</h4> 
          <div class="paragraph"> 
           <p>Most of the time, though, you’ll probably want to run the app from within your IDE. The mechanics of doing this will vary by IDE; see the <a href="../dg/dg.html#_dg_ide">Developers' Guide</a> for details of setting up Eclipse or IntelliJ IDEA. Basically, though, it amounts to running <code>org.apache.isis.WebServer</code>, and ensuring that the <a href="../dg/dg.html#_dg_hints-and-tips_datanucleus-enhancer">DataNucleus enhancer</a> has properly processed all domain entities.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Here’s what the setup looks like in IntelliJ IDEA:</p> 
          </div> 
          <div class="imageblock"> 
           <div class="content"> 
            <a class="image" href="images/getting-started/helloworld.png"><img src="images/getting-started/helloworld.png" alt="helloworld" width="600px"></a> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>with the maven goal to run the DataNucleus enhancer (discussed in more detail <a href="../dg/dg.html#_dg_hints-and-tips_datanucleus-enhancer">here</a>) before launch defined as:</p> 
          </div> 
          <div class="imageblock"> 
           <div class="content"> 
            <a class="image" href="images/getting-started/helloworld-before-launch.png"><img src="images/getting-started/helloworld-before-launch.png" alt="helloworld before launch" width="600px"></a> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="__ugfun_getting-started_helloworld-archetype_using-the-app">4.6. Using the App</h3> 
         <div class="paragraph"> 
          <p>When you start the app, you’ll be presented with a welcome page from which you can access the webapp using either the <a href="../ugvw/ugvw.html">Wicket viewer</a> or the <a href="../ugvro/ugvro.html">Restful Objects viewer</a>:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/getting-started/using-hello-world/010-root-page.png"><img src="images/getting-started/using-hello-world/010-root-page.png" alt="010 root page" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>The Wicket viewer provides a human usable web UI (implemented, as you might have guessed from its name, using <a href="http://wicket.apache.org">Apache Wicket</a>), so choose that and navigate to the login page:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/getting-started/using-hello-world/020-login-to-wicket-viewer.png"><img src="images/getting-started/using-hello-world/020-login-to-wicket-viewer.png" alt="020 login to wicket viewer" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>The app itself is configured to run using <a href="../ugsec/ugsec.html">shiro security</a>, as configured in the <code>WEB-INF/shiro.ini</code> config file. You can login with:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p>username: <em>sven</em></p> </li> 
           <li> <p>password: <em>pass</em></p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>Once you’ve logged in you’ll see the default home page:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/getting-started/using-hello-world/030-home-page.png"><img src="images/getting-started/using-hello-world/030-home-page.png" alt="030 home page" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>The application is configured to run with an in-memory database, so initially there is no data. Create an object using the menu:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/getting-started/using-hello-world/040-create-object-from-menu.png"><img src="images/getting-started/using-hello-world/040-create-object-from-menu.png" alt="040 create object from menu" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>which brings up a modal dialog:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/getting-started/using-hello-world/050-create-object-from-menu-prompt.png"><img src="images/getting-started/using-hello-world/050-create-object-from-menu-prompt.png" alt="050 create object from menu prompt" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>hitting OK returns the created object:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/getting-started/using-hello-world/060-created-object.png"><img src="images/getting-started/using-hello-world/060-created-object.png" alt="060 created object" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>The above functionality is implemented by <a href="https://github.com/apache/isis/blob/master/example/application/helloworld/src/main/java/domainapp/dom/impl/HelloWorldObjects.java#L43">this code</a>:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Action</span>(semantics = SemanticsOf.NON_IDEMPOTENT)
<span class="annotation">@MemberOrder</span>(sequence = <span class="string"><span class="delimiter">"</span><span class="content">1</span><span class="delimiter">"</span></span>)
<span class="directive">public</span> HelloWorldObject create(
        <span class="annotation">@Parameter</span>(maxLength = <span class="integer">40</span>)
        <span class="annotation">@ParameterLayout</span>(named = <span class="string"><span class="delimiter">"</span><span class="content">Name</span><span class="delimiter">"</span></span>)
        <span class="directive">final</span> <span class="predefined-type">String</span> name) {
    <span class="directive">final</span> HelloWorldObject object = <span class="keyword">new</span> HelloWorldObject(name);
    serviceRegistry.injectServicesInto(object);
    repositoryService.persist(object);
    <span class="keyword">return</span> object;
}</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>The <code>HelloWorldObject</code> contains a couple of properties, and a single action to update that property.</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p>The <code>name</code> property is read-only, and can only be modified using the <code>updateName</code> action.<br></p> 
            <div class="paragraph"> 
             <p>For example:</p> 
            </div> 
            <div class="imageblock"> 
             <div class="content"> 
              <a class="image" href="images/getting-started/using-hello-world/070-update-name.png"><img src="images/getting-started/using-hello-world/070-update-name.png" alt="070 update name" width="600px"></a> 
             </div> 
            </div> 
            <div class="paragraph"> 
             <p>The above functionality is implemented by <a href="https://github.com/apache/isis/blob/master/example/application/helloworld/src/main/java/domainapp/dom/impl/HelloWorldObject.java#L73">this code</a>:<br></p> 
            </div> 
            <div class="listingblock"> 
             <div class="content"> 
              <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Action</span>(
    semantics = SemanticsOf.IDEMPOTENT,
    command = CommandReification.ENABLED,
    publishing = Publishing.ENABLED
)
<span class="directive">public</span> HelloWorldObject updateName(
        <span class="annotation">@Parameter</span>(maxLength = <span class="integer">40</span>)
        <span class="annotation">@ParameterLayout</span>(named = <span class="string"><span class="delimiter">"</span><span class="content">Name</span><span class="delimiter">"</span></span>)
        <span class="directive">final</span> <span class="predefined-type">String</span> name) {
    setName(name);
    <span class="keyword">return</span> <span class="local-variable">this</span>;
}</code></pre> 
             </div> 
            </div> </li> 
           <li> <p>The <code>notes</code> property is editable, and can be edited in-place.<br></p> 
            <div class="paragraph"> 
             <p>For example:</p> 
            </div> 
            <div class="imageblock"> 
             <div class="content"> 
              <a class="image" href="images/getting-started/using-hello-world/080-edit-notes.png"><img src="images/getting-started/using-hello-world/080-edit-notes.png" alt="080 edit notes" width="600px"></a> 
             </div> 
            </div> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>It’s also possible to delete an object:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/getting-started/using-hello-world/090-delete-object.png"><img src="images/getting-started/using-hello-world/090-delete-object.png" alt="090 delete object" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>The viewer displays a message confirming that the object has been deleted:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/getting-started/using-hello-world/100-object-deleted.png"><img src="images/getting-started/using-hello-world/100-object-deleted.png" alt="100 object deleted" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>The above functionality is implemented by <a href="https://github.com/apache/isis/blob/master/example/application/helloworld/src/main/java/domainapp/dom/impl/HelloWorldObject.java#L87">this code</a>:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Action</span>(semantics = SemanticsOf.NON_IDEMPOTENT_ARE_YOU_SURE)
<span class="directive">public</span> <span class="type">void</span> delete() {
    <span class="directive">final</span> <span class="predefined-type">String</span> title = titleService.titleOf(<span class="local-variable">this</span>);
    messageService.informUser(<span class="predefined-type">String</span>.format(<span class="string"><span class="delimiter">"</span><span class="content">'%s' deleted</span><span class="delimiter">"</span></span>, title));
    repositoryService.removeAndFlush(<span class="local-variable">this</span>);
}</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>This uses three services provided by the framework; these are injected into the domain object automatically.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Going back to the home page (<a href="http://localhost:8080">localhost:8080</a>) we can use <a href="https://swagger.io/">Swagger UI</a> as a front-end to the REST API provided by the Restful Objects viewer.</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/getting-started/using-hello-world/200-swagger-ui-before-reload.png"><img src="images/getting-started/using-hello-world/200-swagger-ui-before-reload.png" alt="200 swagger ui before reload" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>The Swagger UI is created dynamically from a Swagger schema definition (the schema definition file itself can be downloaded from the Wicket viewer’s "Prototyping" menu). This Swagger schema definition groups resources according to Apache Isis metadata:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/getting-started/using-hello-world/210-helloworld-resources.png"><img src="images/getting-started/using-hello-world/210-helloworld-resources.png" alt="210 helloworld resources" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>For example, an object can be created using the resource that represents the <code>HelloWorldObjects#create</code> action:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/getting-started/using-hello-world/220-create-object-thru-rest-api.png"><img src="images/getting-started/using-hello-world/220-create-object-thru-rest-api.png" alt="220 create object thru rest api" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>The response indicates that the object was successfully created:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/getting-started/using-hello-world/230-create-object-thru-rest-api-response.png"><img src="images/getting-started/using-hello-world/230-create-object-thru-rest-api-response.png" alt="230 create object thru rest api response" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>The Swagger UI also provides a resource to retrieve any object:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/getting-started/using-hello-world/240-retrieve-object-using-rest-api.png"><img src="images/getting-started/using-hello-world/240-retrieve-object-using-rest-api.png" alt="240 retrieve object using rest api" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>This results in a representation of the domain object (as per the requested <code>Response Content Type</code>, ie <code>ACCEPT</code> header):</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/getting-started/using-hello-world/250-retrieve-object-using-rest-api-response.png"><img src="images/getting-started/using-hello-world/250-retrieve-object-using-rest-api-response.png" alt="250 retrieve object using rest api response" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>The Swagger UI is provided as a convenience; the REST API is actually a complete hypermedia API (in other words you can follow the links to access all the behaviour exposed in the regular Wicket app). The REST API implemented by Apache Isis is specified in the <a href="http://www.restfulobjects.org">Restful Object spec</a>.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="__ugfun_getting-started_helloworld-archetype_experimenting">4.7. Experimenting with the App</h3> 
         <div class="paragraph"> 
          <p>Once you are familiar with the generated app, try modifying it. There is plenty more guidance on this site; start with this guide (fundamentals) and then look at the other guides available the main <a href="../../documentation.html">documentation</a> page.</p> 
         </div> 
         <div class="paragraph"> 
          <p>If you use IntelliJ IDEA or Eclipse, do also install the <a href="../dg/dg.html#<em>dg_ide_intellij_live-templates">live templates (for IntelliJ)</a> / <a href="../dg/dg.html#</em>dg_ide_eclipse_editor-templates">editor templates (for Eclipse)</a>; these will help you follow the Apache Isis naming conventions.</p> 
         </div> 
         <div class="paragraph"> 
          <p>If you run into issues, please don’t hesitate to ask for help on the <a href="http://isis.apache.org/help.html">users mailing list</a>.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="__ugfun_getting-started_helloworld-archetype_moving-on">4.8. Moving on</h3> 
         <div class="paragraph"> 
          <p>When you are ready to start working on your own app, we <em>don’t</em> recommend building on top of the helloworld app.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Instead, we suggest that you start with the <a href="#_ugfun_getting-started_simpleapp-archetype">simpleapp archetype</a> instead. Although a little more complex, it provides more structure and tests, all of which will help you as your application grows.</p> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_ugfun_getting-started_simpleapp-archetype">5. SimpleApp Archetype</h2>
       <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
        <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_getting-started_simpleapp-archetype.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
        <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
        <ul class="dropdown-menu">
         <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_getting-started_simpleapp-archetype.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
         <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_getting-started_simpleapp-archetype.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
         <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_getting-started_simpleapp-archetype.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
         <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_getting-started_simpleapp-archetype.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
        </ul>
       </div> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>The quickest way to get started building an application "for real" is to run the <code>simpleapp</code> archetype. Like the <a href="#_ugfun_getting-started_helloworld-archetype">helloworld archetype</a>, this too will generate a very simple one-class domain model (an entity called <code>SimpleObject</code> with a couple of properties).</p> 
        </div> 
        <div class="paragraph"> 
         <p>However, the generated application also provides more structure to assist you as your application grows.</p> 
        </div> 
        <div class="paragraph"> 
         <p>We’ll talk more about the structure of the generated app <a href="#__ugfun_getting-started_simpleapp-archetype_structure-of-the-app">below</a>, but for now let’s see how to generate the application.</p> 
        </div> 
        <div class="admonitionblock tip"> 
         <table> 
          <tbody>
           <tr> 
            <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
            <td class="content"> 
             <div class="paragraph"> 
              <p>The (non-ASF) Incode Platform’s <a href="http://platform.incode.org/quickstart/quickstart.html">quickstart archetype</a> builds upon the simpleapp archetype, but also adds in support for various Incode Platform modules such as security, auditing, commands and publishing.</p> 
             </div> </td> 
           </tr> 
          </tbody>
         </table> 
        </div> 
        <div class="sect2"> 
         <h3 id="__ugfun_getting-started_simpleapp-archetype_generating-the-app">5.1. Generating the App</h3> 
         <div class="paragraph"> 
          <p>Create a new directory, and <code>cd</code> into that directory.</p> 
         </div> 
         <div class="paragraph"> 
          <p>To build the app from the latest stable release, then run the following command:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="bash">mvn archetype:generate  \
    -D archetypeGroupId=org.apache.isis.archetype \
    -D archetypeArtifactId=simpleapp-archetype \
    -D archetypeVersion=1.16.0 \
    -D groupId=com.mycompany \
    -D artifactId=myapp \
    -D version=1.0-SNAPSHOT \
    -B</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>where:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p><code>groupId</code> represents your own organization, and</p> </li> 
           <li> <p><code>artifactId</code> is a unique identifier for this app within your organization.</p> </li> 
           <li> <p><code>version</code> is the initial (snapshot) version of your app</p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>The archetype generation process will then run; it only takes a few seconds.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="__ugfun_getting-started_simpleapp-archetype_structure-of-the-app">5.2. Structure of the App</h3> 
         <div class="paragraph"> 
          <p>As mentioned above, the application generated by the simpleapp archetype is a multi-module project, structured so that you easily extend it as your application grows.</p> 
         </div> 
         <div class="paragraph"> 
          <p>The application consists of three modules, with a top-level module acting as an aggregator and also parent:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/getting-started/using-simple-app/structure/structure/Slide1.PNG"><img src="images/getting-started/using-simple-app/structure/structure/Slide1.PNG" alt="Slide1" width="800px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>The application separates domain object model holding the business logic (the <code>myapp-module-simple</code> Maven module containing <code>SimpleObject</code> entity and supporting domain classes) from the bootstrapping modules (<code>myapp-application</code> Maven module and the <code>myapp-webapp</code> module).</p> 
         </div> 
         <div class="paragraph"> 
          <p>In a larger application there would likely be many more modules containing these domain object modules. For example, you might have a <code>myapp-module-customer</code> holding a <code>Customer</code> entity and related entities/services, a <code>myapp-module-product</code> holding a <code>Product</code> catalog, and a <code>myapp-module-order</code> to hold the <code>Order</code>s placed by <code>Customer</code>s:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/getting-started/using-simple-app/structure/structure/Slide2.PNG"><img src="images/getting-started/using-simple-app/structure/structure/Slide2.PNG" alt="Slide2" width="800px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>We can use Maven dependency management to ensure that there are no cyclic dependencies (order "knows about" product but product does not know about orders) and ensure that the codebase remains decoupled. When Java9 modules are commonplace, we’ll also be able to restrict visibility of classes between modules.</p> 
         </div> 
         <div class="admonitionblock warning"> 
          <table> 
           <tbody>
            <tr> 
             <td class="icon"> <i class="fa icon-warning" title="Warning"></i> </td> 
             <td class="content"> 
              <div class="paragraph"> 
               <p>Note that while Maven dependencies are transitive (in the example the <code>myapp-application</code> needs only depend directly on <code>myapp-module-order</code>, the modules defined in the <code>AppManifest</code> are <em>not</em> transitive: all modules must be listed.</p> 
              </div> </td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
         <div class="paragraph"> 
          <p>Let’s now review the contents of each of the generated modules.</p> 
         </div> 
         <div class="sect3"> 
          <h4 id="_myapp_parent">5.2.1. myapp (parent)</h4> 
          <div class="paragraph"> 
           <p>The parent module is a fairly conventional, declaring its child modules (using <code>&lt;dependencyManagement&gt;</code> elements) and aggregating them (using <code>&lt;module&gt;</code> elements).</p> 
          </div> 
          <div class="admonitionblock note"> 
           <table> 
            <tbody>
             <tr> 
              <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
              <td class="content"> 
               <div class="paragraph"> 
                <p>One thing you’ll discover when you review the generated classes is that they all reside under the <code>domainapp</code> package.</p> 
               </div> 
               <div class="paragraph"> 
                <p>While it’s more conventional to use the inverse domain name for package (eg <code>com.mycompany.myapp</code>, that’s only really appropriate for library code that will be released for reuse by multiple applications in different orgnisations (eg open source).</p> 
               </div> 
               <div class="paragraph"> 
                <p>For internal application though this is less of a concern; indeed, avoiding the domain name means that if the company rebrands or is taken over then nothing needs be changed.</p> 
               </div> 
               <div class="paragraph"> 
                <p>Of course, you are always free to move the classes to a different package if you wish.</p> 
               </div> </td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_myapp_application">5.2.2. myapp-application</h4> 
          <div class="paragraph"> 
           <p>The production classes for <code>myapp-application</code> module (in <code>src/main/java</code>) are:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre>domainapp/
└── application/
    ├── DomainAppApplicationModule.java
    ├── fixture/
    │   ├── DomainAppFixtureScriptsSpecificationProvider.java
    │   └── scenarios/
    │       └── DomainAppDemo.java
    ├── manifest/
    │   ├── DomainAppAppManifest.java
    │   ├── DomainAppAppManifestBypassSecurity.java
    │   ├── DomainAppAppManifestWithFixtures.java
    │   ├── DomainAppAppManifestWithFixturesBypassSecurity.java
    │   └── menubars.layout.xml
    └── services
        └── homepage
            ├── HomePageService.java
            ├── HomePageViewModel.java
            ├── HomePageViewModel.layout.xml
            └── HomePageViewModel.layout.png</pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>There are also supporting files in this package in <code>src/main/resources</code>:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre>domainapp/
└── application/
    └── manifest/
        ├── authentication_shiro.properties
        ├── isis.properties
        ├── persistor_datanucleus.properties
        ├── viewer_restfulobjects.properties
        └── viewer_wicket.properties</pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>The <code>DomainAppAppManifest</code> is the key class here, typically being used to bootstrap the application. It is quite short:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">DomainAppAppManifest</span> <span class="directive">extends</span> AppManifestAbstract2 {

    <span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> Builder BUILDER = Builder
            .forModule(<span class="keyword">new</span> DomainAppApplicationModule())
            .withConfigurationPropertiesFile(DomainAppAppManifest.class,
                    <span class="string"><span class="delimiter">"</span><span class="content">isis.properties</span><span class="delimiter">"</span></span>,
                    <span class="string"><span class="delimiter">"</span><span class="content">authentication_shiro.properties</span><span class="delimiter">"</span></span>,
                    <span class="string"><span class="delimiter">"</span><span class="content">persistor_datanucleus.properties</span><span class="delimiter">"</span></span>,
                    <span class="string"><span class="delimiter">"</span><span class="content">viewer_restfulobjects.properties</span><span class="delimiter">"</span></span>,
                    <span class="string"><span class="delimiter">"</span><span class="content">viewer_wicket.properties</span><span class="delimiter">"</span></span>)
            .withAuthMechanism(<span class="string"><span class="delimiter">"</span><span class="content">shiro</span><span class="delimiter">"</span></span>);

    <span class="directive">public</span> DomainAppAppManifest() {
        <span class="local-variable">super</span>(BUILDER);
    }
}</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>The manifest uses the builder defined by <code>AppManifestAbstract2</code> and references a single top-level (Isis) module, namely <code>DomainAppApplicationModule</code>:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">DomainAppApplicationModule</span> <span class="directive">extends</span> ModuleAbstract {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">Set</span>&lt;Module&gt; getDependencies() {
        <span class="keyword">return</span> Sets.&lt;Module&gt;newHashSet(<span class="keyword">new</span> SimpleModule());
    }
}</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>where <code>SimpleModule</code> in defined in the <code>mypp-module-simple</code> module (below).</p> 
          </div> 
          <div class="paragraph"> 
           <p>The primary purpose of the module class is to identify packages and subpackages that the framework should scan for entities and domain services. The transitive dependencies between modules are automatically resolved. The net effect is that all the domain services and entities in this module as well as those modules referenced are included into the app.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Going back to the manifest, it also defines a number of static configuration files, all loaded from the classpath. Each file contains configuration setting for a different part of the runtime (<code>isis.properties</code> for the core framework, shiro for security, datanucleus for the objectstore, and the two viewers).</p> 
          </div> 
          <div class="paragraph"> 
           <p>The <code>menubars.layout.xml</code> file also resides in the same package as the manifest; this defines the menubar structure.</p> 
          </div> 
          <div class="paragraph"> 
           <p>There are also several variations on the app manifest; these can be used to bootstrap the application with fixtures, or disabling security.</p> 
          </div> 
          <div class="paragraph"> 
           <p>The <code>domainapp.application.services</code> package contains the <code>HomePageService</code> domain service. This simply has a single action annotated with <code>@HomePage</code>:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Action</span>(semantics = SemanticsOf.SAFE)
<span class="annotation">@HomePage</span>
<span class="directive">public</span> HomePageViewModel homePage() {
    <span class="keyword">return</span> factoryService.instantiate(HomePageViewModel.class);
}</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>which returns the <code>HomePageViewModel</code> for use as the home page. The <code>HomePageViewModel</code> itself just renders a collection of <code>SimpleObject</code>s in a list (<code>HomePageViewModel.layout.xml</code> defines the UI layout).</p> 
          </div> 
          <div class="paragraph"> 
           <p>The final package in the application module is <code>domainapp.application.fixture</code>. The important class here is <code>DomainAppDemo</code>, a fixture script that can be used to setup the application with some dummy data. This is used in the app itself when running in prototype mode (against an in-memory database), and can also be used by integration tests.</p> 
          </div> 
          <div class="paragraph"> 
           <p>There is in fact also a domain service defined here, namely <code>DomainAppFixtureScriptsSpecificationProvider</code>. This is just used to configure the run fixture script menu item shown on the "Prototyping" menu.</p> 
          </div> 
          <div class="paragraph"> 
           <p>The module also defines a number of BDD specs and integration tests, in <code>src/test/java</code>. The BDD specs (run using Cucumber) reside under <code>domain.application.bdd</code>:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre>domainapp/
└── application/
    └── bdd/
        ├── specglue/
        │   ├── BootstrappingGlue.java
        │   └── CatalogOfFixturesGlue.java
        └── specs/
            ├── RunIntegBddSpecs.java
            └── SimpleObjectSpec_listAllAndCreate.feature</pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>Here the <code>BootstrappingGlue</code> glue class inherits from the framework’s <code>CukeGlueBootstrappingAbstract</code> class, and bootstraps using the <code>DomainAppApplicationModule</code> mentioned above.</p> 
          </div> 
          <div class="paragraph"> 
           <p>There is just one feature file: <code>SimpleObjectSpec_listAllAndCreate.feature</code>, which is pretty simple:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="feature">@DomainAppDemo
Feature: List and Create New Simple Objects

  Scenario: Existing simple objects can be listed and new ones created
    Given there are initially 10 simple objects
    When  I create a new simple object
    Then  there are 11 simple objects</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>The <code>@DomainAppDemo</code> annotation causes the <code>DomainAppDemo</code> fixture script to be run; this is the purpose of the <code>CatalogOfFixturesGlue</code> glue class.</p> 
          </div> 
          <div class="paragraph"> 
           <p>The specs themselves are run by the <code>RunIntegBddSpecs.java</code> class, which specifies which packages to search for "glue". This is just standard Cucumber bootstrapping.</p> 
          </div> 
          <div class="paragraph"> 
           <p>The integration tests meanwhile are in <code>domainapp.application.integtests</code>:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre>domainapp/
└── application/
    └── integtests/
        ├── DomainAppIntegTestAbstract.java
        └── Smoke_IntegTest.java</pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>The <code>Smoke_IntegTest</code> inherits <code>DomainAppIntegTestAbstract</code>, which in turn inherits from <code>IntegrationTestAbstract3</code> and uses the <code>DomainAppApplicationModule</code> previously discussed. Moreover, the <code>Smoke_IntegTest</code> uses the same <code>DomainAppDemo</code> fixture script. The application and the smoke tests therefore run with the exact same state, making debugging easy.</p> 
          </div> 
          <div class="paragraph"> 
           <p>With regard to the naming of these various BDD specs and integration tests, they follow the naming convention required by the (non-ASF) <a href="http://github.com/danhaywood/java-mavenmixin-surefire">"surefire" mavenmixin</a> that configures the maven surefire plugin.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_myapp_module_simple">5.2.3. myapp-module-simple</h4> 
          <div class="paragraph"> 
           <p>This module is where the domain object model lives, that is the business logic of the application itself. This typically comprises entities, domain services, mixins and view models.</p> 
          </div> 
          <div class="admonitionblock tip"> 
           <table> 
            <tbody>
             <tr> 
              <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
              <td class="content"> 
               <div class="paragraph"> 
                <p>As discussed above, larger applications will likely have multiple modules each containing their own slice of business logic.</p> 
               </div> 
               <div class="paragraph"> 
                <p>Initially though you should probably just use regular Java packages to separate out functionality; you can carve out separate modules later on once the responsibilities of each have settled down.</p> 
               </div> </td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="paragraph"> 
           <p>The classes for the simple module reside in the <code>domainapp.modules.simple</code> package. Under <code>src/main/java</code> we have:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre>domainapp/
└── modules/
    └── simple/
        ├── SimpleModule.java
        ├── SimpleModuleManifest.java
        ├── dom/
        │   └── impl/
        │       ├── SimpleObject.java
        │       ├── SimpleObject.layout.xml
        │       ├── SimpleObject.png
        │       ├── SimpleObjectMenu.java
        │       └── SimpleObjectRepository.java
        └── fixture/
            ├── SimpleObject_persona.java
            └── SimpleObjectBuilder.java
META-INF/
└── persistence.xml</pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>The <code>SimpleModule</code> is the (single) module class referenced from the previously discussed <code>DomainAppApplicationModule</code>, meaning that all the entities, domain services and fixtures within it are included within the application.</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p><code>SimpleObject</code> is the (one-and-only) domain entity defined (with <code>SimpleObject.layout.xml</code> defines its layout in the UI).</p> </li> 
            <li> <p><code>SimpleObjects</code> domain service’s whos actions appear as menu items and which acts as a repository to create and find <code>SimpleObject</code>s.</p> </li> 
           </ul> 
          </div> 
          <div class="paragraph"> 
           <p>The <code>SimpleModule</code> class also defines a teardown fixture, automatically called by integration tests.</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">SimpleModule</span> <span class="directive">extends</span> ModuleAbstract {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> FixtureScript getTeardownFixture() {
        <span class="keyword">return</span> <span class="keyword">new</span> TeardownFixtureAbstract2() {
            <span class="annotation">@Override</span>
            <span class="directive">protected</span> <span class="type">void</span> execute(ExecutionContext ec) {
                deleteFrom(SimpleObject.class);
            }
        };
    }
    ...
}</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>In the <code>fixture</code> subpackage is the <code>SimpleObject_persona</code> "persona" which uses the corresponding <code>SimpleObjectBuilder</code> builder script; further discussion on this pattern <a href="../ugtst/ugtst.html#_ugtst_fixture-scripts_api-and-usage_persona-and-builders">here</a>. These fixtures are also used by "local" integration tests, which reside under <code>src/test/java</code>.</p> 
          </div> 
          <div class="paragraph"> 
           <p>There are also unit tests and "glue" for the BDD specs:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre>domainapp/
└── modules/
    └── simple/
        ├── dom/
        │   └── impl/
        │       ├── SimpleObject_Test.java
        │       └── SimpleObjectRepository_Test.java
        └── integtests/
            ├── SimpleModuleIntegTestAbstract.java
            │   └── tests/
            │       ├── SimpleObject_IntegTest.java
            │       └── SimpleObjectMenu_IntegTest.java
            └── specglue/
                └── SimpleObjectMenuGlue.java</pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>The simpleapp application has both "local" integration tests (defined within the <code>myapp-module-simple</code> module) and also "global" integration tests (the "smoke" tests in <code>myapp-application</code> module). There’s a role for both: local integration tests should fully exercise the module but may need to mock out collaborations between modules, while global integration tests exercise the whole application (but an over-reliance on these can cause test run times to bloat).</p> 
          </div> 
          <div class="paragraph"> 
           <p>With regard to the naming of these various BDD specs and integration tests, they follow the naming convention required by the (non-ASF) <a href="http://github.com/danhaywood/java-mavenmixin-surefire">"surefire" mavenmixin</a> that configures the maven surefire plugin. Integration tests include the name "IntegTest", while unit tests contain merely "Test".</p> 
          </div> 
          <div class="paragraph"> 
           <p>The module also defines its own manifest, <code>SimpleModuleManifest</code>. This is used to run Isis' own <a href="../rgmvn/rgmvn.html">maven plugin</a> to <a href="../rgmvn/rgmvn.html#_rgmvn_validate">validate</a> the domain object model (eg to detect orphaned supported methods).</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_myapp_webapp">5.2.4. myapp-webapp</h4> 
          <div class="paragraph"> 
           <p>Finally, in the <code>myapp-webapp</code> module we have the classes and configuration to package and bootstrap the application as a webapp.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Under <code>src/main/java</code> there is:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre>domainapp/
└── webapp/
    ├── DomainApplication.java
    └── welcome.html</pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>The <code>DomainApplication</code> is required to bootstrap the Wicket viewer (it is configured in <code>WEB-INF/web.xml</code>, discussed below). Within <code>DomainApplication</code> is the bootstrapping of the Wicket viewer. Internally it uses Google Guice to configure various static resources served up by Wicket:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">DomainApplication</span> <span class="directive">extends</span> IsisWicketApplication {

    <span class="directive">protected</span> Module newIsisWicketModule() {
        <span class="directive">final</span> Module isisDefaults = <span class="local-variable">super</span>.newIsisWicketModule();
        <span class="directive">final</span> Module overrides = <span class="keyword">new</span> AbstractModule() {
            <span class="annotation">@Override</span>
            <span class="directive">protected</span> <span class="type">void</span> configure() {
                ...
            }
        };
        <span class="keyword">return</span> Modules.override(isisDefaults).with(overrides);
    }
}</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>The <code>configure()</code> method is the place to change the name of the application for example, or to change the initial about and welcome messages. The text of the welcome page shown by the Wicket viewer can be found in <code>welcome.html</code>, loaded from the classpath and in the same package as <code>DomainApplication</code>.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Under <code>src/main/webapp</code> we have various resources that are used to configure the webapp, or that are served up by the running webapp:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre>about/
└── index.html
css/
└── application.css
scripts/
└── application.js
swagger-ui/
WEB-INF/
├── isis.properties
├── logging.properties
├── shiro.ini
├── translations.po
└── web.xml</pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>Most important of these is <code>WEB-INF/web.xml</code>, which bootstraps both the Wicket viewer and the Restful Objects viewer (the REST API derived from the domain object model):</p> 
          </div> 
          <div class="listingblock"> 
           <div class="title">
            web.xml
           </div> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;web-app</span> <span class="attribute-name">...</span><span class="tag">&gt;</span>
  ...
  <span class="tag">&lt;filter&gt;</span>
    <span class="tag">&lt;filter-name&gt;</span>WicketFilter<span class="tag">&lt;/filter-name&gt;</span>
    <span class="tag">&lt;filter-class&gt;</span>org.apache.wicket.protocol.http.WicketFilter<span class="tag">&lt;/filter-class&gt;</span>
    <span class="tag">&lt;init-param&gt;</span>
      <span class="tag">&lt;param-name&gt;</span>applicationClassName<span class="tag">&lt;/param-name&gt;</span>
      <span class="tag">&lt;param-value&gt;</span>domainapp.webapp.DomainApplication<span class="tag">&lt;/param-value&gt;</span>
    <span class="tag">&lt;/init-param&gt;</span>
  <span class="tag">&lt;/filter&gt;</span>
  ...
  <span class="tag">&lt;context-param&gt;</span>
    <span class="tag">&lt;param-name&gt;</span>javax.ws.rs.Application<span class="tag">&lt;/param-name&gt;</span>
    <span class="tag">&lt;param-value&gt;</span>
      org.apache.isis.viewer.restfulobjects.server.RestfulObjectsApplication
    <span class="tag">&lt;/param-value&gt;</span>
  <span class="tag">&lt;/context-param&gt;</span>
  ...
<span class="tag">&lt;/web-app&gt;</span></code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>The <code>about/index.html</code> is the page shown at the root of the package, providing links to either the Wicket viewer or to the Swagger UI. In a production application this is usually replaced with a page that does an HTTP 302 redirect to the Wicket viewer.</p> 
          </div> 
          <div class="paragraph"> 
           <p>In <code>css/application.css</code> you can use to customise CSS, typically to highlight certain fields or states. The pages generated by the Wicket viewer have plenty of CSS classes to target. You can also implement the <code>cssClass()</code> method in each domain object to provide additional CSS classes to target.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Similarly, in <code>scripts/application.js</code> you have the option to add arbitrary Javascript. JQuery is available by default.</p> 
          </div> 
          <div class="paragraph"> 
           <p>In <code>swagger-ui</code> is a copy of the Swagger 2.x UI classes, preconfigured to run against the REST API exposed by the Restful Objects viewer. This can be useful for developing custom applications, and is accessible from the initial page (served up by <code>about/index.html</code>).</p> 
          </div> 
          <div class="paragraph"> 
           <p>Finally in <code>WEB-INF</code> we have the standard <code>web.xml</code> (already briefly discussed) along with several other files:</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p><code>isis.properties</code> contains further configuration settings for Apache Isis itself.</p> 
             <div class="paragraph"> 
              <p>(As already discussed), these are in addition to the configuration properties found in various configuration properties that live alongside and that are loaded by the <code>DomainAppAppManifest</code> class. Those in the WEB-INF/isis.properties file are those that are likely to change when running the application in different environments.</p> 
             </div> </li> 
            <li> <p><code>logging.properties</code> configures log4j.</p> 
             <div class="paragraph"> 
              <p>The framework is configured to use slf4j running against log4j.</p> 
             </div> </li> 
            <li> <p><code>shiro.ini</code> configures Apache Shiro, used for security (authentication and authorisation)</p> </li> 
            <li> <p><code>web.xml</code> configures the Wicket viewer and Restful Objects viewer. It also sets up various filters for serving up static resources with caching HTTP headers.</p> </li> 
           </ul> 
          </div> 
          <div class="paragraph"> 
           <p>The webapp module’s <code>pom.xml</code> also has several tricks up its sleeve:</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p>most fundamentally, it allows the application to be packaged up as a regular <code>.war</code> file for deployment to a servlet container such as Tomcat 8.x</p> </li> 
            <li> <p>it also uses the jetty-console mavenmixin to package the application as a standalone executable JAR (with an embedded jetty container).</p> 
             <div class="paragraph"> 
              <p>The files in <code>src/main/jettyconsole</code> provide a splash image (if not run in headless mode).</p> 
             </div> </li> 
            <li> <p>the docker mavenmixin packages up the application as a docker image.</p> 
             <div class="paragraph"> 
              <p>This uses the Dockerfile residing in <code>docker/Dockerfile</code> (under <code>src/main/resources</code>).</p> 
             </div> </li> 
            <li> <p>also, the <a href="../rgmvn/rgmvn.html">Apache Isis Maven plugin</a> is also configured to generate a <a href="../rgmvn/rgmvn.html#_rgmvn_swagger">swagger</a> spec file for the entire application, in the <code>xxx-webapp</code> module</p> </li> 
           </ul> 
          </div> 
          <div class="paragraph"> 
           <p>Now you know your way around the code generated by the archetype, lets see how to build the app and run it.</p> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="__ugfun_getting-started_simpleapp-archetype_building-the-app">5.3. Building the App</h3> 
         <div class="paragraph"> 
          <p>Switch into the root directory of your newly generated app, and build your app:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="bash">cd myapp
mvn clean install</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>where <code>myapp</code> is the <code>artifactId</code> entered above.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="__ugfun_getting-started_simpleapp-archetype_running-the-app">5.4. Running the App</h3> 
         <div class="paragraph"> 
          <p>The <code>simpleapp</code> archetype generates a single WAR file, configured to run both the <a href="../ugvw/ugvw.html">Wicket viewer</a> and the <a href="../ugvro/ugvro.html">Restful Objects viewer</a>. The archetype also configures the DataNucleus/JDO Objectstore to use an in-memory HSQLDB connection.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Once you’ve built the app, you can run the WAR in a variety of ways.</p> 
         </div> 
         <div class="sect3"> 
          <h4 id="_using_mvn_jetty_plugin_2">5.4.1. Using mvn Jetty plugin</h4> 
          <div class="paragraph"> 
           <p>First, you could run the WAR in a Maven-hosted Jetty instance, though you need to <code>cd</code> into the <code>webapp</code> module:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="bash">mvn -pl webapp jetty:run</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>You can also provide a system property to change the port:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="bash">mvn -pl webapp jetty:run -D jetty.port=9090</code></pre> 
           </div> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_using_a_regular_servlet_container_2">5.4.2. Using a regular servlet container</h4> 
          <div class="paragraph"> 
           <p>You can also take the built WAR file and deploy it into a standalone servlet container such as [Tomcat](<a href="http://tomcat.apache.org" class="bare">http://tomcat.apache.org</a>). The default configuration does not require any configuration of the servlet container; just drop the WAR file into the <code>webapps</code> directory.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_using_docker">5.4.3. Using Docker</h4> 
          <div class="paragraph"> 
           <p>It’s also possible to package up the application as a docker image to run as a container.</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p>To package up the application as a docker image (specifying the docker image name as a system property):<br></p> 
             <div class="listingblock"> 
              <div class="content"> 
               <pre class="CodeRay highlight"><code data-lang="bash">mvn install -Dmavenmixin-docker -Ddocker-plugin.imageName=mycompany/myapp</code></pre> 
              </div> 
             </div> 
             <div class="paragraph"> 
              <p>Alternatively, define the <code>${docker-plugin.imageName}</code> in the <code>webapp</code> module and use simply:<br></p> 
             </div> 
             <div class="listingblock"> 
              <div class="content"> 
               <pre class="CodeRay highlight"><code data-lang="bash">mvn install -Dmavenmixin-docker</code></pre> 
              </div> 
             </div> 
             <div class="paragraph"> 
              <p>The packaged image can be viewed using <code>docker images</code>.</p> 
             </div> </li> 
            <li> <p>To run a docker image previously packaged:<br></p> 
             <div class="listingblock"> 
              <div class="content"> 
               <pre class="CodeRay highlight"><code data-lang="bash">docker container run -d -p 8080:8080 mycompany/myapp</code></pre> 
              </div> 
             </div> 
             <div class="paragraph"> 
              <p>This can then be accessed at <a href="http://localhost:8080">localhost:8080</a>.</p> 
             </div> 
             <div class="paragraph"> 
              <p>See <a href="https://github.com/danhaywood/java-mavenmixin-docker#how-to-consume">mavenmixin-docker</a> for further details on how to run docker images.</p> 
             </div> </li> 
            <li> <p>To upload the application as a docker image to <a href="https://hub.docker.com">docker hub</a> (or some other docker registry):<br></p> 
             <div class="listingblock"> 
              <div class="content"> 
               <pre class="CodeRay highlight"><code data-lang="bash">mvn -pl webapp deploy -Dmavenmixin-docker</code></pre> 
              </div> 
             </div> 
             <div class="paragraph"> 
              <p>This assumes that the <code>${docker-plugin.imageName}</code> property has been defined, <em>and</em> also that docker registry credentials have been specified in <code>~/.m2/settings.xml</code>. Once more, see <a href="https://github.com/danhaywood/java-mavenmixin-docker#how-to-configure">mavenmixin-docker</a> for further details.</p> 
             </div> </li> 
           </ul> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_from_within_the_ide_2">5.4.4. From within the IDE</h4> 
          <div class="paragraph"> 
           <p>Most of the time, though, you’ll probably want to run the app from within your IDE. The mechanics of doing this will vary by IDE; see the <a href="../dg/dg.html#_dg_ide">Developers' Guide</a> for details of setting up Eclipse or IntelliJ IDEA. Basically, though, it amounts to running <code>org.apache.isis.WebServer</code>, and ensuring that the <a href="../dg/dg.html#_dg_hints-and-tips_datanucleus-enhancer">DataNucleus enhancer</a> has properly processed all domain entities.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Here’s what the setup looks like in IntelliJ IDEA:</p> 
          </div> 
          <div class="imageblock"> 
           <div class="content"> 
            <a class="image" href="images/getting-started/simpleapp-webapp.png"><img src="images/getting-started/simpleapp-webapp.png" alt="simpleapp webapp" width="600px"></a> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>with the maven goal to run the DataNucleus enhancer (discussed in more detail <a href="../dg/dg.html#_dg_hints-and-tips_datanucleus-enhancer">here</a>) before launch defined as:</p> 
          </div> 
          <div class="imageblock"> 
           <div class="content"> 
            <a class="image" href="images/getting-started/simpleapp-webapp-before-launch.png"><img src="images/getting-started/simpleapp-webapp-before-launch.png" alt="simpleapp webapp before launch" width="600px"></a> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="__ugfun_getting-started_simpleapp-archetype_running-with-fixtures">5.5. Running with Fixtures</h3> 
         <div class="paragraph"> 
          <p>It is also possible to start the application with a pre-defined set of data; useful for demos or manual exploratory testing. This is done by specifying a <a href="../ugtst/ugtst.html#_ugtst_fixture-scripts">fixture script</a> on the command line.</p> 
         </div> 
         <div class="paragraph"> 
          <p>If you are running the app from an IDE, then you can specify the fixture script using the <code>--fixture</code> flag. The archetype provides the <code>domainapp.fixture.scenarios.RecreateSimpleObjects</code> fixture script, for example:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/getting-started/simpleapp-webapp-with-fixtures.png"><img src="images/getting-started/simpleapp-webapp-with-fixtures.png" alt="simpleapp webapp with fixtures" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Alternatively, you can run with a different <a href="../rgcms/rgcms.html#_rgcms_classes_AppManifest-bootstrapping"><code>AppManifest</code></a> using the <code>--appManifest</code> (or <code>-m</code>) flag. The archetype provides <code>domainapp.app.DomainAppAppManifestWithFixtures</code> which specifies the aforementioned <code>RecreateSimpleObjects</code> fixture.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_using_the_app">5.6. Using the App</h3> 
         <div class="paragraph"> 
          <p>The generated application is almost identical similar to that generated by <a href="#_ugfun_getting-started_helloworld-archetype">helloworld archetype</a>; a description of how to use it can be found <a href="#_ugfun_getting-started_helloworld-archetype_using-the-app">here</a>.</p> 
         </div> 
         <div class="paragraph"> 
          <p>One additional feature that the simpleapp contains over the helloworld app is a home page. This shows all domain objects (as installed by fixture scripts, described <a href="#_ugfun_getting-started_simpleapp-archetype_running-with-fixtures">above</a>).</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/getting-started/using-simple-app/030-home-page.png"><img src="images/getting-started/using-simple-app/030-home-page.png" alt="030 home page" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>It’s also possible to run fixture scripts from the app itself:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/getting-started/using-simple-app/040-run-fixture-script-menu.png"><img src="images/getting-started/using-simple-app/040-run-fixture-script-menu.png" alt="040 run fixture script menu" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Some fixture scripts may allow their default behaviour to be tweaked ((eg specify how many objects to create):</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/getting-started/using-simple-app/050-run-fixture-script-prompt.png"><img src="images/getting-started/using-simple-app/050-run-fixture-script-prompt.png" alt="050 run fixture script prompt" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>The table summarises the resultant fixtures that were run:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/getting-started/using-simple-app/060-run-fixture-script-result.png"><img src="images/getting-started/using-simple-app/060-run-fixture-script-result.png" alt="060 run fixture script result" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Navigating back to the home page shows the newly created objects:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/getting-started/using-simple-app/070-home-page.png"><img src="images/getting-started/using-simple-app/070-home-page.png" alt="070 home page" width="600px"></a> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_modifying_the_app">5.7. Modifying the App</h3> 
         <div class="paragraph"> 
          <p>Once you are familiar with the generated app, you’ll want to start modifying it. There is plenty of guidance on this site; start with this guide (fundamentals) and then look at the other guides available the main <a href="../../documentation.html">documentation</a> page.</p> 
         </div> 
         <div class="paragraph"> 
          <p>If you use IntelliJ IDEA or Eclipse, do also install the <a href="../dg/dg.html#<em>dg_ide_intellij_live-templates">live templates (for IntelliJ)</a> / <a href="../dg/dg.html#</em>dg_ide_eclipse_editor-templates">editor templates (for Eclipse)</a>; these will help you follow the Apache Isis naming conventions.</p> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_ugfun_programming-model">6. Programming Model</h2>
       <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
        <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
        <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
        <ul class="dropdown-menu">
         <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
         <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
         <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
         <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
        </ul>
       </div> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>Apache Isis works by building a metamodel of the domain objects: entities, domain services, view models and mixins. Dependent on the sort of domain object, the class methods represent both state — (single-valued) properties and (multi-valued) collections — and behaviour — actions.</p> 
        </div> 
        <div class="paragraph"> 
         <p>More specifically, both entities and view models can have properties, collections and actions, while domain services have just actions. Mixins also define only actions, though depending on their semantics they may be rendered as derived properties or collections on the domain object to which they contribute.</p> 
        </div> 
        <div class="paragraph"> 
         <p>In the automatically generated UI a property is rendered as a field. This can be either of a value type (a string, number, date, boolean etc) or can be a reference to another entity. A collection is generally rendered as a table.</p> 
        </div> 
        <div class="paragraph"> 
         <p>In order for Apache Isis to build its metamodel the domain objects must follow some conventions: what we call the <em>Apache Isis Programming Model</em>. This is just an extension of the pojo / JavaBean standard of yesteryear: properties and collections are getters/setters, while actions are simply any remaining <code>public</code> methods.</p> 
        </div> 
        <div class="paragraph"> 
         <p>Additional metamodel semantics are inferred both imperatively from <em>supporting methods</em> and declaratively from annotations.</p> 
        </div> 
        <div class="paragraph"> 
         <p>In this section we discuss the mechanics of writing domain objects that comply with Apache Isis' programming model.</p> 
        </div> 
        <div class="admonitionblock tip"> 
         <table> 
          <tbody>
           <tr> 
            <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
            <td class="content"> 
             <div class="paragraph"> 
              <p>In fact, the Apache Isis programming model is extensible; you can teach Apache Isis new programming conventions and you can remove existing ones; ultimately they amount to syntax. The only real fundamental that can’t be changed is the notion that objects consist of properties, collections and actions.</p> 
             </div> 
             <div class="paragraph"> 
              <p>You can learn more about extending Apache Isis programming model <a href="../ugbtb/ugbtb.html#_ugbtb_programming-model">here</a>.</p> 
             </div> </td> 
           </tr> 
          </tbody>
         </table> 
        </div> 
        <div class="paragraph"> 
         <p>The Apache Isis programming model uses annotations to distinguish these object types:</p> 
        </div> 
        <div class="ulist"> 
         <ul> 
          <li> <p><strong>view models</strong> are annotated either with <code>@DomainObject(nature=VIEW_MODEL)</code> or using <code>@ViewModel</code> (which is used is a matter of personal preference); the framework will automatically manage the view model’s state (properties only, not collections).<br></p> 
           <div class="paragraph"> 
            <p>Or, they can be annotated using the JAXB <code>@XmlTypeAdapter</code> annotation, which allows the view models' properties <em>and</em> collections state to be managed.</p> 
           </div> </li> 
          <li> <p><strong>domain entities</strong> that are persisted to the database (as the vast majority will) are annotated with <code>@DomainObject(nature=ENTITY)</code>. In addition such domain entities are annotated with the JDO/DataNucleus annotation of <code>@javax.jdo.annotations.PersistenceCapable</code>.<br></p> 
           <div class="paragraph"> 
            <p>In addition, if a domain entity is a proxy for state managed in an external system, or merely for some state held in-memory, then <code>@DomainObject(nature=EXTERNAL_ENTITY)</code> or <code>@DomainObject(nature=INMEMORY_ENTITY)</code> can be used.<br></p> 
           </div> 
           <div class="paragraph"> 
            <p>These entities' state is managed by the framework, in the same ways as view models. Indeed, they can additionally be annotated using <code>@XmlTypeAdapter</code> if required.</p> 
           </div> </li> 
          <li> <p><strong>mixins</strong> are annotated either with <code>@DomainObject(nature=MIXIN)</code> or using <code>@Mixin</code>. As for view models, which is used is a matter of personal preference.</p> </li> 
          <li> <p>finally, <strong>domain services</strong>` are annotated with <code>@DomainService(nature=…​)</code> where the nature is either <code>VIEW_MENU_ONLY</code> (for domain services whose actions appear on the top-level menu bars), or <code>VIEW_CONTRIBUTIONS_ONLY</code> (for domain services whose actions are contributed to entities or view models), or <code>DOMAIN</code> (for domain services whose functionality is simply for other domain objects to invoke programmatically).</p> 
           <div class="paragraph"> 
            <p>It is also possible to specify a nature of simply <code>VIEW</code>, this combining <code>VIEW_MENU_ONLY</code> and <code>VIEW_CONTRIBUTIONS_ONLY</code>. This is in fact the default, useful for initial prototyping. A final nature is <code>VIEW_REST_ONLY</code> which is for domain services whose functionality is surfaced only by the <a href="../ugvro/ugvro.html">RestfulObjects viewer</a>.</p> 
           </div> </li> 
         </ul> 
        </div> 
        <div class="paragraph"> 
         <p>You can generally recognize an Apache Isis domain class because it will be probably be annotated using <code>@DomainObject</code> and <code>@DomainService</code>.</p> 
        </div> 
        <div class="paragraph"> 
         <p>It’s worth emphasising is that domain entities and view models hold state, whereas domain services are generally stateless. If a domain service does hold state (eg the <code>Scratchpad</code> service noted above) then it should be <code>@RequestScoped</code> so that this state is short-lived and usable only within a single request.</p> 
        </div> 
        <div class="paragraph"> 
         <p>The framework also defines supplementary annotations, <code>@DomainObjectLayout</code> and <code>@DomainServiceLayout</code>. These provide hints relating to the layout of the domain object in the user interface. (Alternatively, these UI hints can be defined in a supplementary <a href="../ugvw/ugvw.html#_ugvw_layout"><code>.layout.xml</code></a> file.</p> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_programming-model_domain-entities">6.1. Domain Entities</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-entities.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-entities.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-entities.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-entities.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-entities.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>Entities are persistent domain objects, with their persistence handled by JDO/DataNucleus. As such, they are mapped to a persistent object store, typically an RDBMS, with DataNucleus taking care of both lazy loading and also the persisting of modified ("dirty") objects.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Domain entities are generally decorated with both DataNucleus and Apache Isis annotations. Let’s look at some of the most commonly-used annotations.</p> 
         </div> 
         <div class="paragraph"> 
          <p>To start with, entities are flagged as being "persistence capable", indicating how JDO/DataNucleus should manage their identity:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@javax</span>.jdo.annotations.PersistenceCapable(                                      <i class="conum" data-value="1"></i><b>(1)</b>
        identityType=IdentityType.DATASTORE,                                    <i class="conum" data-value="2"></i><b>(2)</b>
        schema = <span class="string"><span class="delimiter">"</span><span class="content">simple</span><span class="delimiter">"</span></span>,                                                      <i class="conum" data-value="3"></i><b>(3)</b>
        table = <span class="string"><span class="delimiter">"</span><span class="content">SimpleObject</span><span class="delimiter">"</span></span>
)
<span class="annotation">@javax</span>.jdo.annotations.DatastoreIdentity(                                       <i class="conum" data-value="4"></i><b>(4)</b>
        strategy=javax.jdo.annotations.IdGeneratorStrategy.IDENTITY,
        column=<span class="string"><span class="delimiter">"</span><span class="content">id</span><span class="delimiter">"</span></span>
)
<span class="annotation">@javax</span>.jdo.annotations.Version(                                                 <i class="conum" data-value="5"></i><b>(5)</b>
        strategy= VersionStrategy.DATE_TIME,
        column=<span class="string"><span class="delimiter">"</span><span class="content">version</span><span class="delimiter">"</span></span>
)
<span class="annotation">@DomainObject</span>(                                                                  <i class="conum" data-value="6"></i><b>(6)</b>
        objectType = <span class="string"><span class="delimiter">"</span><span class="content">simple.SimpleObject</span><span class="delimiter">"</span></span>
)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SimpleObject</span> { ... }</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody>
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>The <code>@PersistenceCapable</code> annotation indicates that this is an entity to DataNucleus. The DataNucleus enhancer acts on the bytecode of compiled entities, injecting lazy loading and dirty object tracking functionality. Enhanced entities end up also implementing the <code>javax.jdo.spi.PersistenceCapable</code> interface.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Indicates how identifiers for the entity are handled. Using <code>DATASTORE</code> means that a DataNucleus is responsible for assigning the value (rather than the application).</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="3"></i><b>3</b></td> 
             <td>Specifies the RDBMS database schema and table name for this entity will reside. The schema should correspond with the module in which the entity resides. The table will default to the entity name if omitted.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="4"></i><b>4</b></td> 
             <td>For entities that are using <code>DATASTORE</code> identity, indicates how the id will be assigned. A common strategy is to allow the database to assign the id, for example using an identity column or a sequence.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="5"></i><b>5</b></td> 
             <td>The <code>@Version</code> annotation is useful for optimistic locking; the strategy indicates what to store in the <code>version</code> column.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="6"></i><b>6</b></td> 
             <td>The <code>@DomainObject</code> annotation identifies the domain object to Apache Isis (not DataNucleus). It isn’t necessary to include this annotation — at least, not for entities — but it is nevertheless recommended. In particular, its strongly recommended that the <code>objectType</code> (which acts like an alias to the concrete domain class) is specified; note that it corresponds to the schema/table for DataNucleus' <code>@PersistenceCapable</code> annotation.</td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
         <div class="paragraph"> 
          <p>All domain entities will have some sort of mandatory key properties. The example below is a very simple case, where the entity is identified by a <code>name</code> property:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java">...
<span class="annotation">@javax</span>.jdo.annotations.Unique(name=<span class="string"><span class="delimiter">"</span><span class="content">SimpleObject_name_UNQ</span><span class="delimiter">"</span></span>, members = {<span class="string"><span class="delimiter">"</span><span class="content">name</span><span class="delimiter">"</span></span>}) <i class="conum" data-value="1"></i><b>(1)</b>
<span class="directive">public</span> <span class="type">class</span> <span class="class">SimpleObject</span>
             <span class="directive">implements</span> <span class="predefined-type">Comparable</span>&lt;SimpleObject&gt; {                              <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="directive">public</span> SimpleObject(<span class="directive">final</span> <span class="predefined-type">String</span> name) {                                    <i class="conum" data-value="3"></i><b>(3)</b>
        setName(name);
    }

    <span class="annotation">@javax</span>.jdo.annotations.Column(allowsNull=<span class="string"><span class="delimiter">"</span><span class="content">false</span><span class="delimiter">"</span></span>, length=<span class="integer">50</span>)                <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="annotation">@lombok</span>.Getter <span class="annotation">@lombok</span>.Setter
    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> toString() {
        <span class="keyword">return</span> ObjectContracts.toString(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">"</span><span class="content">name</span><span class="delimiter">"</span></span>);                          <i class="conum" data-value="5"></i><b>(5)</b>
    }
    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">int</span> compareTo(<span class="directive">final</span> SimpleObject other) {
        <span class="keyword">return</span> ObjectContracts.compare(<span class="local-variable">this</span>, other, <span class="string"><span class="delimiter">"</span><span class="content">name</span><span class="delimiter">"</span></span>);                    <i class="conum" data-value="2"></i><b>(2)</b>
    }
}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody>
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>DataNucleus will automatically add a unique index to the primary surrogate id (discussed above), but additional alternative keys can be defined using the <code>@Unique</code> annotation. In the example above, the "name" property is assumed to be unique.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Although not required, we strongly recommend that all entities are naturally <code>Comparable</code>. This then allows parent/child relationships to be defined using <code>SortedSet</code>s; RDBMS after all are set-oriented. The <code>ObjectContracts</code> utility class provided by Apache Isis makes it easy to implement the <code>compareTo()</code> method, but you can also just use an IDE to generate an implementation or roll your own.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="3"></i><b>3</b></td> 
             <td>Chances are that some of the properties of the entity will be mandatory, for example any properties that represent an alternate unique key to the entity. In regular Java programming we would represent this using a constructor that defines these mandatory properties, and in Apache Isis/DataNucleus we can likewise define such a constructor. When DataNucleus rehydrates domain entities from the database at runtime, it actually requires a no-arg constructor (it then sets all state reflectively). However, there is no need to provide such a no-arg constructor; it is added by the enhancer process.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="4"></i><b>4</b></td> 
             <td>The <code>name</code> property itself, using Lombok to generate the getter and setter. The <code>@Column</code> annotation specifies the length of the column in the RDBMS; this metadata is read by JDO/DataNucleus but Apache Isis itself also infers that the property is mandatory and its length from this annotation.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="5"></i><b>5</b></td> 
             <td>The <code>ObjectContracts</code> utility class also provides assistance for <code>toString()</code>, useful when debugging in an IDE.</td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
         <div class="paragraph"> 
          <p>It’s also common for domain entities to have queries annotated on them. These are used by repository domain services to query for instances of the entity:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java">...
<span class="annotation">@javax</span>.jdo.annotations.Queries({
    <span class="annotation">@javax</span>.jdo.annotations.Query(                                           <i class="conum" data-value="1"></i><b>(1)</b>
        name = <span class="string"><span class="delimiter">"</span><span class="content">findByName</span><span class="delimiter">"</span></span>,                                                <i class="conum" data-value="2"></i><b>(2)</b>
        value = <span class="string"><span class="delimiter">"</span><span class="content">SELECT </span><span class="delimiter">"</span></span>                                                   <i class="conum" data-value="3"></i><b>(3)</b>
                + <span class="string"><span class="delimiter">"</span><span class="content">FROM domainapp.modules.simple.dom.impl.SimpleObject </span><span class="delimiter">"</span></span>    <i class="conum" data-value="4"></i><b>(4)</b>
                + <span class="string"><span class="delimiter">"</span><span class="content">WHERE name.indexOf(:name) &gt;= 0 </span><span class="delimiter">"</span></span>)                        <i class="conum" data-value="5"></i><b>(5)</b>
})
...
public <span class="type">class</span> <span class="class">SimpleObject</span> { ... }</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody>
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>There may be several <code>@Query</code> annotations, nested within a <code>@Queries</code> annotation) defines queries using JDOQL.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Defines the name of the query.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="3"></i><b>3</b></td> 
             <td>The definition of the query, using JDOQL syntax.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="4"></i><b>4</b></td> 
             <td>The fully-qualified class name. Must correspond to the class on which the annotation is defined (the framework checks this automatically on bootstrapping).</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="5"></i><b>5</b></td> 
             <td>In this particular query, is an implementation of a LIKE "name%" query.</td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
         <div class="paragraph"> 
          <p>DataNucleus provides several APIs for defining queries, including entirely programmatic and type-safe APIs; but JDOQL is very similar to SQL and so easily learnt.</p> 
         </div> 
         <div class="paragraph"> 
          <p>The corresponding repository method for the above query is:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="predefined-type">List</span>&lt;SimpleObject&gt; findByName(<span class="predefined-type">String</span> name) {
    <span class="keyword">return</span> repositoryService.allMatches(                                    <i class="conum" data-value="1"></i><b>(1)</b>
            <span class="keyword">new</span> QueryDefault&lt;&gt;(SimpleObject.class,                          <i class="conum" data-value="2"></i><b>(2)</b>
                        <span class="string"><span class="delimiter">"</span><span class="content">findByName</span><span class="delimiter">"</span></span>,                                       <i class="conum" data-value="3"></i><b>(3)</b>
                        <span class="string"><span class="delimiter">"</span><span class="content">name</span><span class="delimiter">"</span></span>,                                             <i class="conum" data-value="4"></i><b>(4)</b>
                        name);
}

<span class="annotation">@javax</span>.inject.Inject
RepositoryService repositoryService;</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody>
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>The <code>RepositoryService</code> is a generic facade over the JDO/DataNucleus API, provided by the Apache Isis framework.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Specifies the class that is annotated with <code>@Query</code></td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="3"></i><b>3</b></td> 
             <td>Corresponds to the <code>@Query#name()</code> attribute</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="4"></i><b>4</b></td> 
             <td>Corresponds to the <code>:name</code> parameter in the query JDOQL string</td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
         <div class="admonitionblock tip"> 
          <table> 
           <tbody>
            <tr> 
             <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
             <td class="content"> 
              <div class="paragraph"> 
               <p>See the <a href="../ugodn/ugodn.html">DataNucleus objectstore guide</a> for further information on annotating domain entities.</p> 
              </div> </td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_programming-model_domain-services">6.2. Domain Services</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>This section looks at the programming model for writing your own domain services.</p> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_programming-model_domain-services_organizing-services">6.2.1. Organizing Services</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_organizing-services.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_organizing-services.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_organizing-services.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_organizing-services.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_organizing-services.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>In larger applications we have found it worthwhile to ensure that our domain services only act aligned with these responsibilities, employing a naming convention so that it is clear what the responsibilities of each domain service is.</p> 
          </div> 
          <div class="paragraph"> 
           <p>The application provides the <code>@DomainService(nature=…​)</code> annotation that helps distinguish some of these responsibilities:</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p><code>VIEW_MENU_ONLY</code> indicates that the actions should appear on the menu of the <a href="../ugvw/ugvw.html">Wicket viewer</a>, and as top-level actions for the REST API provided by the <a href="../ugvro/ugvro.html">Restful Objects viewer</a></p> </li> 
            <li> <p><code>DOMAIN</code> indicates that the actions are for other domain objects to invoke (either directly or indirectly through the event bus), but in any case should not be rendered at all in the UI</p> </li> 
            <li> <p><code>VIEW_REST_ONLY</code> indicates that the actions should appear in the REST API provided by the <a href="../ugvro/ugvro.html">Restful Objects viewer</a>, but not rendered by the <a href="../ugvw/ugvw.html">Wicket viewer</a>.</p> </li> 
           </ul> 
          </div> 
          <div class="paragraph"> 
           <p>There are also two other natures that should be considered "deprecated":</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p><code>VIEW_CONTRIBUTIONS_ONLY</code> which indicates that the actions should be contributed as actions to its action parameters.<br></p> 
             <div class="paragraph"> 
              <p>This feature is deprecated because <a href="../ugfun/ugfun.html#_ugfun_building-blocks_types-of-domain-objects_mixins">mixins</a> are equivalent in functionality with a simpler programming model.</p> 
             </div> </li> 
            <li> <p><code>VIEW</code> combines both <code>VIEW_MENU_ONLY</code> and the deprecated <code>VIEW_CONTRIBUTIONS_ONLY</code>.</p> </li> 
           </ul> 
          </div> 
          <div class="paragraph"> 
           <p>If the domain service nature is not specified (or is left to its default, <code>VIEW</code>), then the service’s actions will appear in the UI.</p> 
          </div> 
          <div class="paragraph"> 
           <p>While for long-term maintainability we do recommend the naming conventions described <a href="../ugfun/ugfun.html#__ugfun_building-blocks_domain-services_organizing-services">above</a>, you can get away with far fewer services when just prototyping a domain. Later on it is easy enough to refactor the code to tease apart the different responsibilities.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Pulling all the above together, here are our suggestions as to how you should organize your domain services.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_programming-model_domain-services_repository-and-factory">6.2.2. Repository and Factory</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_repository-and-factory.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_repository-and-factory.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_repository-and-factory.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_repository-and-factory.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_repository-and-factory.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>The repository/factory uses an injected <a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-api_RepositoryService"><code>RepositoryService</code></a> to both instantiate new objects and to query the database for existing objects of a given entity type. It is not visible in UI, rather other services delegate to it.</p> 
          </div> 
          <div class="paragraph"> 
           <p>We suggest naming such classes <code>XxxRepository</code>, eg:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainService</span>(
    nature=NatureOfService.DOMAIN                               <i class="conum" data-value="1"></i><b>(1)</b>
)
<span class="directive">public</span> CustomerRepository {
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;Customer&gt; findByName(<span class="predefined-type">String</span> name) {
        <span class="keyword">return</span> repositoryService.allMatches(                    <i class="conum" data-value="2"></i><b>(2)</b>
                <span class="keyword">new</span> QueryDefault&lt;&gt;(Customer.class,
                            <span class="string"><span class="delimiter">"</span><span class="content">findByName</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">name</span><span class="delimiter">"</span></span>, name);
    }
    <span class="directive">public</span> Customer newCustomer(...) {
        Customer Customer =
            repositoryService.instantiate(Customer.class);      <i class="conum" data-value="3"></i><b>(3)</b>
        ...
        repositoryService.persist(Customer);                    <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="keyword">return</span> Customer;
    }
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;Customer&gt; allCustomers() {
        <span class="keyword">return</span> repositoryService.allInstances(Customer.class);
    }
    <span class="annotation">@Inject</span>
    RepositoryService repositoryService;
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody>
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>interacted with only programmatically by other objects in the domain layer.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>uses injected <code>RepositoryService</code> to query via JDOQL.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>uses injected <code>RepositoryService</code> to first instantiate and then save into the database a new <code>Customer</code> instance.</td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="paragraph"> 
           <p>There is no need to annotate the actions; they are implicitly hidden because of the domain service’s nature.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_programming-model_domain-services_menu">6.2.3. Menu</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_menu.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_menu.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_menu.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_menu.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_menu.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>Menu services provide actions to be rendered on the menu.</p> 
          </div> 
          <div class="paragraph"> 
           <p>For the Wicket viewer, each service’s actions appear as a collection of menu items of a named menu, and this menu is on one of the three menu bars provided by the Wicket viewer. It is possible for more than one menu service’s actions to appear on the same menu; a separator is shown between each.</p> 
          </div> 
          <div class="paragraph"> 
           <p>For the Restful Objects viewer, all menu services are shown in the services representation.</p> 
          </div> 
          <div class="paragraph"> 
           <p>We suggest naming such classes <code>XxxMenu</code>, eg:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainService</span>(                                                 <i class="conum" data-value="1"></i><b>(1)</b>
    nature = NatureOfService.VIEW_MENU_ONLY
)
<span class="annotation">@DomainServiceLayout</span>(                                           <i class="conum" data-value="2"></i><b>(2)</b>
        named = <span class="string"><span class="delimiter">"</span><span class="content">Customers</span><span class="delimiter">"</span></span>,
        menuBar = DomainServiceLayout.MenuBar.PRIMARY,
        menuOrder = <span class="string"><span class="delimiter">"</span><span class="content">10</span><span class="delimiter">"</span></span>
)
<span class="directive">public</span> <span class="type">class</span> <span class="class">CustomerMenu</span> {

    <span class="annotation">@Action</span>(
            semantics = SemanticsOf.SAFE
    )
    <span class="annotation">@ActionLayout</span>(bookmarking = BookmarkPolicy.AS_ROOT)
    <span class="annotation">@MemberOrder</span>( sequence = <span class="string"><span class="delimiter">"</span><span class="content">1</span><span class="delimiter">"</span></span> )
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;Customer&gt; findByName(                           <i class="conum" data-value="3"></i><b>(3)</b>
            <span class="annotation">@ParameterLayout</span>(named=<span class="string"><span class="delimiter">"</span><span class="content">Name</span><span class="delimiter">"</span></span>)                      <i class="conum" data-value="4"></i><b>(4)</b>
            <span class="directive">final</span> <span class="predefined-type">String</span> name
    ) {
        <span class="keyword">return</span> customerRepository.findByName(name);             <i class="conum" data-value="5"></i><b>(5)</b>
    }

    <span class="annotation">@Action</span>(
            semantics = SemanticsOf.NON_IDEMPOTENT
    )
    <span class="annotation">@MemberOrder</span>( sequence = <span class="string"><span class="delimiter">"</span><span class="content">3</span><span class="delimiter">"</span></span> )
    <span class="directive">public</span> Customer newCustomer(...) {
        <span class="keyword">return</span> customerRepository.newCustomer(...);
    }

    <span class="annotation">@Action</span>(
            semantics = SemanticsOf.SAFE,
            restrictTo = RestrictTo.PROTOTYPING                 <i class="conum" data-value="6"></i><b>(6)</b>
    )
    <span class="annotation">@MemberOrder</span>( sequence = <span class="string"><span class="delimiter">"</span><span class="content">99</span><span class="delimiter">"</span></span> )
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;Customer&gt; listAll() {
        <span class="keyword">return</span> customerRepository.listAll();
    }

    <span class="annotation">@Inject</span>
    <span class="directive">protected</span> CustomerRepository customerRepository;            <i class="conum" data-value="4"></i><b>(4)</b>
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody>
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>The (Apache Isis) <a href="../rgant/rgant.html#_rgant_DomainService"><code>@DomainService</code></a> annotation is used to identify the class as a domain service. Apache Isis scans the classpath looking for classes with this annotation, so there very little configuration other than to tell the framework which packages to scan underneath. The <code>VIEW_MENU_ONLY</code> nature indicates that this service’s actions should be exposed as menu items.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>The <a href="../rgant/rgant.html#_rgant_DomainServiceLayout"><code>@DomainServiceLayout</code></a> annotation provides UI hints. The menu is named "Customers" (otherwise it would have defaulted to "Customer Menu", based on the class name, while the <a href="../rgant/rgant.html#_rgant_DomainServiceLayout_menuOrder"><code>menuOrder</code></a> attribute determines the order of the menu with respect to other menu services.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>The <code>findByName</code> method is annotated with various Apache Isis annotations (<a href="../rgant/rgant.html#_rgant_Action"><code>@Action</code></a>, <a href="../rgant/rgant.html#_rgant_ActionLayout"><code>@ActionLayout</code></a> and <a href="../rgant/rgant.html#_rgant_MemberOrder"><code>@MemberOrder</code></a> and is itself rendered in the UI as a "Find By Name" menu item underneath the "Simple Objects" menu.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>The <a href="../rgant/rgant.html#_rgant_ParameterLayout"><code>@ParameterLayout</code></a> provides metadata for the parameter itself, in this case its name.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="5"></i><b>5</b></td> 
              <td>the action implementation delegates to an injected repository. The framework can inject into not just other domain services but will also automatically into domain entities and view models. There is further discussion of service injection <a href="../ugfun/ugfun.html#_ugfun_programming-model_inject-services">below</a>.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="6"></i><b>6</b></td> 
              <td><a href="../rgant/rgant.html#_rgant_Action_restrictTo">Prototype</a> actions are rendered only in prototyping mode. A "list all" action such as this can be useful when exploring the domain with a small dataset.</td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="admonitionblock tip"> 
           <table> 
            <tbody>
             <tr> 
              <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
              <td class="content"> 
               <div class="paragraph"> 
                <p>Annotating action parameters with <a href="../rgant/rgant.html#_rgant_ParameterLayout_named"><code>@ParameterLayout#named()</code></a> can become somewhat tiresome. You can avoid doing this by configuring the (non-ASF) <a href="http://platform.incode.org" target="_blank">Incode Platform</a>'s paraname8 metamodel extension.</p> 
               </div> </td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="paragraph"> 
           <p>Not every action on the repository need to be delegated to of course (the above example does but only because it is very simple).</p> 
          </div> 
          <div class="admonitionblock tip"> 
           <table> 
            <tbody>
             <tr> 
              <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
              <td class="content"> 
               <div class="paragraph"> 
                <p>While there’s nothing to stop <code>VIEW_MENU</code> domain services being injected into other domain objects and interacted with programmatically, we recommend against it. Instead, inject the underlying repository. If there is additional business logic, then consider introducing a further <code>DOMAIN</code>-scoped service and call that instead.</p> 
               </div> </td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_programming-model_domain-services_event-subscribers">6.2.4. Event Subscribers</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_event-subscribers.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_event-subscribers.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_event-subscribers.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_event-subscribers.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_event-subscribers.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>Domain services acting as event subscribers can subscribe to <a href="../ugfun/ugfun.html#_ugfun_building-blocks_events_domain-events">domain</a>, <a href="../ugfun/ugfun.html#_ugfun_building-blocks_events_ui-events">UI</a> and <a href="../ugfun/ugfun.html#_ugfun_building-blocks_events_lifecycle-events">lifecycle</a> events, influencing the rendering and behaviour of other objects.</p> 
          </div> 
          <div class="paragraph"> 
           <p>All subscribers must subscribe to the <a href="../rgsvc/rgsvc.html#_rgsvc_core-domain-api_EventBusService"><code>EventBusService</code></a>; as this amounts to a few lines of boilerplate it’s easiest to inherit from the convenience <code>AbstractSubscriber</code> class.</p> 
          </div> 
          <div class="paragraph"> 
           <p>We suggest naming such classes <code>XxxSubscriptions</code>, for example:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainService</span>(
    nature=NatureOfService.DOMAIN                               <i class="conum" data-value="1"></i><b>(1)</b>
)
<span class="annotation">@DomainServiceLayout</span>(
    menuOrder=<span class="string"><span class="delimiter">"</span><span class="content">10</span><span class="delimiter">"</span></span>,
    name=<span class="string"><span class="delimiter">"</span><span class="content">...</span><span class="delimiter">"</span></span>,
}
<span class="directive">public</span> <span class="type">class</span> <span class="class">CustomerOrderSubscriptions</span>
                    <span class="directive">extends</span> AbstractSubscriber {                <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="annotation">@org</span>.axonframework.eventhandling.annotation.EventHandler    <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="annotation">@com</span>.google.common.eventbus.Subscribe                       <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="directive">public</span> <span class="type">void</span> on(<span class="directive">final</span> Customer.DeletedEvent ev) {            <i class="conum" data-value="4"></i><b>(4)</b>
        Customer customer = ev.getSource();
        orderRepository.delete(customer);
    }

    <span class="annotation">@Inject</span>
    OrderRepository orderRepository;
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody>
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>subscriptions do not appear in the UI at all, so should use the domain nature of service</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>subclass from the <code>AbstractSubscriber</code> convenience superclass</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>The framework supports two different implementations for the <a href="../rgsvc/rgsvc.html#_rgsvc_core-domain-api_EventBusService"><code>EventBusService</code></a> - Axon framework and Guava. Subscribers should use the appropriate annotation type depending on the implementation chosen (or as shown here, use both annotations).</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>the parameter type of the method corresponds to the event emitted on the event bus. The actual method name does not matter (though it must have <code>public</code> visibility).</td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_programming-model_domain-services_contributions">6.2.5. Contributions (deprecated)</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_contributions.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_contributions.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_contributions.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_contributions.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_contributions.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>Services can contribute either actions, properties or collections, based on the type of their parameters.</p> 
          </div> 
          <div class="admonitionblock warning"> 
           <table> 
            <tbody>
             <tr> 
              <td class="icon"> <i class="fa icon-warning" title="Warning"></i> </td> 
              <td class="content"> 
               <div class="paragraph"> 
                <p>Contributed services should be considered a deprecated feature. Instead, contribute the behaviour using <a href="../ugfun/ugfun.html#_ugfun_building-blocks_mixins">mixins</a>.</p> 
               </div> </td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="paragraph"> 
           <p>We suggest naming such classes <code>XxxContributions</code>, eg:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainService</span>(
    nature=NatureOfService.VIEW_CONTRIBUTIONS_ONLY              <i class="conum" data-value="1"></i><b>(1)</b>
)
<span class="annotation">@DomainServiceLayout</span>(
    menuOrder=<span class="string"><span class="delimiter">"</span><span class="content">10</span><span class="delimiter">"</span></span>,
    name=<span class="string"><span class="delimiter">"</span><span class="content">...</span><span class="delimiter">"</span></span>,
}
<span class="directive">public</span> <span class="type">class</span> <span class="class">OrderContributions</span> {
    <span class="annotation">@Action</span>(semantics=SemanticsOf.SAFE)
    <span class="annotation">@ActionLayout</span>(contributed=Contributed.AS_ASSOCIATION)       <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="annotation">@CollectionLayout</span>(render=RenderType.EAGERLY)
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;Order&gt; orders(Customer customer) {              <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="keyword">return</span> container.allMatches(...);
    }

    <span class="annotation">@Inject</span>
    CustomerRepository customerRepository;
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody>
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>the service’s actions should be contributed to the entities of the parameters of those actions</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>contributed as an association, in particular as a collection because returns a <code>List&lt;T&gt;</code>.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>Only actions with a single argument can be contributed as associations</td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="paragraph"> 
           <p>More information about contributions can be found <a href="../ugfun/ugfun.html#_ugfun_how-tos_contributed-members">here</a>. More information about using contributions and mixins to keep your domain application decoupled can be found <a href="../ugfun/ugfun.html#_ugfun_building-blocks_types-of-domain-objects_mixins">here</a> and <a href="../ugfun/ugfun.html#_ugfun_programming-model_domain-services_contributions">contributed services</a>).</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_programming-model_domain-services_scoped-services">6.2.6. Scoped services</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_scoped-services.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_scoped-services.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_scoped-services.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_scoped-services.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_scoped-services.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>By default all domain services are considered to be singletons, and thread-safe.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Sometimes though a service’s lifetime is applicable only to a single request; in other words it is request-scoped.</p> 
          </div> 
          <div class="paragraph"> 
           <p>The CDI annotation <a href="../rgant/rgant.html#_rgant-RequestScoped"><code>@javax.enterprise.context.RequestScoped</code></a> is used to indicate this fact:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@javax</span>.enterprise.context.RequestScoped
<span class="directive">public</span> <span class="type">class</span> <span class="class">MyService</span> <span class="directive">extends</span> AbstractService {
    ...
}</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>The framework provides a number of request-scoped services, include a <a href="../rgsvc/rgsvc.html#_rgsvc_core-domain-api_Scratchpad"><code>Scratchpad</code></a> service query results caching through the <a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-api_QueryResultsCache"><code>QueryResultsCache</code></a>, and support for co-ordinating bulk actions through the <a href="../rgsvc/rgsvc.html#_rgsvc_application-layer-api_ActionInvocationContext"><code>ActionInvocationContext</code></a> service. See the <a href="../rgsvc/rgsvc.html">domain services</a> reference guide for further details.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_programming-model_domain-services_registering">6.2.7. Registering</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_registering.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_registering.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_registering.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_registering.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_registering.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>The easiest way to register domain services with the framework is to use an <a href="../rgcms/rgcms.html#_rgcms_classes_AppManifest-bootstrapping"><code>AppManifest</code></a>. This specifies the modules which contain <a href="../rgant/rgant.html#_rgant-DomainService"><code>@DomainService</code></a>-annotated classes.</p> 
          </div> 
          <div class="paragraph"> 
           <p>For example:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="ini">public class MyAppManifest implements AppManifest {
    public List&lt;Class&lt;?&gt;&gt; getModules() {
        return Arrays.asList(
                ToDoAppDomainModule.class,
                ToDoAppFixtureModule.class,
                ToDoAppAppModule.class,
                org.isisaddons.module.audit.AuditModule.class);
    }
    ...
}</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>will load all services in the packages underneath the four modules listed.</p> 
          </div> 
          <div class="paragraph"> 
           <p>An alternative (older) mechanism is to registered domain services in the <code>isis.properties</code> configuration file, under <code>isis.services</code> key (a comma-separated list); for example:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="ini">isis.services = com.mycompany.myapp.employee.Employees\,
                com.mycompany.myapp.claim.Claims\,
                ...</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>This will then result in the framework instantiating a single instance of each of the services listed.</p> 
          </div> 
          <div class="paragraph"> 
           <p>If all services reside under a common package, then the <code>isis.services.prefix</code> can specify this prefix:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="ini">isis.services.prefix = com.mycompany.myapp
isis.services = employee.Employees,\
                claim.Claims,\
                ...</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>This is quite rare, however; you will often want to use default implementations of domain services that are provided by the framework and so will not reside under this prefix.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Examples of framework-provided services (as defined in the applib) include clock, auditing, publishing, exception handling, view model support, snapshots/mementos, and user/application settings management; see the <a href="../rgsvc/rgsvc.html">domain services</a> reference guide for further details.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_programming-model_domain-services_initialization">6.2.8. Initialization</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_initialization.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_initialization.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_initialization.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_initialization.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_domain-services_initialization.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>Services can optionally declare lifecycle callbacks to initialize them (when the app is deployed) and to shut them down (when the app is undeployed).</p> 
          </div> 
          <div class="paragraph"> 
           <p>An Apache Isis session <em>is</em> available when initialization occurs (so services can interact with the object store, for example).</p> 
          </div> 
          <div class="paragraph"> 
           <p>The framework will call any <code>public</code> method annotated with <a href="../rgant/rgant.html#_rgant-PostConstruct"><code>@PostConstruct</code></a> with either no arguments of an argument of type <code>Map&lt;String,String&gt;</code>. In the latter case, the framework passes in the configuration (<code>isis.properties</code> and any other component-specific configuration files).</p> 
          </div> 
          <div class="paragraph"> 
           <p>Shutdown is similar; the framework will call any method annotated with <a href="../rgant/rgant.html#_rgant-PreDestroy"><code>@PreDestroy</code></a>.</p> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_programming-model_properties">6.3. Property</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_properties.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_properties.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_properties.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_properties.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_properties.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>A property is an instance variable of a domain object, of a scalar type, that holds some state about either a <a href="../ugfun/ugfun.html#<em>ugfun_programming-model_class-definition_entities">domain entity</a> or a <a href="../ugfun/ugfun.html#</em>ugfun_programming-model_class-definition_view-models">view model</a>.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For example, a <code>Customer</code>'s <code>firstName</code> would be a property, as would their <code>accountCreationDate</code> that they created their account. All properties have at least a "getter" method, and most properties have also a "setter" method (meaning that they are mutable). Properties that do <em>not</em> have a setter method are derived properties, and so are not persisted.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Formally speaking, a property is simply a regular JavaBean getter, returning a scalar value recognized by the framework. Most properties (those that are editable/modifiable) will also have a setter and (if persisted) a backing instance field. And most properties will also have a number of annotations:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p>Apache Isis defines its own set own <code>@Property</code> annotation for capturing domain semantics. It also provides a <code>@PropertyLayout</code> for UI hints (though the information in this annotation may instead be provided by a supplementary <a href="../ugvw/ugvw.html#_ugvw_layout"><code>.layout.xml</code></a> file</p> </li> 
           <li> <p>the properties of domain entities are often annotated with the JDO/DataNucleus <code>@javax.jdo.annotations.Column</code> annotation. For property references, there may be other annotations to indicate whether the reference is bidirectional. It’s also possible (using annotations) to define a link table to hold foreign key columns.</p> </li> 
           <li> <p>for the properties of view models, then JAXB annotations such as <code>@javax.xml.bind.annotation.XmlElement</code> will be present</p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>Apache Isis recognises some of these annotations for JDO/DataNucleus and JAXB and infers some domain semantics from them (for example, the maximum allowable length of a string property).</p> 
         </div> 
         <div class="paragraph"> 
          <p>Since writing getter and setter methods adds quite a bit of boilerplate, it’s common to use <a href="https://projectlombok.org/">Project Lombok</a> to code generate these methods at compile time (using Java’s annotation processor) simply by adding the <code>@lombok.Getter</code> and <code>@lombok.Setter</code> annotations to the field. The <a href="#_ugfun_getting-started_helloworld-archetype">HelloWorld</a> and <a href="#_ugfun_getting-started_simpleapp-archetype">SimpleApp</a> archetypes use this approach.</p> 
         </div> 
         <div class="sect3"> 
          <h4 id="__ugfun_programming-model_properties_value-vs-reference-types">6.3.1. Value vs Reference Types</h4> 
          <div class="paragraph"> 
           <p>Properties can be either a value type (strings, int, date and so on) or be a reference to another object (for example, an <code>Order</code> referencing the <code>Customer</code> that placed it).</p> 
          </div> 
          <div class="paragraph"> 
           <p>For example, to map a string value type:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@lombok</span>.Getter <span class="annotation">@lombok</span>.Setter       <i class="conum" data-value="1"></i><b>(1)</b>
<span class="directive">private</span> <span class="predefined-type">String</span> notes;</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody>
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>using <a href="https://projectlombok.org/">Project Lombok</a> annotations to reduce boilerplate</td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="paragraph"> 
           <p>You could also add the <code>@Property</code> annotation if you wished:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Property</span>
<span class="annotation">@lombok</span>.Getter <span class="annotation">@lombok</span>.Setter
<span class="directive">private</span> <span class="predefined-type">String</span> notes;</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>Although in this case it is not required (none of its attributes have been set).</p> 
          </div> 
          <div class="paragraph"> 
           <p>Or to map a reference type:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@lombok</span>.Getter <span class="annotation">@lombok</span>.Setter
<span class="directive">private</span> Customer customer;</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>It’s ok for a <a href="../ugfun/ugfun.html#<em>ugfun_programming-model_class-definition_entities">domain entity</a> to reference another domain entity, and for a <a href="../ugfun/ugfun.html#</em>ugfun_programming-model_class-definition_view-models">view model</a> to reference both view model and domain entities. However, it isn’t valid for a domain entity to hold a persisted reference to view model (DataNucleus will not know how to persist that view model).</p> 
          </div> 
          <div class="admonitionblock note"> 
           <table> 
            <tbody>
             <tr> 
              <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
              <td class="content"> 
               <div class="paragraph"> 
                <p>For further details on mapping associations, see the JDO/DataNucleus documentation for <a href="http://www.datanucleus.org/products/accessplatform_4_1/jdo/orm/one_to_many.html">one-to-many</a> associations, <a href="http://www.datanucleus.org/products/accessplatform_4_1/jdo/orm/many_to_one.html">many-to-one</a> associations, <a href="http://www.datanucleus.org/products/accessplatform_4_1/jdo/orm/many_to_many.html">many-to-many</a> associations, and so on.</p> 
               </div> </td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="paragraph"> 
           <p>For domain entities, the annotations for mapping value types tend to be different for properties vs action parameters, because JDO annotations are only valid on properties. The table in the <a href="../ugfun/ugfun.html#_ugfun_programming-model_properties-vs-parameters">Properties vs Parameters</a> section provides a handy reference of each.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="__ugfun_programming-model_properties_optional-properties">6.3.2. Optional Properties</h4> 
          <div class="paragraph"> 
           <p>(For domain entities) JDO/DataNucleus' default is that a property is assumed to be mandatory if it is a primitive type (eg <code>int</code>, <code>boolean</code>), but optional if a reference type (eg <code>String</code>, <code>BigDecimal</code> etc). To override optionality in JDO/DataNucleus the <code>@Column(allowsNull="…​")</code> annotations is used.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Apache Isis on the other hand assumes that all properties (and action parameters, for that matter) are mandatory, not optional. These defaults can also be overridden using Apache Isis' own annotations, specifically <code>@Property(optionality=…​)</code>, or (because it’s much less verbose) using <code>@javax.annotation.Nullable</code>.</p> 
          </div> 
          <div class="paragraph"> 
           <p>These different defaults can lead to incompatibilities between the two frameworks. To counteract that, Apache Isis also recognizes and honours JDO’s <code>@Column(allowsNull=…​)</code>.</p> 
          </div> 
          <div class="paragraph"> 
           <p>For example, you can write:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@javax</span>.jdo.annotations.Column(allowsNull=<span class="string"><span class="delimiter">"</span><span class="content">true</span><span class="delimiter">"</span></span>)
<span class="annotation">@lombok</span>.Getter <span class="annotation">@lombok</span>.Setter
<span class="directive">private</span> LocalDate date;</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>rather than the more verbose:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@javax</span>.jdo.annotations.Column(allowsNull=<span class="string"><span class="delimiter">"</span><span class="content">true</span><span class="delimiter">"</span></span>)
<span class="annotation">@Property</span>(optionality=Optionality.OPTIONAL)
<span class="annotation">@lombok</span>.Getter <span class="annotation">@lombok</span>.Setter
<span class="directive">private</span> LocalDate date;</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>The framework will search for any incompatibilities in optionality (whether specified explicitly or defaulted implicitly) between Isis' defaults and DataNucleus, and refuse to boot if any are found (fail fast).</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="__ugfun_programming-model_properties_editable-properties">6.3.3. Editable Properties</h4> 
          <div class="paragraph"> 
           <p>Apache Isis provides the capability to allow individual properties to be modified. This is specified using the <code>@Property(editing=…​)</code> attribute.</p> 
          </div> 
          <div class="paragraph"> 
           <p>For example:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Property</span>(editing = Editing.ENABLED)
<span class="annotation">@lombok</span>.Getter <span class="annotation">@lombok</span>.Setter
<span class="directive">private</span> <span class="predefined-type">String</span> notes;</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>If this is omitted then whether editing is enabled or disabled is defined globally, in the <code>isis.properties</code> configuration file; see <a href="../rgcfg/rgcfg.html#__rgcfg_configuring-core_isis-objects-editing">reference configuration guide</a> for further details.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="__ugfun_programming-model_properties_ignoring-properties">6.3.4. Ignoring Properties</h4> 
          <div class="paragraph"> 
           <p>By default Apache Isis will automatically render all properties in the <a href="../ugvw/ugvw.html">Wicket UI</a> or in the <a href="#../ugvro/ugvro.adoc">REST API</a>. To get Apache Isis to ignore a property (exclude it from its metamodel), annotate the getter using <code>@Programmatic</code>.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Similarly, you can tell JDO/DataNucleus to ignore a property using the <code>@javax.jdo.annotations.NotPersistent</code> annotation. This is independent of Apache Isis; in other words that property will still be rendered in the UI (unless also annotated with <code>@Programmatic</code>).</p> 
          </div> 
          <div class="paragraph"> 
           <p>For view models, you can tell JAXB to ignore a property using the <code>@javax.xml.bind.annotation.XmlTransient</code> annotation. Again, this is independent of Apache Isis.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="__ugfun_programming-model_properties_derived-properties">6.3.5. Derived Properties</h4> 
          <div class="paragraph"> 
           <p>Derived properties are those with a getter but no setter. Provided that the property has not been annotated with <code>@Programmatic</code>, these will still be rendered in the UI, but they will be read-only (not editable) and their state will not be persisted.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Subtly different, it is also possible to have non-persisted but still editable properties. In this case you will need a getter and a setter, but with the getter annotated using <code>@NotPersistent</code>. The implementation of these getters and setters will most likely persist state using other properties (which might be hidden from view using <code>@Programmatic</code>).</p> 
          </div> 
          <div class="paragraph"> 
           <p>For example:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@javax</span>.jdo.annotations.NotPersistent
<span class="annotation">@Property</span>(editing=Editing.ENABLED)
<span class="directive">public</span> <span class="predefined-type">String</span> getAddress() { <span class="keyword">return</span> addressService.toAddress( getLatLong() ); }             <i class="conum" data-value="1"></i><b>(1)</b>
<span class="directive">public</span> <span class="type">void</span> setAddress(<span class="predefined-type">String</span> address) { setLatLong(addressService.toLatLong(address)); }

<span class="annotation">@javax</span>.jdo.annotations.Column
<span class="directive">private</span> <span class="predefined-type">String</span> latLong;
<span class="annotation">@Programmatic</span>
<span class="directive">public</span> <span class="predefined-type">String</span> getLatLong() { <span class="keyword">return</span> latLong; }                                              <i class="conum" data-value="2"></i><b>(2)</b>
<span class="directive">public</span> <span class="type">void</span> setLatLong(<span class="predefined-type">String</span> latLong) { <span class="local-variable">this</span>.latLong = latLong; }

<span class="annotation">@javax</span>.inject.Inject
AddressService addressService;                                                              <i class="conum" data-value="3"></i><b>(3)</b></code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody>
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>the representation of the address, in human readable form, eg "10 Downing Street, London, UK"</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>the lat/long representation of the address, eg "51.503363;-0.127625"</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>an injected service that can convert to/from address and latLong.</td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="__ugfun_programming-model_properties_datatypes">6.3.6. Data types</h4> 
          <div class="paragraph"> 
           <p>This section shows specific considerations for various datatypes, in particular how to annotate them for DataNucleus mapping to the persistence object store.</p> 
          </div> 
          <div class="sect4"> 
           <h5 id="__ugfun_programming-model_properties_datatypes_strings"><code>String</code>s (Length)</h5> 
           <div class="paragraph"> 
            <p>By default JDO/DataNucleus will map string properties to a <code>VARCHAR(255)</code>. To limit the length, use the <code>@Column(length=…​)</code> annotation.</p> 
           </div> 
           <div class="paragraph"> 
            <p>For example:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@javax</span>.jdo.annotations.Column(length=<span class="integer">50</span>)
<span class="annotation">@lombok</span>.Getter <span class="annotation">@lombok</span>.Setter
<span class="directive">private</span> <span class="predefined-type">String</span> firstName</code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>This is a good example of a case where Apache Isis infers domain semantics from the JDO annotation.</p> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="__ugfun_programming-model_properties_datatypes-joda-dates">JODA Dates</h5> 
           <div class="paragraph"> 
            <p>Isis' JDO objectstore bundles DataNucleus' <a href="http://www.datanucleus.org/documentation/products/plugins.html">built-in support</a> for Joda <code>LocalDate</code> and <code>LocalDateTime</code> datatypes, meaning that entity properties of these types will be persisted as appropriate data types in the database tables.</p> 
           </div> 
           <div class="paragraph"> 
            <p>It is, however, necessary to annotate your properties with <code>@javax.jdo.annotations.Persistent</code>, otherwise the data won’t actually be persisted. See the <a href="http://db.apache.org/jdo/field_types.html">JDO docs</a> for more details on this.</p> 
           </div> 
           <div class="paragraph"> 
            <p>Moreover, these datatypes are <em>not</em> in the default fetch group, meaning that JDO/DataNucleus will perform an additional <code>SELECT</code> query for each attribute. To avoid this extra query, the annotation should indicate that the property is in the default fetch group.</p> 
           </div> 
           <div class="paragraph"> 
            <p>For example, the <code>ToDoItem</code> (in the <a href="https://github.com/isisaddons/isis-app-todoapp">todoapp example app</a> (not ASF)) defines the <code>dueBy</code> property as follows:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@javax</span>.jdo.annotations.Persistent(defaultFetchGroup=<span class="string"><span class="delimiter">"</span><span class="content">true</span><span class="delimiter">"</span></span>)
<span class="annotation">@javax</span>.jdo.annotations.Column(allowsNull=<span class="string"><span class="delimiter">"</span><span class="content">true</span><span class="delimiter">"</span></span>)
<span class="annotation">@Getter</span> <span class="annotation">@Setter</span>
<span class="directive">private</span> LocalDate dueBy;</code></pre> 
            </div> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="__ugfun_programming-model_properties_datatypes_bigdecimals"><code>BigDecimal</code>s (Precision)</h5> 
           <div class="paragraph"> 
            <p>Working with <code>java.math.BigDecimal</code> properties takes a little care due to scale/precision issues.</p> 
           </div> 
           <div class="paragraph"> 
            <p>For example, suppose we have:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@lombok</span>.Getter <span class="annotation">@lombok</span>.Setter
<span class="directive">private</span> <span class="predefined-type">BigDecimal</span> impact;</code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>JDO/DataNucleus creates, at least with HSQL, the table with the field type as NUMERIC(19). No decimal digits are admitted. (Further details <a href="http://hsqldb.org/doc/2.0/guide/sqlgeneral-chapt.html#sgc_numeric_types">here</a>).</p> 
           </div> 
           <div class="paragraph"> 
            <p>What this implies is that, when a record is inserted, a log entry similar to this one appears:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java">INSERT INTO ENTITY(..., IMPACT, ....) VALUES (...., <span class="float">0.5</span>, ....)</code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>But when that same record is retrieved, the log will show that a value of "0" is returned, instead of 0.5.</p> 
           </div> 
           <div class="paragraph"> 
            <p>The solution is to explicitly add the scale to the field like this:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@javax</span>.jdo.annotations.Column(scale=<span class="integer">2</span>)
<span class="annotation">@lombok</span>.Getter <span class="annotation">@lombok</span>.Setter
<span class="directive">private</span> <span class="predefined-type">BigDecimal</span> impact;</code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>In addition, you should also set the scale of the <code>BigDecimal</code>, using <code>setScale(scale, roundingMode)</code>.</p> 
           </div> 
           <div class="paragraph"> 
            <p>More information can be found <a href="http://www.opentaps.org/docs/index.php/How_to_Use_Java_BigDecimal:_A_Tutorial">here</a> and <a href="http://www.tutorialspoint.com/java/math/bigdecimal_setscale_rm_roundingmode.htm">here</a>.</p> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="__ugfun_programming-model_properties_datatypes_blobs"><code>Blob</code>s</h5> 
           <div class="paragraph"> 
            <p>Apache Isis configures JDO/DataNucleus so that the properties of type <code>org.apache.isis.applib.value.Blob</code> and <code>org.apache.isis.applib.value.Clob</code> can also be persisted.</p> 
           </div> 
           <div class="paragraph"> 
            <p>As for <a href="../ugfun/ugfun.html#__ugfun_programming-model_properties_datatypes_joda-dates">Joda dates</a>, this requires the <code>@javax.jdo.annotations.Persistent</code> annotation. However, whereas for dates one would always expect this value to be retrieved eagerly, for blobs and clobs it is not so clear cut.</p> 
           </div> 
           <div class="paragraph"> 
            <p>For example, in the <code>ToDoItem</code> class (of the <a href="https://github.com/isisaddons/isis-app-todoapp/blob/0333852ddd18ad67e3356fccf805aa442246790d/dom/src/main/java/todoapp/dom/todoitem/ToDoItem.java#L442">todoapp example app</a> (non-ASF) the <code>attachment</code> property is as follows:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@javax</span>.jdo.annotations.Persistent(defaultFetchGroup=<span class="string"><span class="delimiter">"</span><span class="content">false</span><span class="delimiter">"</span></span>, columns = {
    <span class="annotation">@javax</span>.jdo.annotations.Column(name = <span class="string"><span class="delimiter">"</span><span class="content">attachment_name</span><span class="delimiter">"</span></span>),
    <span class="annotation">@javax</span>.jdo.annotations.Column(name = <span class="string"><span class="delimiter">"</span><span class="content">attachment_mimetype</span><span class="delimiter">"</span></span>),
    <span class="annotation">@javax</span>.jdo.annotations.Column(name = <span class="string"><span class="delimiter">"</span><span class="content">attachment_bytes</span><span class="delimiter">"</span></span>, jdbcType=<span class="string"><span class="delimiter">"</span><span class="content">BLOB</span><span class="delimiter">"</span></span>, sqlType = <span class="string"><span class="delimiter">"</span><span class="content">LONGVARBINARY</span><span class="delimiter">"</span></span>)
})
<span class="annotation">@Property</span>(
        optionality = Optionality.OPTIONAL
)
<span class="annotation">@lombok</span>.Getter <span class="annotation">@lombok</span>.Setter
<span class="directive">private</span> <span class="predefined-type">Blob</span> attachment;</code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>The three <code>@javax.jdo.annotations.Column</code> annotations are required because the mapping classes that Apache Isis provides (<a href="https://github.com/apache/isis/blob/isis-1.4.0/component/objectstore/jdo/jdo-datanucleus/src/main/java/org/apache/isis/objectstore/jdo/datanucleus/valuetypes/IsisBlobMapping.java#L59">IsisBlobMapping</a> and <a href="https://github.com/apache/isis/blob/isis-1.4.0/component/objectstore/jdo/jdo-datanucleus/src/main/java/org/apache/isis/objectstore/jdo/datanucleus/valuetypes/IsisClobMapping.java#L59">IsisClobMapping</a>) map to 3 columns. (It is not an error to omit these <code>@Column</code> annotations, but without them the names of the table columns are simply suffixed <code>_0</code>, <code>_1</code>, <code>_2</code> etc.</p> 
           </div> 
           <div class="paragraph"> 
            <p>If the <code>Blob</code> is mandatory, then use:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@javax</span>.jdo.annotations.Persistent(defaultFetchGroup=<span class="string"><span class="delimiter">"</span><span class="content">false</span><span class="delimiter">"</span></span>, columns = {
    <span class="annotation">@javax</span>.jdo.annotations.Column(name = <span class="string"><span class="delimiter">"</span><span class="content">attachment_name</span><span class="delimiter">"</span></span>, allowsNull=<span class="string"><span class="delimiter">"</span><span class="content">false</span><span class="delimiter">"</span></span>),
    <span class="annotation">@javax</span>.jdo.annotations.Column(name = <span class="string"><span class="delimiter">"</span><span class="content">attachment_mimetype</span><span class="delimiter">"</span></span>, allowsNull=<span class="string"><span class="delimiter">"</span><span class="content">false</span><span class="delimiter">"</span></span>),
    <span class="annotation">@javax</span>.jdo.annotations.Column(name = <span class="string"><span class="delimiter">"</span><span class="content">attachment_bytes</span><span class="delimiter">"</span></span>,
                                  jdbcType=<span class="string"><span class="delimiter">"</span><span class="content">BLOB</span><span class="delimiter">"</span></span>, sqlType = <span class="string"><span class="delimiter">"</span><span class="content">LONGVARBINARY</span><span class="delimiter">"</span></span>,
                                  allowsNull=<span class="string"><span class="delimiter">"</span><span class="content">false</span><span class="delimiter">"</span></span>)
})
<span class="annotation">@Property</span>(
    optionality = Optionality.MANDATORY
)
<span class="annotation">@lombok</span>.Getter <span class="annotation">@lombok</span>.Setter
<span class="directive">private</span> <span class="predefined-type">Blob</span> attachment;</code></pre> 
            </div> 
           </div> 
           <div class="admonitionblock note"> 
            <table> 
             <tbody>
              <tr> 
               <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
               <td class="content"> 
                <div class="paragraph"> 
                 <p>If specifying a <code>sqlType</code> of "LONGVARBINARY" does not work, try instead "BLOB". There can be differences in behaviour between JDBC drivers.</p> 
                </div> </td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="__ugfun_programming-model_properties_datatypes_clobs"><code>Clob</code>s</h5> 
           <div class="paragraph"> 
            <p>Mapping <code>Clob`s works in a very similar way to <a href="../ugfun/ugfun.html#__ugfun_programming-model_properties_datatypes_blobs"><code>Blob</code></a>s, but the `jdbcType</code> and <code>sqlType</code> attributes will, respectively, be <code>CLOB</code> and <code>LONGVARCHAR</code>:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@javax</span>.jdo.annotations.Persistent(defaultFetchGroup=<span class="string"><span class="delimiter">"</span><span class="content">false</span><span class="delimiter">"</span></span>, columns = {
    <span class="annotation">@javax</span>.jdo.annotations.Column(name = <span class="string"><span class="delimiter">"</span><span class="content">attachment_name</span><span class="delimiter">"</span></span>),
    <span class="annotation">@javax</span>.jdo.annotations.Column(name = <span class="string"><span class="delimiter">"</span><span class="content">attachment_mimetype</span><span class="delimiter">"</span></span>),
    <span class="annotation">@javax</span>.jdo.annotations.Column(name = <span class="string"><span class="delimiter">"</span><span class="content">attachment_chars</span><span class="delimiter">"</span></span>,
                                  jdbcType=<span class="string"><span class="delimiter">"</span><span class="content">CLOB</span><span class="delimiter">"</span></span>, sqlType = <span class="string"><span class="delimiter">"</span><span class="content">LONGVARCHAR</span><span class="delimiter">"</span></span>)
})
<span class="directive">private</span> <span class="predefined-type">Clob</span> doc;
<span class="annotation">@Property</span>(
    optionality = Optionality.OPTIONAL
)
<span class="directive">public</span> <span class="predefined-type">Clob</span> getDoc() {
    <span class="keyword">return</span> doc;
}
<span class="directive">public</span> <span class="type">void</span> setDoc(<span class="directive">final</span> <span class="predefined-type">Clob</span> doc) {
    <span class="local-variable">this</span>.doc = doc;
}</code></pre> 
            </div> 
           </div> 
           <div class="admonitionblock note"> 
            <table> 
             <tbody>
              <tr> 
               <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
               <td class="content"> 
                <div class="paragraph"> 
                 <p>If specifying a <code>sqlType</code> of "LONGVARCHAR" does not work, try instead "CLOB". There can be differences in behaviour between JDBC drivers.</p> 
                </div> </td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="__ugfun_programming-model_properties_datatypes_mapping-to-varbinary-or-varchar">Mapping to VARBINARY or VARCHAR</h5> 
           <div class="paragraph"> 
            <p>Instead of mapping to a sqlType of <code>LONGVARBINARY</code> (or perhaps <code>BLOB</code>), you might instead decide to map to a <code>VARBINARY</code>. The difference is whether the binary data is held "on-row" or as a pointer "off-row"; with a <code>VARBINARY</code> the data is held on-row and so you will need to specify a length.</p> 
           </div> 
           <div class="paragraph"> 
            <p>For example:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@javax</span>.jdo.annotations.Column(name = <span class="string"><span class="delimiter">"</span><span class="content">attachment_bytes</span><span class="delimiter">"</span></span>, jdbcTypr=<span class="string"><span class="delimiter">"</span><span class="content">BLOB</span><span class="delimiter">"</span></span>, sqlType = <span class="string"><span class="delimiter">"</span><span class="content">VARBINARY</span><span class="delimiter">"</span></span>, length=<span class="integer">2048</span>)</code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>The same argument applies to <code>LONGVARCHAR</code> (or <code>CLOB</code>); you could instead map to a regular <code>VARCHAR</code>:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@javax</span>.jdo.annotations.Column(name = <span class="string"><span class="delimiter">"</span><span class="content">attachment_chars</span><span class="delimiter">"</span></span>, sqlType = <span class="string"><span class="delimiter">"</span><span class="content">VARCHAR</span><span class="delimiter">"</span></span>, length=<span class="integer">2048</span>)</code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>Support and maximum allowed length will vary by database vendor.</p> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_programming-model_collections">6.4. Collections</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_collections.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_collections.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_collections.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_collections.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_collections.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>A collection is an instance variable of a domain object, of a collection type that holds references to other domain objects. For example, a <code>Customer</code> may have a collection of <code>Order</code>s).</p> 
         </div> 
         <div class="paragraph"> 
          <p>It’s ok for a <a href="../ugfun/ugfun.html#<em>ugfun_programming-model_class-definition_entities">domain entity</a> to reference another domain entity, and for a <a href="../ugfun/ugfun.html#</em>ugfun_programming-model_class-definition_view-models">view model</a> to reference both view model and domain entities. However, it isn’t valid for a domain entity to hold a persisted reference to view model (DataNucleus will not know how to persist that view model).</p> 
         </div> 
         <div class="paragraph"> 
          <p>Formally speaking, a collection is simply a regular JavaBean getter, returning a collection type (subtype of <code>java.util.Collection</code>). Most collections (those that are modifiable) will also have a setter and (if persisted) a backing instance field. And collections properties will also have a number of annotations:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p>Apache Isis defines its own set own <code>@Collection</code> annotation for capturing domain semantics. It also provides a <code>@CollectionLayout</code> for UI hints (though the information in this annotation may instead be provided by a supplementary <a href="../ugvw/ugvw.html#_ugvw_layout"><code>.layout.xml</code></a> file</p> </li> 
           <li> <p>the collections of domain entities are often annotated with various JDO/DataNucleus annotations, most notable <code>javax.jdo.annotations.Persistent</code>. This and other annotations can be used to specify if the association is bidirectional, and whether to define a link table or not to hold foreign key columns.</p> </li> 
           <li> <p>for the collections of view models, then JAXB annotations such as <code>@javax.xml.bind.annotation.XmlElementWrapper</code> and <code>@javax.xml.bind.annotation.XmlElement</code> will be present</p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>Apache Isis recognises some of these annotations for JDO/DataNucleus and JAXB and infers some domain semantics from them (for example, the maximum allowable length of a string property).</p> 
         </div> 
         <div class="paragraph"> 
          <p>Unlike <a href="../ugfun/ugfun.html#_ugfun_programming-model_properties">properties</a>, the framework (at least, the <a href="../ugvw/ugvw.html">Wicket viewer</a>) does not allow collections to be "edited". Instead, <a href="../ugfun/ugfun.html#_ugfun_programming-model_actions">action</a>s can be written that will modify the contents of the collection as a side-effect. For example, a <code>placeOrder(…​)</code> action will likely add an <code>Order</code> to the <code>Customer#orders</code> collection.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Since writing getter and setter methods adds quite a bit of boilerplate, it’s common to use <a href="https://projectlombok.org/">Project Lombok</a> to code generate these methods at compile time (using Java’s annotation processor) simply by adding the <code>@lombok.Getter</code> and <code>@lombok.Setter</code> annotations to the field.</p> 
         </div> 
         <div class="sect3"> 
          <h4 id="__ugfun_programming-model_collections_mapping-bidir-1m">6.4.1. Mapping bidir 1:m</h4> 
          <div class="paragraph"> 
           <p>Bidirectional one-to-many collections are one of the most common types of associations between two entities. In the parent object, the collection can be defined as:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">ParentObject</span>
        <span class="directive">implements</span> <span class="predefined-type">Comparable</span>&lt;ParentObject&gt;{

    <span class="annotation">@javax</span>.jdo.annotations.Persistent(
        mappedBy = <span class="string"><span class="delimiter">"</span><span class="content">parent</span><span class="delimiter">"</span></span>,                                                <i class="conum" data-value="1"></i><b>(1)</b>
        dependentElement = <span class="string"><span class="delimiter">"</span><span class="content">false</span><span class="delimiter">"</span></span>                                          <i class="conum" data-value="2"></i><b>(2)</b>
    )
    <span class="annotation">@Collection</span>                                                             <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="annotation">@lombok</span>.Getter <span class="annotation">@lombok</span>.Setter
    <span class="directive">private</span> <span class="predefined-type">SortedSet</span>&lt;ChildObject&gt; children = <span class="keyword">new</span> <span class="predefined-type">TreeSet</span>&lt;ChildObject&gt;();   <i class="conum" data-value="4"></i><b>(4)</b>

}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody>
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>indicates a bidirectional association; the foreign key pointing back to the <code>Parent</code> will be in the table for <code>ChildObject</code></td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>disable cascade delete</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>(not actually required in this case, because no attributes are set, but acts as a useful reminder that this collection will be rendered in the UI by Apache Isis)</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>uses a <code>SortedSet</code> (as opposed to some other collection type; discussion below)</td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="paragraph"> 
           <p>while in the child object you will have:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">ChildObject</span>
        <span class="directive">implements</span> <span class="predefined-type">Comparable</span>&lt;ChildObject&gt; {    <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@javax</span>.jdo.annotations.Column(
        allowsNull = <span class="string"><span class="delimiter">"</span><span class="content">false</span><span class="delimiter">"</span></span>                    <i class="conum" data-value="2"></i><b>(2)</b>
    )
    <span class="annotation">@Property</span>(editing = Editing.DISABLED)       <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="annotation">@lombok</span>.Getter <span class="annotation">@lombok</span>.Setter
    <span class="directive">private</span> ParentObject parent;
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody>
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>implements <code>Comparable</code> because is mapped using a <code>SortedSet</code></td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>mandatory; every child must reference its parent</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>cannot be edited directly</td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="paragraph"> 
           <p>Generally speaking you should use <code>SortedSet</code> for collection types (as opposed to <code>Set</code>, <code>List</code> or <code>Collection</code>). JDO/Datanucleus does support the mapping of these other types, but RDBMS are set-oriented, so using this type introduces the least friction.</p> 
          </div> 
          <div class="admonitionblock note"> 
           <table> 
            <tbody>
             <tr> 
              <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
              <td class="content"> 
               <div class="paragraph"> 
                <p>For further details on mapping associations, see the JDO/DataNucleus documentation for <a href="http://www.datanucleus.org/products/accessplatform_4_1/jdo/orm/one_to_many.html">one-to-many</a> associations, <a href="http://www.datanucleus.org/products/accessplatform_4_1/jdo/orm/many_to_one.html">many-to-one</a> associations, <a href="http://www.datanucleus.org/products/accessplatform_4_1/jdo/orm/many_to_many.html">many-to-many</a> associations, and so on.</p> 
               </div> 
               <div class="paragraph"> 
                <p>Also, while JDO/DataNucleus itself supports <code>java.util.Map</code> as a collection type, this is not supported by Apache Isis. If you do wish to use this collection type, then annotate the getter with <code>@Programmatic</code> so that it is ignored by the Apache Isis framework.</p> 
               </div> </td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_value_vs_reference_types">6.4.2. Value vs Reference Types</h4> 
          <div class="paragraph"> 
           <p>Apache Isis can (currently) only provide a UI for collections of references. While you can use DataNucleus to persist collections/arrays of value types, such properties must be annotated as <code>@Programmatic</code> so that they are ignored by Apache Isis.</p> 
          </div> 
          <div class="paragraph"> 
           <p>If you want to visualize an array of value types in Apache Isis, then one option is to wrap value in a view model, as explained <a href="../ugfun/ugfun.html#_ugbtb_hints-and-tips_simulating-collections-of-values">elsewhere</a>.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="__ugfun_programming-model_collections_derived-collections">6.4.3. Derived Collections</h4> 
          <div class="paragraph"> 
           <p>A derived collection is simply a getter (no setter) that returns a <code>java.util.Collection</code> (or subtype).</p> 
          </div> 
          <div class="paragraph"> 
           <p>While derived properties and derived collections typically "walk the graph" to associated objects, there is nothing to prevent the returned value being the result of invoking a repository (domain service) action.</p> 
          </div> 
          <div class="paragraph"> 
           <p>For example:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Customer</span> {
    ...
    public <span class="predefined-type">List</span>&lt;Order&gt; getMostRecentOrders() {
        <span class="keyword">return</span> orderRepo.findMostRecentOrders(<span class="local-variable">this</span>, <span class="integer">5</span>);
    }
}</code></pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_programming-model_actions">6.5. Actions</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_actions.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_actions.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_actions.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_actions.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_actions.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>While <a href="../ugfun/ugfun.html#_ugfun_programming-model_properties">properties</a> and <a href="../ugfun/ugfun.html#_ugfun_programming-model_collections">collections</a> define the state held by a domain object (its "know what" responsibilities), actions define the object’s behaviour (its "know how-to" responsibilities).</p> 
         </div> 
         <div class="paragraph"> 
          <p>An application whose domain objects have only/mostly "know-what" responsibilities is pretty dumb: it requires that the end-user know the business rules and doesn’t modify the state of the domain objects such that they are invalid (for example, an "end date" being before a "start date"). Such applications are often called CRUD applications (create/read/update/delete).</p> 
         </div> 
         <div class="paragraph"> 
          <p>In more complex domains, it’s not realistic/feasible to expect the end-user to have to remember all the different business rules that govern the valid states for each domain object. So instead actions allow those business rules to be encoded programmatically. An Apache Isis application doesn’t try to constrain the end-user as to way in which they interact with the user (it doesn’t attempt to define a rigid business process) but it does aim to ensure that business rule invariants are maintained, that is that business objects aren’t allowed to go into an invalid state.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For simple domain applications, you may want to start prototyping only with properties, and only later introduce actions (representing the most common business operations). But an alternative approach, recommended for more complex applications, is actually to start the application with all properties non-editable. Then, as the end-user requires the ability to modify some state, there is a context in which to ask the question "why does this state need to change?" and "are their any side-effects?" (ie, other state that changes at the same time, or other behaviour that should occur). If the state change is simple, for example just being able to correct an invalid address, or adding a note or comment, then that can probably be modelled as a simple editable property. But if the state change is more complex, then most likely an action should be used instead.</p> 
         </div> 
         <div class="sect3"> 
          <h4 id="__ugfun_programming-model_actions_defining-actions">6.5.1. Defining actions</h4> 
          <div class="paragraph"> 
           <p>Broadly speaking, actions are all the <code>public</code> methods that are not getters or setters which represent properties or collections. This is a slight simplification; there are a number of other method prefixes (such as <code>hide</code> or <code>validate</code>) that represent <a href="../ugfun/ugfun.html#_ugfun_business-rules">business rules</a>); these also not treated as actions. And, any method that are annotated with <code>@Programmatic</code> will also be excluded. But by and large, all other methods such as <code>placeOrder(…​)</code> or <code>approveInvoice(…​)</code> will be treated as actions.</p> 
          </div> 
          <div class="paragraph"> 
           <p>For example:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Action</span>(semantics=SemanticsOf.IDEMPOTENT)       <i class="conum" data-value="1"></i><b>(1)</b>
<span class="directive">public</span> ShoppingBasket addToBasket(
        Product product,
        <span class="annotation">@ParameterLayout</span>(named=<span class="string"><span class="delimiter">"</span><span class="content">Quantity</span><span class="delimiter">"</span></span>)      <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="type">int</span> quantity
        ) {
    ...
    return <span class="local-variable">this</span>;
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody>
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td><code>@Action</code> annotation is optional but used to specify additional domain semantics (such as being idempotent).</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>The names of action parameters (as rendered in the UI) will by default be the parameter types, not the paramter names. For the <code>product</code> parameter this is reasonable, but not so for the <code>quantity</code> parameter (which would by default show up with a name of "int". The <code>@ParameterLayout</code> annotation provides a UI hint to the framework.</td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="admonitionblock tip"> 
           <table> 
            <tbody>
             <tr> 
              <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
              <td class="content"> 
               <div class="paragraph"> 
                <p>The (non-ASF) <a href="http://platform.incode.org" target="_blank">Incode Platform</a>'s paraname8 metamodel extension allows the parameter name to be used in the UI, rather than the type.</p> 
               </div> </td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="__ugfun_programming-model_actions_reference-parameter-types">6.5.2. (Reference) Parameter types</h4> 
          <div class="paragraph"> 
           <p>Parameter types can be value types or reference types. In the case of primitive types, the end-user can just enter the value directly through the parameter field. In the case of reference types however (such as <code>Product</code>), a drop-down must be provided from which the end-user to select. This is done using either a supporting <a href="../rgcms/rgcms.html#_rgcms_methods_prefixes_choices"><code>choices</code></a> or <a href="../rgcms/rgcms.html#_rgcms_methods_prefixes_autoComplete"><code>autoComplete</code></a> method. The "choices" is used when there is a limited set of options, while "autoComplete" is used when there are large set of options such that the end-user must provide some characters to use for a search.</p> 
          </div> 
          <div class="paragraph"> 
           <p>For example, the <code>addToBasket(…​)</code> action shown above might well have a :</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Action</span>(semantics=SemanticsOf.IDEMPOTENT)
<span class="directive">public</span> ShoppingBasket addToBasket(
        Product product,
        <span class="annotation">@ParameterLayout</span>(named=<span class="string"><span class="delimiter">"</span><span class="content">Quantity</span><span class="delimiter">"</span></span>)
        <span class="type">int</span> quantity
        ) {
    ...
    return <span class="local-variable">this</span>;
}
<span class="directive">public</span> <span class="predefined-type">List</span>&lt;Product&gt; autoComplete0AddToBasket(              <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="annotation">@MinLength</span>(<span class="integer">3</span>)                                           <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="predefined-type">String</span> searchTerm) {
    <span class="keyword">return</span> productRepository.find(searchTerm);              <i class="conum" data-value="3"></i><b>(3)</b>
}
<span class="annotation">@javax</span>.inject.Inject
ProductRepository productRepository;</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody>
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>Supporting <code>autoComplete</code> method. The "0" in the name means that this corresponds to parameter 0 of the "addToBasket" action (ie <code>Product</code>). It is also required to return a Collection of that type.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>The <a href="../rgant/rgant.html#_rgant_MinLength"><code>@MinLength</code></a> annotation defines how many characters the end-user must enter before performing a search.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>The implementation delegates to an injected repository service. This is typical.</td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="paragraph"> 
           <p>Note that it is also valid to define "choices" and "autoComplete" for value types (such as <code>quantity</code>, above); it just isn’t as common to do so.</p> 
          </div> 
          <div class="sect4"> 
           <h5 id="__ugfun_programming-model_actions_reference-parameter-types_removing-boilerplate">Removing boilerplate</h5> 
           <div class="paragraph"> 
            <p>To save having to define an <code>autoCompleteNXxx(…​)</code> method everywhere that a reference to a particular type (such as <code>Product</code>) appears as an action parameter, it is also possible to use the <code>@DomainObject</code> annotation on <code>Product</code> itself:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainObject</span>(
    autoCompleteRepository=ProductRepository.class          <i class="conum" data-value="1"></i><b>(1)</b>
    autoCompleteAction=<span class="string"><span class="delimiter">"</span><span class="content">find</span><span class="delimiter">"</span></span>                               <i class="conum" data-value="2"></i><b>(2)</b>
)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Product</span> ... {
    ...
}</code></pre> 
            </div> 
           </div> 
           <div class="colist arabic"> 
            <table> 
             <tbody>
              <tr> 
               <td><i class="conum" data-value="1"></i><b>1</b></td> 
               <td>Whenever an action parameter requiring a <code>Product</code> is defined, provide an autoComplete drop-down automatically</td> 
              </tr> 
              <tr> 
               <td><i class="conum" data-value="2"></i><b>2</b></td> 
               <td>Use the "find" method of <code>ProductRepository</code> (rather than the default name of "autoComplete")</td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
           <div class="paragraph"> 
            <p>(As noted above), if the number of available instances of the reference type is a small number (in other words, all of which could comfortably be shown in a drop-down) then instead the <code>choicesNXxx()</code> supporting method can be used. This too can be avoided by annotating the referenced class.</p> 
           </div> 
           <div class="paragraph"> 
            <p>For example, suppose we have an action to specify the <code>PaymentMethodType</code>, where there are only 10 or so such (Visa, Mastercard, Amex, Paypal etc). We could define this as:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> Order payUsing(PaymentMethodType type) {
    ...
}</code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>where <code>PaymentMethodType</code> would be annotated using:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainObject</span>(
    bounded=<span class="predefined-constant">true</span>                            <i class="conum" data-value="1"></i><b>(1)</b>
)
<span class="directive">public</span> <span class="type">class</span> <span class="class">PaymentMethodType</span> ... {
    ...
}</code></pre> 
            </div> 
           </div> 
           <div class="colist arabic"> 
            <table> 
             <tbody>
              <tr> 
               <td><i class="conum" data-value="1"></i><b>1</b></td> 
               <td>only a small (ie "bounded") number of instances available, meaning that the framework should render all in a drop-down.</td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="__ugfun_programming-model_actions_collection-parameter-types">6.5.3. Collection Parameter types</h4> 
          <div class="paragraph"> 
           <p>Action parameters can also be collections of values (for example <code>List&lt;String&gt;</code>), or can be collections of references (such as <code>List&lt;Customer&gt;</code>).</p> 
          </div> 
          <div class="paragraph"> 
           <p>For example:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Action</span>(semantics=SemanticsOf.IDEMPOTENT)
<span class="directive">public</span> ShoppingBasket addToBasket(
        <span class="predefined-type">List</span>&lt;Product&gt; products,
        <span class="annotation">@ParameterLayout</span>(named=<span class="string"><span class="delimiter">"</span><span class="content">Quantity</span><span class="delimiter">"</span></span>) <span class="type">int</span> quantity
        ) {
    ...
    return <span class="local-variable">this</span>;
}
<span class="directive">public</span> <span class="predefined-type">List</span>&lt;Product&gt; autoComplete0AddToBasket(<span class="annotation">@MinLength</span>(<span class="integer">3</span>) <span class="predefined-type">String</span> searchTerm) {
    <span class="keyword">return</span> ...
}</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>As the example suggests, any collection parameter type must provide a way to select items, either by way of a "choices" or "autoComplete" supporting method or alternatively defined globally using <a href="../rgant/rgant.html#_rgant_DomainObject"><code>@DomainObject</code></a> on the referenced type (described <a href="../ugfun/ugfun.html#__ugfun_programming-model_actions_reference-parameter-types_removing-boilerplate">above</a>).</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="__ugfun_programming-model_actions_optional-parameters">6.5.4. Optional Parameters</h4> 
          <div class="paragraph"> 
           <p>Whereas the <a href="../ugfun/ugfun.html#__ugfun_programming-model_properties_optional-properties">optionality of properties</a> is defined using <a href="../rgant/rgant.html#_rgant_Column_allowsNull"><code>@javax.jdo.annotations.Column#allowsNull()</code></a>, that JDO annotation cannot be applied to parameter types. Instead, either the <a href="../rgant/rgant.html#_rgant_Nullable"><code>@Nullable</code></a> annotation or the <a href="../rgant/rgant.html#_rgant_Parameter_optionality"><code>@Parameter#optionality()</code></a> annotation/attribute is used.</p> 
          </div> 
          <div class="paragraph"> 
           <p>For example:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@javax</span>.jdo.annotations.Column(allowsNull=<span class="string"><span class="delimiter">"</span><span class="content">true</span><span class="delimiter">"</span></span>)                <i class="conum" data-value="1"></i><b>(1)</b>
<span class="annotation">@lombok</span>.Getter <span class="annotation">@lombok</span>.Setter
<span class="directive">private</span> LocalDate shipBy;

<span class="directive">public</span> Order invoice(
                PaymentMethodType paymentMethodType,
                <span class="annotation">@Nullable</span>                                       <i class="conum" data-value="2"></i><b>(2)</b>
                <span class="annotation">@ParameterLayout</span>(named=<span class="string"><span class="delimiter">"</span><span class="content">Ship no later than</span><span class="delimiter">"</span></span>)
                LocalDate shipBy) {
    ...
    setShipBy(shipBy)
    <span class="keyword">return</span> <span class="local-variable">this</span>;
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody>
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>Specifies the property is optional.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>Specifies the corresponding parameter is optional.</td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="paragraph"> 
           <p>See also <a href="../ugfun/ugfun.html#_ugfun_programming-model_properties-vs-parameters">properties vs parameters</a>.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="__ugfun_programming-model_actions_string-parameters">6.5.5. <code>String</code> Parameters (Length)</h4> 
          <div class="paragraph"> 
           <p>Whereas the <a href="../ugfun/ugfun.html#__ugfun_programming-model_properties_datatypes_strings">length of string properties</a> is defined using <a href="../rgant/rgant.html#_rgant_Column_length"><code>@javax.jdo.annotations.Column#length()</code></a>, that JDO annotation cannot be applied to parameter types. Instead, the <a href="../rgant/rgant.html#_rgant_Parameter_maxLength"><code>@Parameter#maxLength()</code></a> annotation/attribute is used.</p> 
          </div> 
          <div class="paragraph"> 
           <p>For example:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@javax</span>.jdo.annotations.Column(length=<span class="integer">50</span>)                <i class="conum" data-value="1"></i><b>(1)</b>
<span class="annotation">@lombok</span>.Getter <span class="annotation">@lombok</span>.Setter
<span class="directive">private</span> <span class="predefined-type">String</span> firstName;

<span class="annotation">@javax</span>.jdo.annotations.Column(length=<span class="integer">50</span>)
<span class="annotation">@lombok</span>.Getter <span class="annotation">@lombok</span>.Setter
<span class="directive">private</span> <span class="predefined-type">String</span> lastName;

<span class="directive">public</span> Customer updateName(
                <span class="annotation">@Parameter</span>(maxLength=<span class="integer">50</span>)                <i class="conum" data-value="2"></i><b>(2)</b>
                <span class="annotation">@ParameterLayout</span>(named=<span class="string"><span class="delimiter">"</span><span class="content">First name</span><span class="delimiter">"</span></span>)
                <span class="predefined-type">String</span> firstName,
                <span class="annotation">@Parameter</span>(maxLength=<span class="integer">50</span>)
                <span class="annotation">@ParameterLayout</span>(named=<span class="string"><span class="delimiter">"</span><span class="content">Last name</span><span class="delimiter">"</span></span>)
                <span class="predefined-type">String</span> lastName) {
    setFirstName(firstName);
    setLastName(lastName);
    <span class="keyword">return</span> <span class="local-variable">this</span>;
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody>
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>Specifies the property length using the JDO <a href="../rgant/rgant.html#_rgant_Column_length"><code>@Column#length()</code></a> annotation</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>Specifies the parameter length using the (Apache Isis) <a href="../rgant/rgant.html#_rgant_Parameter_maxLength"><code>@Parameter#maxLength()</code></a> annotation</td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="admonitionblock important"> 
           <table> 
            <tbody>
             <tr> 
              <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> 
              <td class="content"> 
               <div class="paragraph"> 
                <p>Incidentally, note in the above example that the new value is assigned to the properties using the setter methods; the action does not simply set the instance field directly. This is important, because it allows JDO/DataNucleus to keep track that this instance variable is "dirty" and so needs flushing to the database table before the transaction completes.</p> 
               </div> </td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="paragraph"> 
           <p>See also <a href="../ugfun/ugfun.html#_ugfun_programming-model_properties-vs-parameters">properties vs parameters</a>.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="__ugfun_programming-model_actions_bigdecimal-parameters">6.5.6. <code>BigDecimal</code>s (Precision)</h4> 
          <div class="paragraph"> 
           <p>Whereas the <a href="../ugfun/ugfun.html#__ugfun_programming-model_properties_datatypes_bigdecimals">precision of BigDecimal properties</a> is defined using <a href="../rgant/rgant.html#_rgant_Column_scale"><code>@javax.jdo.annotations.Column#scale()</code></a>, that JDO annotation cannot be applied to parameter types. Instead, the <a href="../rgant/rgant.html#_rgant_Digits_fraction"><code>@javax.validation.constraints.Digits#fraction()</code></a> annotation/attribute is used.</p> 
          </div> 
          <div class="paragraph"> 
           <p>For example:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@javax</span>.jdo.annotations.Column(scale=<span class="integer">2</span>)                              <i class="conum" data-value="1"></i><b>(1)</b>
<span class="annotation">@lombok</span>.Getter <span class="annotation">@lombok</span>.Setter
<span class="directive">private</span> <span class="predefined-type">BigDecimal</span> discountRate;

<span class="directive">public</span> Order updateDiscount(
                <span class="annotation">@javax</span>.validation.constraints.Digits(fraction=<span class="integer">2</span>)    <i class="conum" data-value="2"></i><b>(2)</b>
                <span class="annotation">@ParameterLayout</span>(named=<span class="string"><span class="delimiter">"</span><span class="content">Discount rate</span><span class="delimiter">"</span></span>)
                <span class="predefined-type">String</span> discountRate) {
    setDiscountRate(discountRate);
    <span class="keyword">return</span> <span class="local-variable">this</span>;
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody>
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>Specifies the property precision using <a href="../rgant/rgant.html#_rgant_Column_scale"><code>@Column#scale()</code></a></td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>Specifies the corresponding parameter precision using <a href="../rgant/rgant.html#_rgant_Digits_fraction"><code>@Digits#fraction()</code></a>.</td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="paragraph"> 
           <p>See also <a href="../ugfun/ugfun.html#_ugfun_programming-model_properties-vs-parameters">properties vs parameters</a>.</p> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_programming-model_inject-services">6.6. Injecting services</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_inject-services.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_inject-services.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_inject-services.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_inject-services.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_inject-services.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>Apache Isis autowires (automatically injects) domain services into each entity, as well as into the domain services themselves, using either method injection or field injection. The framework defines many additional services (such as <a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-api_RepositoryService"><code>RepositoryService</code></a>); these are injected in exactly the same manner.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Sometimes there may be multiple services that implement a single type. This is common for example for SPI service, whereby one module defines an SPI service, and other module(s) in the application implement that service. To support this, the framework also allows lists of services to be injected.</p> 
         </div> 
         <div class="paragraph"> 
          <p>When there are multiple service implementations of a given type, the framework will inject the service with highest priority, as defined through <a href="../rgant/rgant.html#_rgant_DomainService_menuOrder"><code>@DomainService#menuOrder()</code></a> (even for domain services that are not menus), lowest first. If a list of services is injected, then that list will be ordered according to <code>menuOrder</code>, again lowest first.</p> 
         </div> 
         <div class="admonitionblock note"> 
          <table> 
           <tbody>
            <tr> 
             <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
             <td class="content"> 
              <div class="paragraph"> 
               <p>Isis currently does <em>not</em> support qualified injection of services; the domain service of each type must be distinct from any other.</p> 
              </div> 
              <div class="paragraph"> 
               <p>If you find a requirement to inject two instances of type <code>SomeService</code>, say, then the work-around is to create trivial subclasses <code>SomeServiceA</code> and <code>SomeServiceB</code> and inject these instead.</p> 
              </div> </td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
         <div class="sect3"> 
          <h4 id="_field_injection">6.6.1. Field Injection</h4> 
          <div class="paragraph"> 
           <p>Field injection is recommended, using the <code>@javax.inject.Inject</code> annotation. For example:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Customer</span> {
    ...
    <span class="annotation">@javax</span>.inject.Inject
    OrderRepository orderRepository;
}</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>To inject a list of services, use:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">DocumentService</span> {
    ...
    <span class="annotation">@javax</span>.inject.Inject
    <span class="predefined-type">List</span>&lt;PaperclipFactory&gt; paperclipFactories;
}</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>We recommend using default rather than <code>private</code> visibility so that the field can be mocked out within unit tests (placed in the same package as the code under test).</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_method_injection">6.6.2. Method Injection</h4> 
          <div class="paragraph"> 
           <p>The framework also supports two forms of method injection. All that is required to inject a service into a entity/service is to provide an appropriate method or field. The name of the method does not matter, only that it is prefixed either <code>set</code> or <code>inject</code>, is public, and has a single parameter of the correct type.</p> 
          </div> 
          <div class="paragraph"> 
           <p>For example:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Customer</span> {
    <span class="directive">private</span> OrderRepository orderRepository;
    <span class="directive">public</span> <span class="type">void</span> setOrderRepository(OrderRepository orderRepository) {
        <span class="local-variable">this</span>.orderRepository = orderRepository;
    }
    ...
}</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>or alternatively, using 'inject' as the prefix:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Customer</span> {
    <span class="directive">private</span> OrderRepository orderRepository;
    <span class="directive">public</span> <span class="type">void</span> injectOrderRepository(OrderRepository orderRepository) {
        <span class="local-variable">this</span>.orderRepository = orderRepository;
    }
    ...
}</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>Lists of services can be injected in a similar manner.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Note that the method name can be anything; it doesn’t need to be related to the type being injected.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_constructor_injection">6.6.3. Constructor injection</h4> 
          <div class="paragraph"> 
           <p>Simply to note that constructor injection is <em>not</em> supported by Apache Isis (and is unlikely to be, because the JDO specification for entities requires a no-arg constructor).</p> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_programming-model_properties-vs-parameters">6.7. Properties vs Parameters</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_properties-vs-parameters.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_properties-vs-parameters.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_properties-vs-parameters.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_properties-vs-parameters.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_properties-vs-parameters.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>In many cases the value types of properties and of action parameters align. For example, a <code>Customer</code> entity might have a <code>surname</code> property, and there might also be corresponding <code>changeSurname</code>. Ideally we want the surname property and surname action parameter to use the same value type.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Since JDO/DataNucleus handles persistence, its annotations are requiredto specify semantics such as optionality or maximum length on properties. However, they cannot be applied to action parameters. It is therefore necessary to use Apache Isis' equivalent annotations for action parameters.</p> 
         </div> 
         <div class="paragraph"> 
          <p>The table below summarises the equivalence of some of the most common cases.</p> 
         </div> 
         <table class="tableblock frame-all grid-all spread"> 
          <caption class="title">
           Table 1. Comparing annotations of Properties vs Action Parameters
          </caption> 
          <colgroup> 
           <col style="width: 25%;"> 
           <col style="width: 37.5%;"> 
           <col style="width: 37.5%;"> 
          </colgroup> 
          <thead> 
           <tr> 
            <th class="tableblock halign-left valign-top">value type/semantic</th> 
            <th class="tableblock halign-left valign-top">(JDO) property</th> 
            <th class="tableblock halign-left valign-top">action parameter</th> 
           </tr> 
          </thead> 
          <tbody> 
           <tr> 
            <td class="tableblock halign-left valign-top"><p class="tableblock">string (length)</p></td> 
            <td class="tableblock halign-left valign-top"><p class="tableblock"><code>@javax.jdo.annotations.Column(length=50)</code></p></td> 
            <td class="tableblock halign-left valign-top"><p class="tableblock"><code>@javax.jdo.annotations.Parameter(maxLength=50)</code></p></td> 
           </tr> 
           <tr> 
            <td class="tableblock halign-left valign-top"><p class="tableblock">big decimal (precision)</p></td> 
            <td class="tableblock halign-left valign-top"><p class="tableblock"><code>@javax.jdo.annotations.Column(scale=2)</code></p></td> 
            <td class="tableblock halign-left valign-top"><p class="tableblock"><code>@javax.validation.constraints.Digits(fraction=2)</code></p></td> 
           </tr> 
           <tr> 
            <td class="tableblock halign-left valign-top"><p class="tableblock">optionality</p></td> 
            <td class="tableblock halign-left valign-top"><p class="tableblock"><code>@Column(allowsNull="true")</code></p></td> 
            <td class="tableblock halign-left valign-top"><p class="tableblock"><code>@Nullable</code> or <code>ParameterLayout(optionality=Optionality.OPTIONAL</code>) (also <code>@Optional</code>, now deprecated)</p></td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_programming-model_view-models">6.8. View Models</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>As described in the <a href="../ugfun/ugfun.html#_ugfun_building-blocks_types-of-domain-objects_view-models">introduction</a>, view models are domain objects like domain entities, with behaviour and state. However, unlike domain entities, their state is _not_ persisted to a database but is instead serialized into its identifier (in effect, its URL).</p> 
         </div> 
         <div class="paragraph"> 
          <p>The framework provides two main ways to implement a view model:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p>The more powerful/flexible approach is to use JAXB annotations; this allows the state of the object’s properties and also its collections.</p> </li> 
           <li> <p>The other approach is to use Apache Isis specific annotations. While (arguably) these explain the intent of the view model better, they are more restrictive: only the state of the object’s properties is serialized — collections are ignored — and not every datatype is recognized.</p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>The serialized form of these view models is therefore XML, which also enables these view models to act as DTO (useful for various integration scenarios).</p> 
         </div> 
         <div class="paragraph"> 
          <p>For these reasons we recommend that you use JAXB-style view models wherever possible. Indeed, the legacy approach for view models may be deprecated in the future.</p> 
         </div> 
         <div class="paragraph"> 
          <p>In the sections below we consider JAXB view models both as "regular" view models, and also when using them to act as DTOs.</p> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_programming-model_view-models_jaxb">6.8.1. JAXB View Models</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_jaxb.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_jaxb.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_jaxb.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_jaxb.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_jaxb.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>Here’s a typical example of a JAXB view model, to allow (certain properties of) two <code>Customer</code>s to be compared:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@XmlRootElement</span>(name = <span class="string"><span class="delimiter">"</span><span class="content">compareCustomers</span><span class="delimiter">"</span></span>)          <i class="conum" data-value="1"></i><b>(1)</b>
<span class="annotation">@XmlType</span>(
        propOrder = {                               <i class="conum" data-value="2"></i><b>(2)</b>
            <span class="string"><span class="delimiter">"</span><span class="content">customer1</span><span class="delimiter">"</span></span>,
            <span class="string"><span class="delimiter">"</span><span class="content">customer2</span><span class="delimiter">"</span></span>
        }
)
<span class="annotation">@XmlAccessorType</span>(XmlAccessType.FIELD)               <i class="conum" data-value="3"></i><b>(3)</b>
<span class="directive">public</span> <span class="type">class</span> <span class="class">CompareCustomers</span> {

    <span class="annotation">@XmlElement</span>(required = <span class="predefined-constant">true</span>)                    <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="annotation">@Getter</span> <span class="annotation">@Setter</span>
    Customer customer1;

    <span class="annotation">@XmlElement</span>(required = <span class="predefined-constant">true</span>)                    <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="annotation">@Getter</span> <span class="annotation">@Setter</span>
    Customer customer2;

    <span class="annotation">@XmlTransient</span>                                   <i class="conum" data-value="5"></i><b>(5)</b>
    <span class="directive">public</span> <span class="predefined-type">String</span> getCustomer1Name() {
        <span class="keyword">return</span> getCustomer1().getName();
    }

    <span class="annotation">@XmlTransient</span>                                   <i class="conum" data-value="5"></i><b>(5)</b>
    <span class="directive">public</span> <span class="predefined-type">String</span> getCustomer1Address() {
        <span class="keyword">return</span> getCustomer1().getAddress();
    }

    ...
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody>
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>The JAXB <code>@XmlRootElement</code> annotation indicates this is a view model to Apache Isis, which then uses JAXB to serialize the state of the view model between interactions</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>All properties of the view model must be listed using the <code>XmlType#propOrder</code> attribute.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>Specifying field accessor type allows the Lombok <code>@Getter</code> and <code>@Setter</code> annotations to be used.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>The <code>XmlElement</code> indicates the property is part of the view model’s state. For collections, the <code>@XmlElementWrapper</code> would also typically be used.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="5"></i><b>5</b></td> 
              <td>The <code>@XmlTransient</code> indicates that the property is derived and should be ignored by JAXB.</td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="paragraph"> 
           <p>Use JAXB elements such as <code>@XmlElement</code> for properties and the combination of <code>@XmlElementWrapper</code> and <code>@XmlElement</code> for collections. Properties can be ignored (for serialization) using <code>@XmlTransient</code>.</p> 
          </div> 
          <div class="paragraph"> 
           <p>The derived properties could also have been implemented using <a href="../ugfun/ugfun.html#_ugfun_building-blocks_types-of-domain-objects_mixins">mixins</a>.</p> 
          </div> 
          <div class="admonitionblock important"> 
           <table> 
            <tbody>
             <tr> 
              <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> 
              <td class="content"> 
               <div class="paragraph"> 
                <p>Be aware that all the state will become the DTO’s memento, ultimately converted into a URL-safe form, by way of the <a href="../rgsvc/rgsvc.html#_rgsvc_presentation-layer-spi_UrlEncodingService"><code>UrlEncodingService</code></a>.</p> 
               </div> 
               <div class="paragraph"> 
                <p>There are limits to the lengths of URLs, however. If the URL does exceed limits or contains invalid characters, then provide a custom implementation of <a href="../rgsvc/rgsvc.html#_rgsvc_presentation-layer-spi_UrlEncodingService"><code>UrlEncodingService</code></a> to handle the memento string in some other fashion (eg substituting it with a GUID, with the memento cached somehow on the server). a URL.</p> 
               </div> </td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="sect4"> 
           <h5 id="_ugfun_programming-model_view-models_jaxb_referencing-domain-entities">Referencing Domain Entities</h5>
           <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
            <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_jaxb_referencing-domain-entities.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
            <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
            <ul class="dropdown-menu">
             <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_jaxb_referencing-domain-entities.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
             <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_jaxb_referencing-domain-entities.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
             <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_jaxb_referencing-domain-entities.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
             <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_jaxb_referencing-domain-entities.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
            </ul>
           </div> 
           <div class="paragraph"> 
            <p>It’s quite common for view models to be "backed by" (be projections of) some underlying domain entity. For example, the <code>CompareCustomers</code> view model described above actually references two underlying <code>Customer</code> entities.</p> 
           </div> 
           <div class="paragraph"> 
            <p>It wouldn’t make sense to serialize out the state of a persistent entity (even more so when the view model is also being used as a DTO). However, the identity of the underlying entity can be well defined; Apache Isis defines the <a href="../rgcms/rgcms.html#_rgcms_schema-common">common schema</a> which defines the <code>&lt;oid-dto&gt;</code> element (and corresponding <code>OidDto</code> class): the object’s type and its identifier. This is basically a formal XML equivalent to the <code>Bookmark</code> object obtained from the <a href="../rgsvc/rgsvc.html#_rgsvc_integration-api_BookmarkService"><code>BookmarkService</code></a>.</p> 
           </div> 
           <div class="paragraph"> 
            <p>There is only one requirement to make this work: every referenced domain entity must be annotated with <a href="../rgant/rgant.html#_rgant-XmlJavaTypeAdapter"><code>@XmlJavaTypeAdapter</code></a>, specifying the framework-provided <code>PersistentEntityAdapter</code>. And this class is similar to the <a href="../rgsvc/rgsvc.html#_rgsvc_integration-api_BookmarkService"><code>BookmarkService</code></a>: it knows how to create an <code>OidDto</code> from an object reference.</p> 
           </div> 
           <div class="paragraph"> 
            <p>Thus, in our view model we can legitimately write:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">CompareCustomers</span> {

    <span class="annotation">@XmlElement</span>(required = <span class="predefined-constant">true</span>)
    <span class="annotation">@Getter</span> <span class="annotation">@Setter</span>
    Customer customer1;
    ...
}</code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>All we need to do is remember to add that <code>@XmlJavaTypeAdapter</code> annotation to the referenced entity:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@XmlJavaTypeAdapter</span>(PersistentEntityAdapter.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Customer</span> ...  {
    ...
}</code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>It’s also possible for a DTO view models to hold collections of objects. These can be of any type, either simple properties, or references to other objects. The only bit of boilerplate that is required is the <code>@XmlElementWrapper</code> annotation. This instructs JAXB to create an XML element (based on the field name) to contain each of the elements. (If this is omitted then the contents of the collection are at the same level as the properties; almost certainly not what is required).</p> 
           </div> 
           <div class="paragraph"> 
            <p>For example, we could perhaps generalize the view model to hold a set of <code>Customer</code>s to be compared:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">CompareCustomers</span> {
    ...
    <span class="annotation">@XmlElementWrapper</span>
    <span class="annotation">@XmlElement</span>(name = <span class="string"><span class="delimiter">"</span><span class="content">customers</span><span class="delimiter">"</span></span>)
    <span class="annotation">@Getter</span> <span class="annotation">@Setter</span>
    <span class="directive">protected</span> <span class="predefined-type">List</span>&lt;Customer&gt; customersToCompare = Lists.newArrayList();
}</code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>This capability is particularly useful when the JAXB view model is being used as a <a href="../ugfun/ugfun.html#_ugfun_programming-model_view-models_dto">DTO</a>.</p> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="_ugfun_programming-model_view-models_jaxb_joda-datatypes">JODA Time Datatypes</h5>
           <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
            <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_jaxb_joda-datatypes.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
            <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
            <ul class="dropdown-menu">
             <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_jaxb_joda-datatypes.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
             <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_jaxb_joda-datatypes.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
             <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_jaxb_joda-datatypes.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
             <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_jaxb_joda-datatypes.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
            </ul>
           </div> 
           <div class="paragraph"> 
            <p>If your JAXB view model contains fields using the JODA datatypes (<code>LocalDate</code> and so on), then <code>@XmlJavaTypeAdapter</code> additional annotations in order to "teach" JAXB how to serialize out the state.</p> 
           </div> 
           <div class="paragraph"> 
            <p>The Apache Isis applib provides a number of adapters to use out-of-the-box. For example:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@XmlRootElement</span>(name = <span class="string"><span class="delimiter">"</span><span class="content">categorizeIncomingInvoice</span><span class="delimiter">"</span></span>)
<span class="annotation">@XmlType</span>(
        propOrder = {
                ...
                <span class="string"><span class="delimiter">"</span><span class="content">dateReceived</span><span class="delimiter">"</span></span>,
                ...
        }
)
<span class="annotation">@XmlAccessorType</span>(XmlAccessType.FIELD)
<span class="directive">public</span> <span class="type">class</span> <span class="class">IncomingInvoiceViewModel</span> <span class="directive">extends</span> IncomingOrderAndInvoiceViewModel {

    <span class="annotation">@XmlJavaTypeAdapter</span>(JodaLocalDateStringAdapter.ForJaxb.class)
    <span class="directive">private</span> LocalDate dateReceived;

    ...
}</code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>The full list of adapter classes are:</p> 
           </div> 
           <table class="tableblock frame-all grid-all spread"> 
            <caption class="title">
             Table 2. JAXB adapters
            </caption> 
            <colgroup> 
             <col style="width: 33.3333%;"> 
             <col style="width: 66.6667%;"> 
            </colgroup> 
            <thead> 
             <tr> 
              <th class="tableblock halign-left valign-top">JODA datatype</th> 
              <th class="tableblock halign-left valign-top">Adapter</th> 
             </tr> 
            </thead> 
            <tbody> 
             <tr> 
              <td class="tableblock halign-left valign-top" rowspan="2">
               <div>
                <div class="paragraph"> 
                 <p><code>org.joda.time.DateTime</code></p> 
                </div>
               </div></td> 
              <td class="tableblock halign-left valign-top">
               <div>
                <div class="paragraph"> 
                 <p><code>JodaDateTimeStringAdapter.ForJaxb</code></p> 
                </div>
               </div></td> 
             </tr> 
             <tr> 
              <td class="tableblock halign-left valign-top">
               <div>
                <div class="paragraph"> 
                 <p><code>JodaDateTimeXMLGregorianCalendarAdapter.ForJaxb</code></p> 
                </div>
               </div></td> 
             </tr> 
             <tr> 
              <td class="tableblock halign-left valign-top" rowspan="2">
               <div>
                <div class="paragraph"> 
                 <p><code>org.joda.time.LocalDate</code></p> 
                </div>
               </div></td> 
              <td class="tableblock halign-left valign-top">
               <div>
                <div class="paragraph"> 
                 <p><code>JodaLocalDateStringAdapter.ForJaxb</code></p> 
                </div>
               </div></td> 
             </tr> 
             <tr> 
              <td class="tableblock halign-left valign-top">
               <div>
                <div class="paragraph"> 
                 <p><code>JodaLocalDateXMLGregorianCalendarAdapter.ForJaxb</code></p> 
                </div>
               </div></td> 
             </tr> 
             <tr> 
              <td class="tableblock halign-left valign-top" rowspan="2">
               <div>
                <div class="paragraph"> 
                 <p><code>org.joda.time.LocalDateTime</code></p> 
                </div>
               </div></td> 
              <td class="tableblock halign-left valign-top">
               <div>
                <div class="paragraph"> 
                 <p><code>JodaLocalDateTimeStringAdapter.ForJaxb</code></p> 
                </div>
               </div></td> 
             </tr> 
             <tr> 
              <td class="tableblock halign-left valign-top">
               <div>
                <div class="paragraph"> 
                 <p><code>JodaLocalDateTimeXMLGregorianCalendarAdapter.ForJaxb</code></p> 
                </div>
               </div></td> 
             </tr> 
             <tr> 
              <td class="tableblock halign-left valign-top" rowspan="2">
               <div>
                <div class="paragraph"> 
                 <p><code>org.joda.time.LocalTime</code></p> 
                </div>
               </div></td> 
              <td class="tableblock halign-left valign-top">
               <div>
                <div class="paragraph"> 
                 <p><code>JodaLocalTimeStringAdapter.ForJaxb</code></p> 
                </div>
               </div></td> 
             </tr> 
             <tr> 
              <td class="tableblock halign-left valign-top">
               <div>
                <div class="paragraph"> 
                 <p><code>JodaLocalTimeXMLGregorianCalendarAdapter.ForJaxb</code></p> 
                </div>
               </div></td> 
             </tr> 
             <tr> 
              <td class="tableblock halign-left valign-top">
               <div>
                <div class="paragraph"> 
                 <p><code>java.sql.Timestamp</code></p> 
                </div>
               </div></td> 
              <td class="tableblock halign-left valign-top">
               <div>
                <div class="paragraph"> 
                 <p><code>JavaSqlTimestampXmlGregorianCalendarAdapter.ForJaxb</code></p> 
                </div>
               </div></td> 
             </tr> 
            </tbody> 
           </table> 
           <div class="admonitionblock tip"> 
            <table> 
             <tbody>
              <tr> 
               <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
               <td class="content"> 
                <div class="paragraph"> 
                 <p>If you want to roll-your-own, take a look at <a href="http://blog.bdoughan.com/2011/05/jaxb-and-joda-time-dates-and-times.html">this blog post</a>.</p> 
                </div> </td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_programming-model_view-models_dto">6.8.2. DTOs</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_dto.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_dto.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_dto.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_dto.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_dto.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>JAXB view models can also be used as DTOs. The examples in this section uses the DTO for <code>ToDoItem</code>, taken from the (non-ASF) <a href="http://github.com/isisaddons/isis-app-todoapp">Isis addons' todoapp</a>.</p> 
          </div> 
          <div class="paragraph"> 
           <p>This DTO is defined as follows:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">todoapp.app.viewmodels.todoitem.v1</span>;                         <i class="conum" data-value="1"></i><b>(1)</b>
<span class="annotation">@XmlRootElement</span>(name = <span class="string"><span class="delimiter">"</span><span class="content">toDoItemDto</span><span class="delimiter">"</span></span>)                               <i class="conum" data-value="2"></i><b>(2)</b>
<span class="annotation">@XmlType</span>(
        propOrder = {                                               <i class="conum" data-value="3"></i><b>(3)</b>
            <span class="string"><span class="delimiter">"</span><span class="content">majorVersion</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">minorVersion</span><span class="delimiter">"</span></span>,
            <span class="string"><span class="delimiter">"</span><span class="content">description</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">category</span><span class="delimiter">"</span></span>, ...
            <span class="string"><span class="delimiter">"</span><span class="content">toDoItem</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">similarItems</span><span class="delimiter">"</span></span>
        }
)
<span class="annotation">@DomainObjectLayout</span>(
        titleUiEvent = TitleUiEvent.Doop.class                      <i class="conum" data-value="4"></i><b>(4)</b>
)
<span class="directive">public</span> <span class="type">class</span> <span class="class">ToDoItemV1_1</span> <span class="directive">implements</span> Dto {                          <i class="conum" data-value="5"></i><b>(5)</b>
    <span class="annotation">@XmlElement</span>(required = <span class="predefined-constant">true</span>, defaultValue = <span class="string"><span class="delimiter">"</span><span class="content">1</span><span class="delimiter">"</span></span>)                <i class="conum" data-value="6"></i><b>(6)</b>
    <span class="directive">public</span> <span class="directive">final</span> <span class="predefined-type">String</span> getMajorVersion() { <span class="keyword">return</span> <span class="string"><span class="delimiter">"</span><span class="content">1</span><span class="delimiter">"</span></span>; }
    <span class="annotation">@XmlElement</span>(required = <span class="predefined-constant">true</span>, defaultValue = <span class="string"><span class="delimiter">"</span><span class="content">1</span><span class="delimiter">"</span></span>)                <i class="conum" data-value="7"></i><b>(7)</b>
    <span class="directive">public</span> <span class="predefined-type">String</span> getMinorVersion() { <span class="keyword">return</span> <span class="string"><span class="delimiter">"</span><span class="content">1</span><span class="delimiter">"</span></span>; }

    <span class="annotation">@XmlElement</span>(required = <span class="predefined-constant">true</span>)                                    <i class="conum" data-value="8"></i><b>(8)</b>
    <span class="annotation">@Getter</span> <span class="annotation">@Setter</span>
    <span class="directive">protected</span> <span class="predefined-type">String</span> description;
    <span class="annotation">@XmlElement</span>(required = <span class="predefined-constant">true</span>)
    <span class="annotation">@Getter</span> <span class="annotation">@Setter</span>
    <span class="directive">protected</span> <span class="predefined-type">String</span> category;
    ...

    <span class="annotation">@Getter</span> <span class="annotation">@Setter</span>                                                 <i class="conum" data-value="9"></i><b>(9)</b>
    <span class="directive">protected</span> ToDoItem toDoItem;
    <span class="annotation">@XmlElementWrapper</span>                                              <i class="conum" data-value="10"></i><b>(10)</b>
    <span class="annotation">@XmlElement</span>(name = <span class="string"><span class="delimiter">"</span><span class="content">todoItem</span><span class="delimiter">"</span></span>)
    <span class="annotation">@Getter</span> <span class="annotation">@Setter</span>
    <span class="directive">protected</span> <span class="predefined-type">List</span>&lt;ToDoItem&gt; similarItems = Lists.newArrayList();
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody>
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>package name encodes major version; see discussion on <a href="../ugfun/ugfun.html#_ugfun_programming-model_view-models_dto_versioning">versioning</a></td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>identifies this class as a view model and defines the root element for JAXB serialization</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>all properties in the class must be listed; (they can be ignored using <code>@XmlTransient</code>)</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>demonstrating use of UI events for a subscriber to provide the DTO’s title; see <a href="../rgant/rgant.html#_rgant-DomainObjectLayout_titleUiEvent"><code>@DomainObjectLayout#titleUiEvent()</code></a>.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="5"></i><b>5</b></td> 
              <td>class name encodes (major and) minor version; see discussion on <a href="../ugfun/ugfun.html#_ugfun_programming-model_view-models_dto_versioning">versioning</a></td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="6"></i><b>6</b></td> 
              <td>again, see discussion on <a href="../ugfun/ugfun.html#_ugfun_programming-model_view-models_dto_versioning">versioning</a></td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="7"></i><b>7</b></td> 
              <td>again, see discussion on <a href="../ugfun/ugfun.html#_ugfun_programming-model_view-models_dto_versioning">versioning</a></td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="8"></i><b>8</b></td> 
              <td>simple scalar properties</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="9"></i><b>9</b></td> 
              <td>reference to a persistent entity; discussed <a href="../ugfun/ugfun.html#_ugfun_programming-model_view-models_jaxb_referencing-domain-entities">here</a></td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="10"></i><b>10</b></td> 
              <td>reference to a collection of persistent entities; again discussed <a href="../ugfun/ugfun.html#_ugfun_programming-model_view-models_jaxb_referencing-domain-entities">here</a></td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="sect4"> 
           <h5 id="_ugfun_programming-model_view-models_dto_versioning">Versioning</h5>
           <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
            <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_dto_versioning.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
            <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
            <ul class="dropdown-menu">
             <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_dto_versioning.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
             <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_dto_versioning.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
             <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_dto_versioning.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
             <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_dto_versioning.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
            </ul>
           </div> 
           <div class="paragraph"> 
            <p>The whole point of using DTOs (in Apache Isis, at least) is to define a formal contact between two inter-operating but independent applications. Since the only thing we can predicate about the future with any certainty is that it one or both of these applications will change, we should version DTOs from the get-go. This allows us to make changes going forward without unnecessarily breaking existing consumers of the data.</p> 
           </div> 
           <div class="admonitionblock note"> 
            <table> 
             <tbody>
              <tr> 
               <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
               <td class="content"> 
                <div class="paragraph"> 
                 <p>There are several ways that versioning might be accomplished; we base our guidelines on this <a href="http://www.xfront.com/Versioning.pdf">article</a> taken from Roger Costello’s blog, well worth a read.</p> 
                </div> </td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
           <div class="paragraph"> 
            <p>We can distinguish two types of changes:</p> 
           </div> 
           <div class="ulist"> 
            <ul> 
             <li> <p>backwardly compatible changes</p> </li> 
             <li> <p>breaking changes.</p> </li> 
            </ul> 
           </div> 
           <div class="paragraph"> 
            <p>We can immediately say that the XSD namespace should change only when there is a major/breaking change, if following <a href="http://semver.org">semantic versioning</a> that means when we bump the major version number v1, v2, etc.</p> 
           </div> 
           <div class="paragraph"> 
            <p>XML namespaces correspond (when using JAXB) to Java packages. We should therefore place our DTOs in a package that contains only the major number; this package will eventually contain a range of DTOs that are intended to be backwardly compatible with one another. The package should also have a <code>package-info.java</code>; it is this that declares the XSD namespace:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@javax</span>.xml.bind.annotation.XmlSchema(
        namespace = <span class="string"><span class="delimiter">"</span><span class="content">http://viewmodels.app.todoapp/todoitem/v1/Dto.xsd</span><span class="delimiter">"</span></span>,        <i class="conum" data-value="1"></i><b>(1)</b>
        xmlns = {
                <span class="annotation">@javax</span>.xml.bind.annotation.XmlNs(
                        namespaceURI = <span class="string"><span class="delimiter">"</span><span class="content">http://isis.apache.org/schema/common</span><span class="delimiter">"</span></span>,
                        prefix = <span class="string"><span class="delimiter">"</span><span class="content">com</span><span class="delimiter">"</span></span>
                )
        },
        elementFormDefault = javax.xml.bind.annotation.XmlNsForm.QUALIFIED
)
<span class="keyword">package</span> <span class="namespace">todoapp.app.viewmodels.todoitem.v1</span>;                                     <i class="conum" data-value="2"></i><b>(2)</b></code></pre> 
            </div> 
           </div> 
           <div class="colist arabic"> 
            <table> 
             <tbody>
              <tr> 
               <td><i class="conum" data-value="1"></i><b>1</b></td> 
               <td>the namespace URI, used by the DTO residing in this package.</td> 
              </tr> 
              <tr> 
               <td><i class="conum" data-value="2"></i><b>2</b></td> 
               <td>the package in which the DTO resides. Note that this contains only the major version.</td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
           <div class="paragraph"> 
            <p>Although there is no requirement for the namespace URI to correspond to a physical URL, it should be unique. This usually means including a company domain name within the string.</p> 
           </div> 
           <div class="paragraph"> 
            <p>As noted above, this package will contain multiple DTO classes all with the same namespace; these represent a set of minor versions of the DTO, each subsequent one intended to be backwardly compatible with the previous. Since these DTO classes will all be in the same package (as per the advice above), the class should therefore include the minor version name:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">todoapp.app.viewmodels.todoitem.v1</span>;     <i class="conum" data-value="1"></i><b>(1)</b>
...
public <span class="type">class</span> <span class="class">ToDoItemV1_1</span> <span class="directive">implements</span> Dto {      <i class="conum" data-value="2"></i><b>(2)</b>
    ...
}</code></pre> 
            </div> 
           </div> 
           <div class="colist arabic"> 
            <table> 
             <tbody>
              <tr> 
               <td><i class="conum" data-value="1"></i><b>1</b></td> 
               <td>package contains the major version only</td> 
              </tr> 
              <tr> 
               <td><i class="conum" data-value="2"></i><b>2</b></td> 
               <td>DTO class contains the (major and) minor version</td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
           <div class="paragraph"> 
            <p>We also recommend that each DTO instance should also specify the version of the XSD schema that it is logically compatible with. Probably most consumers will not persist the DTOs; they will be processed and then discarded. However, it would be wrong to assume that is the case in all cases; some consumers might choose to persist the DTO (eg for replay at some later state).</p> 
           </div> 
           <div class="paragraph"> 
            <p>Thus:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">ToDoItemV1_1</span> <span class="directive">implements</span> Dto {
    <span class="annotation">@XmlElement</span>(required = <span class="predefined-constant">true</span>, defaultValue = <span class="string"><span class="delimiter">"</span><span class="content">1</span><span class="delimiter">"</span></span>)
    <span class="directive">public</span> <span class="directive">final</span> <span class="predefined-type">String</span> getMajorVersion() { <span class="keyword">return</span> <span class="string"><span class="delimiter">"</span><span class="content">1</span><span class="delimiter">"</span></span>; }   <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="annotation">@XmlElement</span>(required = <span class="predefined-constant">true</span>, defaultValue = <span class="string"><span class="delimiter">"</span><span class="content">1</span><span class="delimiter">"</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> getMinorVersion() { <span class="keyword">return</span> <span class="string"><span class="delimiter">"</span><span class="content">1</span><span class="delimiter">"</span></span>; }         <i class="conum" data-value="2"></i><b>(2)</b>
    ...
}</code></pre> 
            </div> 
           </div> 
           <div class="colist arabic"> 
            <table> 
             <tbody>
              <tr> 
               <td><i class="conum" data-value="1"></i><b>1</b></td> 
               <td>returns the major version (in sync with the package)</td> 
              </tr> 
              <tr> 
               <td><i class="conum" data-value="2"></i><b>2</b></td> 
               <td>returns the minor version (in sync with the class name)</td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
           <div class="paragraph"> 
            <p>These methods always return a hard-coded literal. Any instances serialized from these classes will implicitly "declare" the (major and) minor version of the schema with which they are compatible. If a consumer has a minimum version that it requires, it can therefore inspect the XML instance itself to determine if it is able to consume said XML.</p> 
           </div> 
           <div class="paragraph"> 
            <p>If a new (minor) version of a DTO is required, then we recommend copying-and-pasting the previous version, eg:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">ToDoItemV1_2</span> <span class="directive">implements</span> Dto {
    <span class="annotation">@XmlElement</span>(required = <span class="predefined-constant">true</span>, defaultValue = <span class="string"><span class="delimiter">"</span><span class="content">1</span><span class="delimiter">"</span></span>)
    <span class="directive">public</span> <span class="directive">final</span> <span class="predefined-type">String</span> getMajorVersion() { <span class="keyword">return</span> <span class="string"><span class="delimiter">"</span><span class="content">1</span><span class="delimiter">"</span></span>; }
    <span class="annotation">@XmlElement</span>(required = <span class="predefined-constant">true</span>, defaultValue = <span class="string"><span class="delimiter">"</span><span class="content">2</span><span class="delimiter">"</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> getMinorVersion() { <span class="keyword">return</span> <span class="string"><span class="delimiter">"</span><span class="content">2</span><span class="delimiter">"</span></span>; }
    ...
}</code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>Obviously, only changes made must be backward compatible, eg new members must be optional.</p> 
           </div> 
           <div class="paragraph"> 
            <p>Alternatively, you might also consider simply editing the source file, ie renaming the class and bumping up the value returned by <code>getMinorVersion()</code>.</p> 
           </div> 
           <div class="paragraph"> 
            <p>We also <em>don’t</em> recommend using inheritance (ie <code>ToDoItemV1_2</code> should not inherit from <code>ToDoItemV1_1</code>; this creates unnecessary complexity downstream if generating XSDs and DTOs for the downstream consumer.</p> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="_ugfun_programming-model_view-models_dto_generating-xsds">Generating XSDs and DTOs</h5>
           <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
            <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_dto_generating-xsds.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
            <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
            <ul class="dropdown-menu">
             <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_dto_generating-xsds.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
             <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_dto_generating-xsds.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
             <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_dto_generating-xsds.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
             <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_dto_generating-xsds.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
            </ul>
           </div> 
           <div class="paragraph"> 
            <p>In the section <a href="../ugfun/ugfun.html#_ugfun_programming-model_view-models_jaxb_referencing-domain-entities">above</a> it was explained how a view model DTO can transparent reference any "backing" entities; these references are converted to internal object identifiers.</p> 
           </div> 
           <div class="paragraph"> 
            <p>However, if the consumer of the XML is another Java process (eg running within an Apache Camel route), then you might be tempted/expect to be able to use the same DTO within that Java process. After a little thought though you’ll realize that (duh!) of course you cannot; the consumer runs in a different process space, and will not have references to those containing entities.</p> 
           </div> 
           <div class="paragraph"> 
            <p>There are therefore two options:</p> 
           </div> 
           <div class="ulist"> 
            <ul> 
             <li> <p>either choose not to have the view model DTO reference any persistent entities, and simply limit the DTO to simple scalars.<br></p> 
              <div class="paragraph"> 
               <p>Such a DTO will then be usable in both the Apache Isis app (to generate the original XML) and in the consumer. The <a href="../rgsvc/rgsvc.html#_rgsvc_integration-api_BookmarkService"><code>BookmarkService</code></a> can be used to obtain the object identifiers</p> 
              </div> </li> 
             <li> <p>alternatively, generate a different DTO for the consumer from the XSD of the view model DTO.</p> </li> 
            </ul> 
           </div> 
           <div class="paragraph"> 
            <p>The (non-ASF) <a href="http://github.com/isisaddons/isis-app-todoapp">Isis addons' todoapp</a> uses the second approach; generating the XSD and consumer’s DTO is mostly just boilerplate <code>pom.xml</code> file. In the todoapp this can be found in the <code>todoapp-xsd</code> Maven module, whose <code>pom.xml</code> is structured as two profiles:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;project</span> <span class="attribute-name">...</span> <span class="tag">&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>todoapp-xsd<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;dependencies&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>${project.groupId}<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>todoapp-app<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
    <span class="tag">&lt;/dependencies&gt;</span>
    <span class="tag">&lt;profiles&gt;</span>
        <span class="tag">&lt;profile&gt;</span>
            <span class="tag">&lt;id&gt;</span>isis-xsd<span class="tag">&lt;/id&gt;</span>
            <span class="tag">&lt;activation&gt;</span>
                <span class="tag">&lt;property&gt;</span>
                    <span class="tag">&lt;name&gt;</span>!skip.isis-xsd<span class="tag">&lt;/name&gt;</span>
                <span class="tag">&lt;/property&gt;</span>
            <span class="tag">&lt;/activation&gt;</span>
            ...
        <span class="tag">&lt;/profile&gt;</span>
        <span class="tag">&lt;profile&gt;</span>
            <span class="tag">&lt;id&gt;</span>xjc<span class="tag">&lt;/id&gt;</span>
            <span class="tag">&lt;activation&gt;</span>
                <span class="tag">&lt;property&gt;</span>
                    <span class="tag">&lt;name&gt;</span>!skip.xjc<span class="tag">&lt;/name&gt;</span>
                <span class="tag">&lt;/property&gt;</span>
            <span class="tag">&lt;/activation&gt;</span>
            ...
        <span class="tag">&lt;/profile&gt;</span>
    <span class="tag">&lt;/profiles&gt;</span>
<span class="tag">&lt;/project&gt;</span></code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>The <code>isis-xsd</code> profile generates the XSD using the <a href="../rgmvn/rgmvn.html#_rgmvn_xsd"><code>xsd</code> goal</a> of Isis' maven plugin:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;build&gt;</span>
    <span class="tag">&lt;plugins&gt;</span>
        <span class="tag">&lt;plugin&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.apache.isis.tool<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>isis-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${isis.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;configuration&gt;</span>
                <span class="tag">&lt;appManifest&gt;</span>todoapp.dom.ToDoAppDomManifest<span class="tag">&lt;/appManifest&gt;</span>
                <span class="tag">&lt;jaxbClasses&gt;</span>
                    <span class="tag">&lt;jaxbClass&gt;</span>todoapp.app.viewmodels.todoitem.v1.ToDoItemV1_1<span class="tag">&lt;/jaxbClass&gt;</span>
                <span class="tag">&lt;/jaxbClasses&gt;</span>
                <span class="tag">&lt;separate&gt;</span>false<span class="tag">&lt;/separate&gt;</span>
                <span class="tag">&lt;commonSchemas&gt;</span>false<span class="tag">&lt;/commonSchemas&gt;</span>
            <span class="tag">&lt;/configuration&gt;</span>
            <span class="tag">&lt;dependencies&gt;</span>
                <span class="tag">&lt;dependency&gt;</span>
                    <span class="tag">&lt;groupId&gt;</span>${project.groupId}<span class="tag">&lt;/groupId&gt;</span>
                    <span class="tag">&lt;artifactId&gt;</span>todoapp-dom<span class="tag">&lt;/artifactId&gt;</span>
                    <span class="tag">&lt;version&gt;</span>${project.version}<span class="tag">&lt;/version&gt;</span>
                <span class="tag">&lt;/dependency&gt;</span>
                <span class="tag">&lt;dependency&gt;</span>
                    <span class="tag">&lt;groupId&gt;</span>com.google.guava<span class="tag">&lt;/groupId&gt;</span>
                    <span class="tag">&lt;artifactId&gt;</span>guava<span class="tag">&lt;/artifactId&gt;</span>
                    <span class="tag">&lt;version&gt;</span>16.0.1<span class="tag">&lt;/version&gt;</span>
                <span class="tag">&lt;/dependency&gt;</span>
            <span class="tag">&lt;/dependencies&gt;</span>
            <span class="tag">&lt;executions&gt;</span>
                <span class="tag">&lt;execution&gt;</span>
                    <span class="tag">&lt;phase&gt;</span>generate-sources<span class="tag">&lt;/phase&gt;</span>
                    <span class="tag">&lt;goals&gt;</span>
                        <span class="tag">&lt;goal&gt;</span>xsd<span class="tag">&lt;/goal&gt;</span>
                    <span class="tag">&lt;/goals&gt;</span>
                <span class="tag">&lt;/execution&gt;</span>
            <span class="tag">&lt;/executions&gt;</span>
        <span class="tag">&lt;/plugin&gt;</span>
        <span class="tag">&lt;plugin&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>maven-assembly-plugin<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>2.5.3<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;configuration&gt;</span>
                <span class="tag">&lt;descriptor&gt;</span>src/assembly/dep.xml<span class="tag">&lt;/descriptor&gt;</span>
            <span class="tag">&lt;/configuration&gt;</span>
            <span class="tag">&lt;executions&gt;</span>
                <span class="tag">&lt;execution&gt;</span>
                    <span class="tag">&lt;id&gt;</span>create-archive<span class="tag">&lt;/id&gt;</span>
                    <span class="tag">&lt;phase&gt;</span>package<span class="tag">&lt;/phase&gt;</span>
                    <span class="tag">&lt;goals&gt;</span>
                        <span class="tag">&lt;goal&gt;</span>single<span class="tag">&lt;/goal&gt;</span>
                    <span class="tag">&lt;/goals&gt;</span>
                <span class="tag">&lt;/execution&gt;</span>
            <span class="tag">&lt;/executions&gt;</span>
        <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;/plugins&gt;</span>
<span class="tag">&lt;/build&gt;</span></code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>The <code>todoapp.dom.ToDoAppDomManifest</code> is a cut-down version of the app manifest that identifies only the <code>dom</code> domain services.</p> 
           </div> 
           <div class="paragraph"> 
            <p>The <code>xjc</code> profile, meanwhile, uses the <code>maven-jaxb2-plugin</code> (a wrapper around the <code>schemagen</code> JDK tool) to generate a DTO from the XSD generated by the preceding profile:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;build&gt;</span>
    <span class="tag">&lt;plugins&gt;</span>
        <span class="tag">&lt;plugin&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.jvnet.jaxb2.maven2<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>maven-jaxb2-plugin<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>0.12.3<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;executions&gt;</span>
                <span class="tag">&lt;execution&gt;</span>
                    <span class="tag">&lt;id&gt;</span>xjc-generate<span class="tag">&lt;/id&gt;</span>
                    <span class="tag">&lt;phase&gt;</span>generate-sources<span class="tag">&lt;/phase&gt;</span>
                    <span class="tag">&lt;goals&gt;</span>
                        <span class="tag">&lt;goal&gt;</span>generate<span class="tag">&lt;/goal&gt;</span>
                    <span class="tag">&lt;/goals&gt;</span>
                <span class="tag">&lt;/execution&gt;</span>
            <span class="tag">&lt;/executions&gt;</span>
            <span class="tag">&lt;configuration&gt;</span>
                <span class="tag">&lt;removeOldOutput&gt;</span>true<span class="tag">&lt;/removeOldOutput&gt;</span>
                <span class="tag">&lt;schemaDirectory&gt;</span>
                    target/generated-resources/isis-xsd/viewmodels.app.todoapp
                <span class="tag">&lt;/schemaDirectory&gt;</span>
                <span class="tag">&lt;schemaIncludes&gt;</span>
                    <span class="tag">&lt;schemaInclude&gt;</span>todoitem/v1/Dto.xsd<span class="tag">&lt;/schemaInclude&gt;</span>
                <span class="tag">&lt;/schemaIncludes&gt;</span>
                <span class="tag">&lt;bindingDirectory&gt;</span>src/main/resources<span class="tag">&lt;/bindingDirectory&gt;</span>
                <span class="tag">&lt;bindingIncludes&gt;</span>
                    <span class="tag">&lt;bindingInclude&gt;</span>binding.xml<span class="tag">&lt;/bindingInclude&gt;</span>
                <span class="tag">&lt;/bindingIncludes&gt;</span>
                <span class="tag">&lt;catalog&gt;</span>src/main/resources/catalog.xml<span class="tag">&lt;/catalog&gt;</span>
            <span class="tag">&lt;/configuration&gt;</span>
        <span class="tag">&lt;/plugin&gt;</span>
        <span class="tag">&lt;plugin&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.codehaus.mojo<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>build-helper-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>1.9.1<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;executions&gt;</span>
                <span class="tag">&lt;execution&gt;</span>
                    <span class="tag">&lt;id&gt;</span>add-source<span class="tag">&lt;/id&gt;</span>
                    <span class="tag">&lt;phase&gt;</span>generate-sources<span class="tag">&lt;/phase&gt;</span>
                    <span class="tag">&lt;goals&gt;</span>
                        <span class="tag">&lt;goal&gt;</span>add-source<span class="tag">&lt;/goal&gt;</span>
                    <span class="tag">&lt;/goals&gt;</span>
                    <span class="tag">&lt;configuration&gt;</span>
                    <span class="tag">&lt;sources&gt;</span>
                        <span class="tag">&lt;source&gt;</span>target/generated-sources/xjc<span class="tag">&lt;/source&gt;</span>
                    <span class="tag">&lt;/sources&gt;</span>
                    <span class="tag">&lt;/configuration&gt;</span>
                <span class="tag">&lt;/execution&gt;</span>
            <span class="tag">&lt;/executions&gt;</span>
        <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;/plugins&gt;</span>
<span class="tag">&lt;/build&gt;</span></code></pre> 
            </div> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="_ugfun_programming-model_view-models_dto_dto-consumers">DTO Consumers</h5>
           <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
            <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_dto_dto-consumers.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
            <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
            <ul class="dropdown-menu">
             <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_dto_dto-consumers.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
             <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_dto_dto-consumers.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
             <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_dto_dto-consumers.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
             <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_dto_dto-consumers.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
            </ul>
           </div> 
           <div class="paragraph"> 
            <p>The actual consumers of DTOs will generally obtain the XML of the view models either by requesting the XML directly, eg using the <a href="../ugvro/ugvro.html">RestfulObjects viewer</a>, or may have the XML sent to them asynchronously using an ESB such as Apache Camel.</p> 
           </div> 
           <div class="paragraph"> 
            <p>In the former case, the consumer requests the DTO by calling the REST API with the appropriate HTTP <code>Accept</code> header. An appropriate implementation of <a href="../rgsvc/rgsvc.html#_rgsvc_presentation-layer-spi_ContentMappingService"><code>ContentMappingService</code></a> can then be used to return the appropriate DTO (as XML).</p> 
           </div> 
           <div class="paragraph"> 
            <p>For the latter case, one design is simply for the application to instantiate the view model, then call the <a href="../rgsvc/rgsvc.html#_rgsvc_integration-api_JaxbService"><code>JaxbService</code></a> to obtain its corresponding XML. This can then be published onto the ESB, for example using an <a href="http://activemq.apache.org">Apache ActiveMQ ™</a> queue.</p> 
           </div> 
           <div class="paragraph"> 
            <p>However, rather than try to push all the data that might be needed by any of these external systems in a single XML event (which would require anticipating all the requirements, likely a hopeless task), a better design is to publish only the fact that something of note has changed - ie, that an action on a domain object has been invoked - and then let the consumers call back to obtain other information if required. This can once again be done by calling the REST API with an appropriate HTTP <code>Accept</code> header.</p> 
           </div> 
           <div class="admonitionblock tip"> 
            <table> 
             <tbody>
              <tr> 
               <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
               <td class="content"> 
                <div class="paragraph"> 
                 <p>This is an example of the <a href="https://leanpub.com/camel-design-patterns">VETRO pattern</a> (validate, enrich, transform, route, operate). In our case we focus on the validation (to determine the nature of the inbound message, ie which action was invoked), and the enrich (callback to obtain a DTO with additional information required by the consumer).</p> 
                </div> </td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
           <div class="paragraph"> 
            <p>The (non-ASF) <a href="http://platform.incode.org" target="_blank">Incode Platform</a>'s publishmq module provides an out-of-the-box solution of this design. It provides an implementation of the <a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-spi_PublishingService"><code>PublishingService</code></a>, but which simply publishes instances of <a href="../rgcms/rgcms.html#_rgcms_schema-aim"><code>ActionInvocationMemento</code></a> to an ActiveMQ queue. Camel (or similar) can then be hooked up to consume these events from this queue, and use a processor to parse the action memento to determine what has changed on the source system. Thereafter, a subsequent Camel processor can then call back to the source - via the <a href="../ugvro/ugvro.html">Restful Objects viewer</a> - to enrich the message with additional details using a DTO.</p> 
           </div> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_programming-model_view-models_non-jaxb">6.8.3. Non-JAXB View Models</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_non-jaxb.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_non-jaxb.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_non-jaxb.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_non-jaxb.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_view-models_non-jaxb.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>Instead of using JAXB to specify a view model, it is also possible to use Apache Isis-specific annotations.</p> 
          </div> 
          <div class="admonitionblock warning"> 
           <table> 
            <tbody>
             <tr> 
              <td class="icon"> <i class="fa icon-warning" title="Warning"></i> </td> 
              <td class="content"> 
               <div class="paragraph"> 
                <p>As was explained <a href="../ugfun/ugfun.html#_ugfun_programming-model_view-models">earlier</a>, the approach is described here is neither as flexible nor as powerful as using the JAXB-style of view models. As such, it may be deprecated in the future.</p> 
               </div> </td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="paragraph"> 
           <p>While the underlying technique is the same irrespective of use case, the programming model provides various ways of defining a view model so that the original intent is not lost. They are:</p> 
          </div> 
          <table class="tableblock frame-all grid-all spread"> 
           <caption class="title">
            Table 3. View model programming model
           </caption> 
           <colgroup> 
            <col style="width: 14.2857%;"> 
            <col style="width: 57.1428%;"> 
            <col style="width: 28.5715%;"> 
           </colgroup> 
           <thead> 
            <tr> 
             <th class="tableblock halign-left valign-top">Use case</th> 
             <th class="tableblock halign-left valign-top">Code</th> 
             <th class="tableblock halign-left valign-top">Description</th> 
            </tr> 
           </thead> 
           <tbody> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>External entity</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="listingblock"> 
                <div class="content"> 
                 <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainObject</span>(nature=Nature.EXTERNAL_ENTITY)
<span class="directive">public</span> <span class="type">class</span> <span class="class">CustomerRecordOnSAP</span> { ... }</code></pre> 
                </div> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Annotated with <a href="../rgant/rgant.html#_rgant-DomainObject_nature"><code>@DomainObject#nature()</code></a> and a nature of <code>EXTERNAL_ENTITY</code>, with memento derived automatically from the properties of the domain object. Collections are ignored, as are any properties annotated as <a href="../rgant/rgant.html#_rgant-Property_notPersisted">not persisted</a>.</p> 
               </div>
              </div></td> 
            </tr> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>In-memory entity</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="listingblock"> 
                <div class="content"> 
                 <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainObject</span>(nature=Nature.INMEMORY_ENTITY)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Log4JAppender</span> { ... }</code></pre> 
                </div> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>As preceding, but using a nature of <code>INMEMORY_ENTITY</code>.</p> 
               </div>
              </div></td> 
            </tr> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Application view model</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="listingblock"> 
                <div class="content"> 
                 <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainObject</span>(nature=Nature.VIEW_MODEL)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Dashboard</span> { ... }</code></pre> 
                </div> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>As preceding, but using a nature of <code>VIEW_MODEL</code>.</p> 
               </div>
              </div></td> 
            </tr> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Application view model</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="listingblock"> 
                <div class="content"> 
                 <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ViewModel</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Dashboard</span> { ... }</code></pre> 
                </div> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Annotated with <a href="../rgant/rgant.html#_rgant-ViewModel"><code>@ViewModel</code></a> annotation (effectively just an alias)' memento is as preceding: from "persisted" properties, collections ignored</p> 
               </div>
              </div></td> 
            </tr> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Application view model</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="listingblock"> 
                <div class="content"> 
                 <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">ExcelUploadManager</span> <span class="directive">implements</span> ViewModel {
  <span class="directive">public</span> <span class="predefined-type">String</span> viewModelMemento() { ... }
  <span class="directive">public</span> <span class="type">void</span> viewModelInit(<span class="predefined-type">String</span> memento) { ... }
}</code></pre> 
                </div> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Implement <a href="../rgcms/rgcms.html#_rgcms_classes_super_ViewModel"><code>ViewModel</code></a> interface. The memento is as defined by the interface’s methods: the programmer has full control (but also full responsibility) for the string memento.</p> 
               </div>
              </div></td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_programming-model_mixins">6.9. Mixins</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>A <a href="../ugfun/ugfun.html#_ugfun_building-blocks_types-of-domain-objects_mixins">mixin</a> acts like a trait or extension method, allowing one module to contribute behaviour or derived state to another object.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Syntactically, a mixin is defined using either the <a href="../rgant/rgant.html#_rgant_Mixin"><code>@Mixin</code></a> annotation or using <a href="../rgant/rgant.html#_rgant_DomainObject_nature"><code>@DomainObject#nature()</code></a> attribute (specifying a nature of <code>Nature.MIXIN</code>).</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Mixin</span>(method=<span class="string"><span class="delimiter">"</span><span class="content">coll</span><span class="delimiter">"</span></span>)                                       <i class="conum" data-value="1"></i><b>(1)</b>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Customer_orders</span> {                              <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="directive">private</span> <span class="directive">final</span> Customer customer;
    <span class="directive">public</span> Customer_orders(<span class="directive">final</span> Customer customer) {       <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="local-variable">this</span>.customer = customer;
    }

    <span class="annotation">@Action</span>(semantics=SemanticsOf.SAFE)                     <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="annotation">@ActionLayout</span>(contributed=Contributed.AS_ASSOCIATION)   <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="annotation">@CollectionLayout</span>(render=RenderType.EAGERLY)
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;Order&gt; coll() {                             <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="keyword">return</span> repositoryService.findOrdersFor(customer);
    }

    <span class="annotation">@Inject</span>
    RepositoryService repositoryService;
}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody>
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>indicates that this is a mixin, with "coll" as the name of the main method</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>The contributed member is inferred from the name, after the "_"; in other words "orders"</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="3"></i><b>3</b></td> 
             <td>The mixee is <code>Customer</code>. This could also be an interface.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="4"></i><b>4</b></td> 
             <td>Indicates that the action should be interpreted as a collection. This requires that the action has safe semantics, ie does not alter state/no side-effects.</td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_programming-model_mixins_contributed-collection">6.9.1. Contributed Collection</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_contributed-collection.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_contributed-collection.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_contributed-collection.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_contributed-collection.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_contributed-collection.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>The example below shows how to contribute a collection:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Mixin</span>(method=<span class="string"><span class="delimiter">"</span><span class="content">coll</span><span class="delimiter">"</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">DocumentHolder_documents</span> {

    <span class="directive">private</span> <span class="directive">final</span> DocumentHolder holder;
    <span class="directive">public</span> DocumentHolderDocuments(DocumentHolder holder) { <span class="local-variable">this</span>.holder = holder; }

    <span class="annotation">@Action</span>(semantics=SemanticsOf.SAFE)                         <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="annotation">@ActionLayout</span>(contributed = Contributed.AS_ASSOCIATION)     <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="annotation">@CollectionLayout</span>(render = RenderType.EAGERLY)
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">Document</span>&gt; coll() {                              <i class="conum" data-value="3"></i><b>(3)</b>
        ...
    }
    <span class="directive">public</span> <span class="type">boolean</span> hideColl() { ... }                           <i class="conum" data-value="4"></i><b>(4)</b>
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody>
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>required; actions that have side-effects cannot be contributed as collections</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>required; otherwise the mixin will default to being rendered as an action</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>must accept no arguments. The mixin is a collection rather than a property because the return type is a collection, not a scalar.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>supporting methods follow the usual naming conventions. (That said, in the case of collections, because the collection is derived/read-only, the only supporting method that is relevant is <code>hideColl()</code>).</td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="paragraph"> 
           <p>The above will result in a contributed collection "documents" for all types that implement/extend from <code>DocumentHolder</code>.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_programming-model_mixins_contributed-property">6.9.2. Contributed Property</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_contributed-property.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_contributed-property.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_contributed-property.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_contributed-property.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_contributed-property.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>Contributed properties are defined similarly, for example:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Mixin</span>(method=<span class="string"><span class="delimiter">"</span><span class="content">prop</span><span class="delimiter">"</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">DocumentHolder_mostRecentDocument</span> {

    <span class="directive">private</span> <span class="directive">final</span> DocumentHolder holder;
    <span class="directive">public</span> DocumentHolderDocuments(DocumentHolder holder) { <span class="local-variable">this</span>.holder = holder; }

    <span class="annotation">@Action</span>(semantics=SemanticsOf.SAFE)                         <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="annotation">@ActionLayout</span>(contributed = Contributed.AS_ASSOCIATION)     <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="directive">public</span> <span class="predefined-type">Document</span> prop() {                                    <i class="conum" data-value="3"></i><b>(3)</b>
        ...
    }
    <span class="directive">public</span> <span class="type">boolean</span> hiderProp() { ... }                          <i class="conum" data-value="4"></i><b>(4)</b>
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody>
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>required; actions that have side-effects cannot be contributed as collections</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>required; otherwise the mixin will default to being rendered as an action</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>must accept no arguments. The mixin is a property rather than a collection because the return type is a scalar.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>supporting methods follow the usual naming conventions. (That said, in the case of properties, because the property is derived/read-only, the only supporting method that is relevant is <code>hideProp()</code>).</td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_programming-model_mixins_contributed-action">6.9.3. Contributed Action</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_contributed-action.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_contributed-action.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_contributed-action.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_contributed-action.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_contributed-action.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>Contributed actions are defined similarly, for example:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Mixin</span>(method=<span class="string"><span class="delimiter">"</span><span class="content">act</span><span class="delimiter">"</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">DocumentHolder_addDocument</span> {

    <span class="directive">private</span> <span class="directive">final</span> DocumentHolder holder;
    <span class="directive">public</span> DocumentHolderDocuments(DocumentHolder holder) { <span class="local-variable">this</span>.holder = holder; }

    <span class="annotation">@Action</span>()
    <span class="annotation">@ActionLayout</span>(contributed = Contributed.AS_ACTION)          <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">public</span> <span class="predefined-type">Document</span>&gt; act(<span class="predefined-type">Document</span> doc) {
        ...
    }
    <span class="directive">public</span> <span class="type">boolean</span> hideAct() { ... }                            <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody>
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>recommended</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>supporting methods follow the usual naming conventions.</td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_programming-model_mixins_inferred-name">6.9.4. Inferred Name</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_inferred-name.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_inferred-name.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_inferred-name.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_inferred-name.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_inferred-name.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>Where the mixin follows the naming convention <code>SomeType_mixinName</code> then the method name can be abbreviated, and the name of the member being contributed is inferred from the name of the class itself, beingeverything after the last '_'.</p> 
          </div> 
          <div class="paragraph"> 
           <p>The default abbreviation to "$$".</p> 
          </div> 
          <div class="paragraph"> 
           <p>For example:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Mixin</span>(method=<span class="string"><span class="delimiter">"</span><span class="content">act</span><span class="delimiter">"</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">DocumentHolder_documents</span> {

    <span class="directive">private</span> <span class="directive">final</span> DocumentHolder holder;
    <span class="directive">public</span> DocumentHolder_documents(DocumentHolder holder) { <span class="local-variable">this</span>.holder = holder; }

    <span class="annotation">@Action</span>(semantics=SemanticsOf.SAFE)
    <span class="annotation">@ActionLayout</span>(contributed = Contributed.AS_ASSOCIATION)
    <span class="annotation">@CollectionLayout</span>(render = RenderType.EAGERLY)
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">Document</span>&gt; act() {
        ...
    }
    <span class="directive">public</span> <span class="type">boolean</span> hideAct() { ... }
}</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>Alternatively, if the <a href="../rgant/rgant.html#_rgant_Mixin_method"><code>@Mixin#method()</code></a> attribute is specified, then this can nominate a different abbreviation.</p> 
          </div> 
          <div class="paragraph"> 
           <p>The examples above (for <a href="../ugfun/ugfun.html#_ugfun_programming-model_mixins_contributed-property">property</a>, <a href="../ugfun/ugfun.html#_ugfun_programming-model_mixins_contributed-collection">collection</a> and <a href="../ugfun/ugfun.html#_ugfun_programming-model_mixins_contributed-action">action</a>) demonstrate this.</p> 
          </div> 
          <div class="paragraph"> 
           <p>The character "$" is also recognized as a separator between the mixin type and mixin name. This is useful for mixins implemented as nested static types, discussed <a href="../ugfun/ugfun.html#_ugfun_programming-model_mixins_nested-static-classes">below</a>.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_programming-model_mixins_nested-static-classes">6.9.5. As Nested Static Classes</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_nested-static-classes.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_nested-static-classes.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_nested-static-classes.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_nested-static-classes.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_nested-static-classes.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>As noted in the introduction, while mixins were originally introduced as a means of allowing contributions from one module to the types of another module, they are also a convenient mechanism for grouping functionality/behaviour against a concrete type. All the methods and supporting methods end up in a single construct, and the dependency between that functionality and the rest of the object is made more explicit.</p> 
          </div> 
          <div class="paragraph"> 
           <p>When using mixins in this fashion, it is idiomatic to write the mixin as a nested static class, using the naming convention described above to reduce duplication.</p> 
          </div> 
          <div class="paragraph"> 
           <p>For example:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Customer</span> {

    <span class="annotation">@Mixin</span>(method=<span class="string"><span class="delimiter">"</span><span class="content">act</span><span class="delimiter">"</span></span>)
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">placeOrder</span> {                                            <i class="conum" data-value="1"></i><b>(1)</b>

        <span class="directive">private</span> <span class="directive">final</span> Customer customer;
        <span class="directive">public</span> documents(Customer customer) { <span class="local-variable">this</span>.customer = customer; }       <i class="conum" data-value="2"></i><b>(2)</b>

        <span class="annotation">@Action</span>
        <span class="annotation">@ActionLayout</span>(contributed = Contributed.AS_ACTION)
        <span class="directive">public</span> <span class="predefined-type">List</span>&lt;Order&gt; act(Product p, <span class="type">int</span> quantity) {                        <i class="conum" data-value="3"></i><b>(3)</b>
            ...
        }
        <span class="directive">public</span> <span class="type">boolean</span> hideAct() { ... }                                         <i class="conum" data-value="4"></i><b>(4)</b>
        <span class="directive">public</span> <span class="predefined-type">String</span> validate0Act(Product p) { ...  }
    }
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody>
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>Prior to <code>1.13.2</code>, had to be prefixed by an "_"; this is no longer required because "$" is also recognized as a way of parsing the class name in order to infer the mixin’s name (eg <code>Customer$placeOrder</code>).</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>typically contributed to concrete class</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>supporting methods as usual</td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="paragraph"> 
           <p>The mixin class can also be capitalized if desired. Thus:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Customer</span> {

    <span class="annotation">@Mixin</span>(method=<span class="string"><span class="delimiter">"</span><span class="content">act</span><span class="delimiter">"</span></span>)
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">PlaceOrder</span> {
        <span class="directive">private</span> <span class="directive">final</span> Customer customer;
        <span class="directive">public</span> documents(Customer customer) { <span class="local-variable">this</span>.customer = customer; }

        <span class="annotation">@Action</span>
        <span class="annotation">@ActionLayout</span>(contributed = Contributed.AS_ACTION)
        <span class="directive">public</span> <span class="predefined-type">List</span>&lt;Order&gt; act(Product p, <span class="type">int</span> quantity) {
            ...
        }
        <span class="directive">public</span> <span class="type">boolean</span> hideAct() { ... }
        <span class="directive">public</span> <span class="predefined-type">String</span> validate0Act(Product p) { ...  }
    }
}</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>In other words, all of the following are allowed:</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p><code>public static class Documents { …​ }</code></p> </li> 
            <li> <p><code>public static class documents { …​ }</code></p> </li> 
            <li> <p><code>public static class _Documents { …​ }</code></p> </li> 
            <li> <p><code>public static class _documents { …​ }</code></p> </li> 
           </ul> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_programming-model_mixins_programmatic-usage">6.9.6. Programmatic usage</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_programmatic-usage.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_programmatic-usage.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_programmatic-usage.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_programmatic-usage.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_programmatic-usage.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>When a domain object is rendered, the framework will automatically instantiate all required mixins and delegate to them dynamically. If writing integration tests or fixtures, or (sometimes) just regular domain logic, then you may need to instantiate mixins directly.</p> 
          </div> 
          <div class="paragraph"> 
           <p>For this you can use the xref:../rgsvc/rgsvc.adoc#_rgsvc_core-domain-api_DomainObjectContainer_object-creation-api[<code>DomainObjectContainer#mixin(…​)</code> method.</p> 
          </div> 
          <div class="paragraph"> 
           <p>For example:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java">DocumentHolder_documents mixin = container.mixin(DocumentHolder_documents.class, customer);</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>The <a href="../ugtst/ugtst.html#__ugtst_integ-test-support_bootstrapping_IntegrationTestAbstract"><code>IntegrationTestAbstract</code></a> and <a href="../rgcms/rgcms.html#_rgcms_classes_super_FixtureScript"><code>FixtureScript</code></a> classes both provide a <code>mixin(…​)</code> convenience method.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_ugfun_programming-model_mixins_contributed-services">6.9.7. Contributed services (deprecated)</h4>
          <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
           <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_contributed-services.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
           <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
           <ul class="dropdown-menu">
            <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_contributed-services.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
            <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_contributed-services.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
            <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_contributed-services.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
            <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_programming-model_mixins_contributed-services.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
           </ul>
          </div> 
          <div class="paragraph"> 
           <p>Contributed services are very similar to mixins; indeed mixins are an evolution and refinement of the contributions concept. As such, contributions should be considered as deprecated, and eventually removed in a future version of the framework, to be replaced entirely by mixins.</p> 
          </div> 
          <div class="paragraph"> 
           <p>The main difference between contributed services and mixins is that the actions of a contributed service will contribute to <em>all</em> the parameters of its actions, whereas a mixin only contributes to the type accepted in its constructor.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Also, contributed services are long-lived singletons, whereas mixins are instantiated as required (by the framework) and then discarded almost immediately.</p> 
          </div> 
          <div class="sect4"> 
           <h5 id="_syntax">Syntax</h5> 
           <div class="paragraph"> 
            <p>Any n-parameter action provided by a service will automatically be contributed to the list of actions for each of its (entity) parameters. From the viewpoint of the entity the action is called a contributed action.</p> 
           </div> 
           <div class="paragraph"> 
            <p>For example, given a service:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">Library</span> {
    <span class="directive">public</span> Loan borrow(Loanable l, Borrower b);
}</code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>and the entities:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Book</span> <span class="directive">implements</span> Loanable { ... }</code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>and</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">LibraryMember</span> <span class="directive">implements</span> Borrower { ... }</code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>then the <code>borrow(…​)</code> action will be contributed to both <code>Book</code> and to <code>LibraryMember</code>.</p> 
           </div> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_ugfun_ui-hints">7. UI Hints</h2>
       <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
        <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
        <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
        <ul class="dropdown-menu">
         <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
         <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
         <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
         <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
        </ul>
       </div> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>The Apache Isis programming model includes several mechanisms for a domain object to provide UI hints. These range from their title (so an end-user can distinguish one object from another) through to hints that can impact their CSS styling.</p> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_ui-hints_layout">7.1. Layout</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_layout.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_layout.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_layout.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_layout.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_layout.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>The most significant aspect of the UI is the layout of the object’s members: its properties, collections and actions. These can be organized into columns, rows and tabs.</p> 
         </div> 
         <div class="paragraph"> 
          <p>This can be accomplished using either annotations or through a separate file-based layout. Since this is a large topic, it has its own <a href="../ugvw/ugvw.html#_ugvw_layout">layout chapter</a> in the Wicket viewer guide.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_ui-hints_object-titles-and-icons">7.2. Object Titles and Icons</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_object-titles-and-icons.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_object-titles-and-icons.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_object-titles-and-icons.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_object-titles-and-icons.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_object-titles-and-icons.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>In Apache Isis every object is identified to the user by a title (label) and an icon. This is shown in several places: as the main heading for an object; as a link text for an object referencing another object, and also in tables representing collections of objects.</p> 
         </div> 
         <div class="paragraph"> 
          <p>The icon is often the same for all instances of a particular class, but it’s also possible for an individual instance to return a custom icon. This could represent the state of that object (eg a shipped order, say, or overdue library book).</p> 
         </div> 
         <div class="paragraph"> 
          <p>It is also possible for an object to provide a CSS class hint. In conjunction with <a href="../ugvw/ugvw.html#_ugvw_customisation_tweaking-css-classes">customized CSS</a> this can be used to apply arbitrary styling; for example each object could be rendered in a page with a different background colour.</p> 
         </div> 
         <div class="sect3"> 
          <h4 id="_object_title">7.2.1. Object Title</h4> 
          <div class="paragraph"> 
           <p>The object title is a label to identify an object to the end-user. Generally the object title is a label to identify an object to the end-user. There is no requirement for it to be absolutely unique, but it should be "unique enough" to distinguish the object from other object’s likely to be rendered on the same page.</p> 
          </div> 
          <div class="paragraph"> 
           <p>The title is always shown with an icon, so there is generally no need for the title to include information about the object’s type. For example the title of a customer object shouldn’t include the literal string "Customer"; it can just have the customer’s name, reference or some other meaningful business identifier.</p> 
          </div> 
          <div class="sect4"> 
           <h5 id="_declarative_style">Declarative style</h5> 
           <div class="paragraph"> 
            <p>The <a href="../rgant/rgant.html#_rgant-Title"><code>@Title</code></a> annotation can be used build up the title of an object from its constituent parts.</p> 
           </div> 
           <div class="paragraph"> 
            <p>For example:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Customer</span> {
    <span class="annotation">@Title</span>(sequence=<span class="string"><span class="delimiter">"</span><span class="content">1</span><span class="delimiter">"</span></span>, append=<span class="string"><span class="delimiter">"</span><span class="content"> </span><span class="delimiter">"</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> getFirstName() { ... }
    <span class="annotation">@Title</span>(sequence=<span class="string"><span class="delimiter">"</span><span class="content">2</span><span class="delimiter">"</span></span>)
    <span class="directive">public</span> Product getLastName() { ... }
    ...
}</code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>might return "Arthur Clarke", while:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">CustomerAlt</span> {
    <span class="annotation">@Title</span>(sequence=<span class="string"><span class="delimiter">"</span><span class="content">2</span><span class="delimiter">"</span></span>, prepend=<span class="string"><span class="delimiter">"</span><span class="content">, </span><span class="delimiter">"</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> getFirstName() { ... }

    <span class="annotation">@Title</span>(sequence=<span class="string"><span class="delimiter">"</span><span class="content">1</span><span class="delimiter">"</span></span>)
    <span class="directive">public</span> Product getLastName() { ... }
    ...
}</code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>could return "Clarke, Arthur".</p> 
           </div> 
           <div class="paragraph"> 
            <p>Note that the sequence is in Dewey Decimal Format. This allows a subclass to intersperse information within the title. For example (please forgive this horrible domain modelling (!)):</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Author</span> <span class="directive">extends</span> Customer {
    <span class="annotation">@Title</span>(sequence=<span class="string"><span class="delimiter">"</span><span class="content">1.5</span><span class="delimiter">"</span></span>, append=<span class="string"><span class="delimiter">"</span><span class="content">. </span><span class="delimiter">"</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> getMiddleInitial() { ... }
    ...
}</code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>could return "Arthur C. Clarke".</p> 
           </div> 
           <div class="admonitionblock tip"> 
            <table> 
             <tbody>
              <tr> 
               <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
               <td class="content"> 
                <div class="paragraph"> 
                 <p>Titles can sometimes get be long and therefore rather cumbersome in "parented" tables. If <code>@Title</code> has been used then the Wicket viewer will automatically exclude portions of the title belonging to the owning object.</p> 
                </div> </td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="_imperative_style">Imperative style</h5> 
           <div class="paragraph"> 
            <p>Alternatively, the title can be provided simply by implementing the <a href="../rgcms/rgcms.html#_rgcms_methods_reserved_title"><code>title()</code></a> reserved method.</p> 
           </div> 
           <div class="paragraph"> 
            <p>For example:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Author</span> <span class="directive">extends</span> Customer {

    <span class="directive">public</span> <span class="predefined-type">String</span> title() {
        <span class="predefined-type">StringBuilder</span> buf = <span class="keyword">new</span> <span class="predefined-type">StringBuilder</span>();
        buf.append(getFirstName());
        <span class="keyword">if</span>(getMiddleInitial() != <span class="predefined-constant">null</span>) {
            buf.append(getMiddleInitial()).append(<span class="string"><span class="delimiter">"</span><span class="content">. </span><span class="delimiter">"</span></span>);
        }
        buf.append(getLastName();
        <span class="keyword">return</span> buf.toString();
    }
    ...
}</code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>A variation on this approach also supports localized names; see <a href="../ugbtb/ugbtb.html#_ugbtb_i18n">beyond-the-basics</a> guide for further details.</p> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="_using_a_ui_subscriber">Using a UI subscriber</h5> 
           <div class="paragraph"> 
            <p>A third alternative is to move the responsibility for deriving the title into a separate subscriber object.</p> 
           </div> 
           <div class="paragraph"> 
            <p>In the target object, we define an appropriate event type and use the <a href="../rgant/rgant.html#_rgant_DomainObjectLayout_titleUiEvent"><code>@DomainObjectLayout#titleUiEvent()</code></a> attribute to specify:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainObjectLayout</span>(
    titleUiEvent = Author.TitleUiEvent.class
)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Author</span> <span class="directive">extends</span> Customer {
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">TitleUiEvent</span>
            <span class="directive">extends</span> org.apache.isis.applib.services.eventbus.TitleUiEvent&lt;Author&gt; {}
    ...
}</code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>The subscriber can then populate this event:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainService</span>(nature=NatureOfService.DOMAIN)
<span class="directive">public</span> <span class="type">class</span> <span class="class">AuthorSubscriptions</span> <span class="directive">extends</span> AbstractSubscriber {

    <span class="annotation">@org</span>.axonframework.eventhandling.annotation.EventHandler
    <span class="annotation">@com</span>.google.common.eventbus.Subscribe
    <span class="directive">public</span> <span class="type">void</span> on(Author.TitleUiEvent ev) {
        Author author = ev.getSource();
        ev.setTitle(titleOf(author);
    }

    <span class="directive">private</span> <span class="predefined-type">String</span> titleOf(Author author) {
        <span class="predefined-type">StringBuilder</span> buf = <span class="keyword">new</span> <span class="predefined-type">StringBuilder</span>();
        buf.append(author.getFirstName());
        <span class="keyword">if</span>(author.getMiddleInitial() != <span class="predefined-constant">null</span>) {
            buf.append(author.getMiddleInitial()).append(<span class="string"><span class="delimiter">"</span><span class="content">. </span><span class="delimiter">"</span></span>);
        }
        buf.append(author.getLastName();
        <span class="keyword">return</span> buf.toString();
    }
}</code></pre> 
            </div> 
           </div> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_object_icon">7.2.2. Object Icon</h4> 
          <div class="paragraph"> 
           <p>The icon is often the same for all instances of a particular class, and is picked up by convention.</p> 
          </div> 
          <div class="paragraph"> 
           <p>It’s is also possible for an individual instance to return a custom icon, typically so that some significant state of that domain object is represented. For example, a custom icon could be used to represent a shipped order, say, or an overdue library loan.</p> 
          </div> 
          <div class="sect4"> 
           <h5 id="_declarative_style_2">Declarative style</h5> 
           <div class="paragraph"> 
            <p>If there is no requirement to customize the icon (the normal case), then the icon is usually picked up as the <code>.png</code> file in the same package as the class. For example, the icon for a class <code>org.mydomain.myapp.Customer</code> will be <code>org/mydomain/myapp/Customer.png</code> (if it exists).</p> 
           </div> 
           <div class="paragraph"> 
            <p>Alternatively, font-awesome icon can be used. This is specified using the <a href="../rgant/rgant.html#_rgant-DomainObjectLayout_cssClassFa"><code>@DomainObjectLayout#cssClassFa()</code></a> attribute.</p> 
           </div> 
           <div class="paragraph"> 
            <p>For example:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainObjectLayout</span>(
    cssClassFa=<span class="string"><span class="delimiter">"</span><span class="content">play</span><span class="delimiter">"</span></span>               <i class="conum" data-value="1"></i><b>(1)</b>
)
<span class="directive">public</span> <span class="type">class</span> <span class="class">InvoiceRun</span> {
    ...
}</code></pre> 
            </div> 
           </div> 
           <div class="colist arabic"> 
            <table> 
             <tbody>
              <tr> 
               <td><i class="conum" data-value="1"></i><b>1</b></td> 
               <td>will use the "fa-play" icon.</td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="_imperative_style_2">Imperative style</h5> 
           <div class="paragraph"> 
            <p>To customise the icon on an instance-by-instance basis, we implement the reserved <a href="../rgcms/rgcms.html#_rgcms_methods_reserved_iconName"><code>iconName()</code></a> method.</p> 
           </div> 
           <div class="paragraph"> 
            <p>For example:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Order</span> {
    <span class="directive">public</span> <span class="predefined-type">String</span> iconName() {
        <span class="keyword">return</span> isShipped() ? <span class="string"><span class="delimiter">"</span><span class="content">shipped</span><span class="delimiter">"</span></span>: <span class="predefined-constant">null</span>;
    }
    ...
}</code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>In this case, if the <code>Order</code> has shipped then the framework will look for an icon image named "Order-shipped.png" (in the same package as the class). Otherwise it will just use "Order.png", as normal.</p> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="_using_a_ui_subscriber_2">Using a UI subscriber</h5> 
           <div class="paragraph"> 
            <p>As for title, the determination of which image file to use for the icon can be externalized into a UI event subscriber.</p> 
           </div> 
           <div class="paragraph"> 
            <p>In the target object, we define an appropriate event type and use the <a href="../rgant/rgant.html#_rgant_DomainObjectLayout_iconUiEvent"><code>@DomainObjectLayout#iconUiEvent()</code></a> attribute to specify.</p> 
           </div> 
           <div class="paragraph"> 
            <p>For example</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainObjectLayout</span>(
    iconUiEvent = Author.IconUiEvent.class
)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Order</span> {
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">IconUiEvent</span>
            <span class="directive">extends</span> org.apache.isis.applib.services.eventbus.IconUiEvent&lt;Order&gt; {}
    ...
}</code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>The subscriber can then populate this event:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainService</span>(nature=NatureOfService.DOMAIN)
<span class="directive">public</span> <span class="type">class</span> <span class="class">OrderSubscriptions</span> <span class="directive">extends</span> AbstractSubscriber {

    <span class="annotation">@org</span>.axonframework.eventhandling.annotation.EventHandler
    <span class="annotation">@com</span>.google.common.eventbus.Subscribe
    <span class="directive">public</span> <span class="type">void</span> on(Order.IconUiEvent ev) {
        Order order = ev.getSource();
        ev.setIconName(iconNameOf(order);
    }

    <span class="directive">private</span> <span class="predefined-type">String</span> iconNameOf(Order order) {
        <span class="predefined-type">StringBuilder</span> buf = <span class="keyword">new</span> <span class="predefined-type">StringBuilder</span>();
        <span class="keyword">return</span> order.isShipped() ? <span class="string"><span class="delimiter">"</span><span class="content">shipped</span><span class="delimiter">"</span></span>: <span class="predefined-constant">null</span>;
    }
}</code></pre> 
            </div> 
           </div> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_object_css_styling">7.2.3. Object CSS Styling</h4> 
          <div class="paragraph"> 
           <p>It is also possible for an object to return a <a href="../rgcms/rgcms.html#_rgcms_methods_reserved_cssClass">CSS class</a>. In conjunction with <a href="../ugvw/ugvw.html#_ugvw_customisation_tweaking-css-classes">customized CSS</a> this can be used to apply arbitrary styling; for example each object could be rendered in a page with a different background colour.</p> 
          </div> 
          <div class="sect4"> 
           <h5 id="_declarative_style_3">Declarative style</h5> 
           <div class="paragraph"> 
            <p>To render an object with a particular CSS, use <a href="../rgant/rgant.html#_rgant-DomainObjectLayout_cssClass"><code>@DomainObjectLayout#cssClass()</code></a>.</p> 
           </div> 
           <div class="paragraph"> 
            <p>When the domain object is rendered on its own page, this CSS class will appear on a top-level <code>&lt;div&gt;</code>. Or, when the domain object is rendered as a row in a collection, then the CSS class will appear in a <code>&lt;div&gt;</code> wrapped by the <code>&lt;tr&gt;</code> of the row.</p> 
           </div> 
           <div class="paragraph"> 
            <p>One possible use case would be to render the most important object types with a subtle background colour: <code>Customer</code>s shown in light green, or <code>Order</code>s shown in a light pink, for example.</p> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="_imperative_style_3">Imperative style</h5> 
           <div class="paragraph"> 
            <p>To customise the icon on an instance-by-instance basis, we implement the reserved <a href="../rgcms/rgcms.html#_rgcms_methods_reserved_cssClass"><code>cssClass()</code></a> method.</p> 
           </div> 
           <div class="paragraph"> 
            <p>For example:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Order</span> {
    <span class="directive">public</span> <span class="predefined-type">String</span> cssClass() {
        <span class="keyword">return</span> isShipped() ? <span class="string"><span class="delimiter">"</span><span class="content">shipped</span><span class="delimiter">"</span></span>: <span class="predefined-constant">null</span>;       <i class="conum" data-value="1"></i><b>(1)</b>
    }
    ...
}</code></pre> 
            </div> 
           </div> 
           <div class="colist arabic"> 
            <table> 
             <tbody>
              <tr> 
               <td><i class="conum" data-value="1"></i><b>1</b></td> 
               <td>the implementation might well be the same as the <code>iconName()</code>.</td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
           <div class="paragraph"> 
            <p>If non-null value is returned then the CSS class will be rendered <em>in addition</em> to any declarative CSS class also specified.</p> 
           </div> 
          </div> 
          <div class="sect4"> 
           <h5 id="_using_a_ui_subscriber_3">Using a UI subscriber</h5> 
           <div class="paragraph"> 
            <p>As for title and icon, the determination of which CSS class to render can be externalized into a UI event subscriber.</p> 
           </div> 
           <div class="paragraph"> 
            <p>In the target object, we define an appropriate event type and use the <a href="../rgant/rgant.html#_rgant_DomainObjectLayout_cssClassUiEvent"><code>@DomainObjectLayout#cssClassUiEvent()</code></a> attribute to specify.</p> 
           </div> 
           <div class="paragraph"> 
            <p>For example</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainObjectLayout</span>(
    cssClassUiEvent = Author.CssClassUiEvent.class
)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Order</span> {
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">CssClassUiEvent</span>
            <span class="directive">extends</span> org.apache.isis.applib.services.eventbus.CssClassUiEvent&lt;Order&gt; {}
    ...
}</code></pre> 
            </div> 
           </div> 
           <div class="paragraph"> 
            <p>The subscriber can then populate this event:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainService</span>(nature=NatureOfService.DOMAIN)
<span class="directive">public</span> <span class="type">class</span> <span class="class">OrderSubscriptions</span> <span class="directive">extends</span> AbstractSubscriber {

    <span class="annotation">@org</span>.axonframework.eventhandling.annotation.EventHandler
    <span class="annotation">@com</span>.google.common.eventbus.Subscribe
    <span class="directive">public</span> <span class="type">void</span> on(Order.CssClassUiEvent ev) {
        Order order = ev.getSource();
        ev.setIconName(iconNameOf(order);
    }

    <span class="directive">private</span> <span class="predefined-type">String</span> cssClassOf(Order order) {
        <span class="predefined-type">StringBuilder</span> buf = <span class="keyword">new</span> <span class="predefined-type">StringBuilder</span>();
        <span class="keyword">return</span> order.isShipped() ? <span class="string"><span class="delimiter">"</span><span class="content">shipped</span><span class="delimiter">"</span></span>: <span class="predefined-constant">null</span>;
    }
}</code></pre> 
            </div> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_ui-hints_action-icons-and-css">7.3. Action Icons and CSS</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_action-icons-and-css.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_action-icons-and-css.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_action-icons-and-css.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_action-icons-and-css.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_action-icons-and-css.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>Apache Isis allows <a href="http://fortawesome.github.io/Font-Awesome/icons/">font awesome</a> icons to be associated with each action, and for <a href="http://getbootstrap.com/css/#buttons">Bootstrap CSS</a> to be applied to action rendered as buttons. These UI hints can be applied either to individual actions, or can be applied en-masse using pattern matching.</p> 
         </div> 
         <div class="paragraph"> 
          <p>It is also possible to specify additional CSS for an object’s members (not just actions).</p> 
         </div> 
         <div class="sect3"> 
          <h4 id="_icons">7.3.1. Icons</h4> 
          <div class="paragraph"> 
           <p>Action icons can be specified in several ways.</p> 
          </div> 
          <div class="paragraph"> 
           <p>One option is to use the <a href="../rgant/rgant.html#_rgant-ActionLayout_cssClassFa"><code>@ActionLayout#cssClassFa()</code></a>. For example:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ActionLayout</span>(cssClassFa=<span class="string"><span class="delimiter">"</span><span class="content">refresh</span><span class="delimiter">"</span></span>)
<span class="directive">public</span> <span class="type">void</span> renew() {
    ...
}</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>Alternatively, you can specify these hints dynamically in the <a href="../ugvw/ugvw.html#_ugvw_layout"><code>Xxx.layout.xml</code></a> for the entity:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;cpt:action</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">"</span><span class="content">renew</span><span class="delimiter">"</span></span> <span class="attribute-name">cssClassFa</span>=<span class="string"><span class="delimiter">"</span><span class="content">refresh</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span></code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>Rather than annotating every action with <a href="../rgant/rgant.html#_rgant-ActionLayout_cssClassFa"><code>@ActionLayout#cssClassFa()</code></a> and <a href="../rgant/rgant.html#_rgant-ActionLayout_cssClass"><code>@ActionLayout#cssClass()</code></a> you can instead specify the UI hint globally using regular expressions. Not only does this save a lot of boilerplate/editing, it helps ensure consistency across all actions.</p> 
          </div> 
          <div class="paragraph"> 
           <p>To declare fa classes globally, use the <a href="../rgcfg/rgcfg.html#_rgcfg_configuring-core">configuration property</a> <code>isis.reflector.facet.cssClassFa.patterns</code> (a comma separated list of key:value pairs).</p> 
          </div> 
          <div class="paragraph"> 
           <p>For example:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="ini">isis.reflector.facet.cssClassFa.patterns=\
                        new.*:fa-plus,\
                        add.*:fa-plus-square,\
                        create.*:fa-plus,\
                        renew.*:fa-refresh,\
                        list.*:fa-list, \
                        all.*:fa-list, \
                        download.*:fa-download, \
                        upload.*:fa-upload, \
                        execute.*:fa-bolt, \
                        run.*:fa-bolt</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>Here:</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p>the key is a regex matching action names (eg <code>create.*</code>), and</p> </li> 
            <li> <p>the value is a <a href="http://fortawesome.github.io/Font-Awesome/icons/">font-awesome</a> icon name</p> </li> 
           </ul> 
          </div> 
          <div class="paragraph"> 
           <p>For example, "fa-plus" is applied to all action members called "newXxx"</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_css">7.3.2. CSS</h4> 
          <div class="paragraph"> 
           <p>Similarly, a CSS class can be specified for object members:</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p><a href="../rgant/rgant.html#_rgant-ActionLayout_cssClass"><code>@ActionLayout#cssClass()</code></a> for actions</p> </li> 
            <li> <p><a href="../rgant/rgant.html#_rgant-PropertyLayout_cssClass"><code>@PropertyLayout#cssClass()</code></a> for properties, and</p> </li> 
            <li> <p><a href="../rgant/rgant.html#_rgant-CollectionLayout_cssClass"><code>@CollectionLayout#cssClass()</code></a> for collections.</p> </li> 
           </ul> 
          </div> 
          <div class="paragraph"> 
           <p>Again, this CSS class will be attached to an appropriate containing <code>&lt;div&gt;</code> or <code>&lt;span&gt;</code> on the rendered page.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Possible use cases for this is to highlight the most important properties of a domain object.</p> 
          </div> 
          <div class="paragraph"> 
           <p>It is also possible to specify CSS classes globally, using the <a href="../rgcfg/rgcfg.html#_rgcfg_configuring-core">configuration property</a> <code>isis.reflector.facet.cssClass.patterns</code> configuration property.</p> 
          </div> 
          <div class="paragraph"> 
           <p>For example:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="ini">isis.reflector.facet.cssClass.patterns=\
                        delete.*:btn-warning</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>where (again):</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p>the key is a regex matching action names (eg <code>delete.*</code>), and</p> </li> 
            <li> <p>the value is a <a href="http://getbootstrap.com/css/">Bootstrap</a> CSS button class (eg `btn-warning) to be applied</p> </li> 
           </ul> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_ui-hints_names-and-descriptions">7.4. Names and Descriptions</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_names-and-descriptions.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_names-and-descriptions.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_names-and-descriptions.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_names-and-descriptions.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_names-and-descriptions.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>The name of classes and class members are usually inferred from the Java source code directly. For example, an action method called <code>placeOrder</code> will be rendered as "Place Order", and a collection called <code>orderItems</code> is rendered as "Order Items".</p> 
         </div> 
         <div class="paragraph"> 
          <p>Occasionally though the desired name is not possible; either the name is a Java reserved word (eg "class"), or might require characters that are not valid, for example abbreviations.</p> 
         </div> 
         <div class="paragraph"> 
          <p>In such cases the name can be specified declaratively.</p> 
         </div> 
         <div class="paragraph"> 
          <p>It is also possible to specify a description declaratively; this is used as a tooltip in the UI.</p> 
         </div> 
         <div class="paragraph"> 
          <p>The table below summarizes the annotations available:</p> 
         </div> 
         <table class="tableblock frame-all grid-all spread"> 
          <caption class="title">
           Table 4. Names and descriptions
          </caption> 
          <colgroup> 
           <col style="width: 33.3333%;"> 
           <col style="width: 33.3333%;"> 
           <col style="width: 33.3334%;"> 
          </colgroup> 
          <thead> 
           <tr> 
            <th class="tableblock halign-left valign-top">Feature</th> 
            <th class="tableblock halign-left valign-top">Named</th> 
            <th class="tableblock halign-left valign-top">Description</th> 
           </tr> 
          </thead> 
          <tbody> 
           <tr> 
            <td class="tableblock halign-left valign-top">
             <div>
              <div class="paragraph"> 
               <p>Class</p> 
              </div>
             </div></td> 
            <td class="tableblock halign-left valign-top">
             <div>
              <div class="paragraph"> 
               <p><a href="../rgant/rgant.html#_rgant-DomainObjectLayout_named"><code>@DomainObjectLayout#named()</code></a></p> 
              </div>
             </div></td> 
            <td class="tableblock halign-left valign-top">
             <div>
              <div class="paragraph"> 
               <p><a href="../rgant/rgant.html#_rgant-DomainObjectLayout_describedAs"><code>@DomainObjectLayout#describedAs()</code></a></p> 
              </div>
             </div></td> 
           </tr> 
           <tr> 
            <td class="tableblock halign-left valign-top">
             <div>
              <div class="paragraph"> 
               <p>Property</p> 
              </div>
             </div></td> 
            <td class="tableblock halign-left valign-top">
             <div>
              <div class="paragraph"> 
               <p><a href="../rgant/rgant.html#_rgant-PropertyLayout_named"><code>@PropertyLayout#named()</code></a></p> 
              </div>
             </div></td> 
            <td class="tableblock halign-left valign-top">
             <div>
              <div class="paragraph"> 
               <p><a href="../rgant/rgant.html#_rgant-PropertyLayout_describedAs"><code>@PropertyLayout#describedAs()</code></a></p> 
              </div>
             </div></td> 
           </tr> 
           <tr> 
            <td class="tableblock halign-left valign-top">
             <div>
              <div class="paragraph"> 
               <p>Collection</p> 
              </div>
             </div></td> 
            <td class="tableblock halign-left valign-top">
             <div>
              <div class="paragraph"> 
               <p><a href="../rgant/rgant.html#_rgant-CollectionLayout_named"><code>@CollectionLayout#named()</code></a></p> 
              </div>
             </div></td> 
            <td class="tableblock halign-left valign-top">
             <div>
              <div class="paragraph"> 
               <p><a href="../rgant/rgant.html#_rgant-CollectionLayout_describedAs"><code>@CollectionLayout#describedAs()</code></a></p> 
              </div>
             </div></td> 
           </tr> 
           <tr> 
            <td class="tableblock halign-left valign-top">
             <div>
              <div class="paragraph"> 
               <p>Action</p> 
              </div>
             </div></td> 
            <td class="tableblock halign-left valign-top">
             <div>
              <div class="paragraph"> 
               <p><a href="../rgant/rgant.html#_rgant-ActionLayout_named"><code>@ActionLayout#named()</code></a></p> 
              </div>
             </div></td> 
            <td class="tableblock halign-left valign-top">
             <div>
              <div class="paragraph"> 
               <p><a href="../rgant/rgant.html#_rgant-ActionLayout_describedAs"><code>@ActionLayout#describedAs()</code></a></p> 
              </div>
             </div></td> 
           </tr> 
           <tr> 
            <td class="tableblock halign-left valign-top">
             <div>
              <div class="paragraph"> 
               <p>Action Parameters</p> 
              </div>
             </div></td> 
            <td class="tableblock halign-left valign-top">
             <div>
              <div class="paragraph"> 
               <p><a href="../rgant/rgant.html#_rgant-ParameterLayout_named"><code>@ParameterLayout#named()</code></a></p> 
              </div>
             </div></td> 
            <td class="tableblock halign-left valign-top">
             <div>
              <div class="paragraph"> 
               <p><a href="../rgant/rgant.html#_rgant-ParameterLayout_describedAs"><code>@ParameterLayout#describedAs()</code></a></p> 
              </div>
             </div></td> 
           </tr> 
          </tbody> 
         </table> 
         <div class="admonitionblock tip"> 
          <table> 
           <tbody>
            <tr> 
             <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
             <td class="content"> 
              <div class="paragraph"> 
               <p>If you’re running on Java 8, then note that it’s possible to write Isis applications without using <code>@ParameterLayout(named=…​)</code> annotation. Support for this can be found in the (non-ASF) <a href="http://platform.incode.org" target="_blank">Incode Platform</a>'s paraname8 metamodel extension (non-ASF). (In the future we’ll fold this into core). See also our guidance on <a href="../../migration-notes/migration-notes.html#_migration-notes_1.8.0-to-1.9.0_upgrading-to-java8">upgrading to Java 8</a>.</p> 
              </div> </td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
         <div class="paragraph"> 
          <p>The framework also supports i18n: locale-specific names and descriptions. for more information, see the <a href="../ugbtb/ugbtb.html#_ugbtb_i18n">beyond-the-basics</a> guide.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_ui-hints_eager-rendering">7.5. Eager rendering</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_eager-rendering.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_eager-rendering.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_eager-rendering.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_eager-rendering.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_ui-hints_eager-rendering.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>By default, parented collections all rendered lazily, in other words in a "collapsed" table view.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For the more commonly used collections we want to show the table expanded:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/programming-model/todoapp-Dashboard.png"><img src="images/programming-model/todoapp-Dashboard.png" alt="todoapp Dashboard" width="px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>For this we annotate the collection using <a href="../rgant/rgant.html#_rgant_CollectionLayout_defaultView"><code>@CollectionLayout#defaultView()</code></a>; for example</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@javax</span>.jdo.annotations.Persistent(table=<span class="string"><span class="delimiter">"</span><span class="content">ToDoItemDependencies</span><span class="delimiter">"</span></span>)
<span class="directive">private</span> <span class="predefined-type">Set</span>&lt;ToDoItem&gt; dependencies = <span class="keyword">new</span> <span class="predefined-type">TreeSet</span>&lt;&gt;();
<span class="annotation">@Collection</span>
<span class="annotation">@CollectionLayout</span>(
    defaultView = <span class="string"><span class="delimiter">"</span><span class="content">table</span><span class="delimiter">"</span></span>
)
<span class="directive">public</span> <span class="predefined-type">Set</span>&lt;ToDoItem&gt; getDependencies() {
    <span class="keyword">return</span> dependencies;
}</code></pre> 
          </div> 
         </div> 
         <div class="admonitionblock note"> 
          <table> 
           <tbody>
            <tr> 
             <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
             <td class="content"> 
              <div class="paragraph"> 
               <p>The <code>defaultView()</code> attribute replaces the deprecated approach of using <a href="../rgant/rgant.html#_rgant_CollectionLayout_render"><code>@CollectionLayout#render()</code></a> eagerly.</p> 
              </div> </td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
         <div class="paragraph"> 
          <p>Alternatively, it can be specified the <code>Xxx.layout.xml</code> file:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="javascript">&lt;bs3:col span=<span class="string"><span class="delimiter">"</span><span class="content">5</span><span class="delimiter">"</span></span> cssClass=<span class="string"><span class="delimiter">"</span><span class="content">custom-padding-top-20</span><span class="delimiter">"</span></span>&gt;
    <span class="tag">&lt;cpt:collection</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">"</span><span class="content">notYetComplete</span><span class="delimiter">"</span></span> <span class="attribute-name">defaultView</span>=<span class="string"><span class="delimiter">"</span><span class="content">table</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;cpt:collection</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">"</span><span class="content">complete</span><span class="delimiter">"</span></span> <span class="attribute-name">defaultView</span>=<span class="string"><span class="delimiter">"</span><span class="content">table</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
&lt;<span class="regexp"><span class="delimiter">/</span><span class="content">bs3col&gt;</span></span></code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>It might be thought that collections that are eagerly rendered should also be eagerly loaded from the database by enabling the <code>defaultFetchGroup</code> attribute:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@javax</span>.jdo.annotations.Persistent(table=<span class="string"><span class="delimiter">"</span><span class="content">ToDoItemDependencies</span><span class="delimiter">"</span></span>, defaultFetchGroup=<span class="string"><span class="delimiter">"</span><span class="content">true</span><span class="delimiter">"</span></span>)
<span class="directive">private</span> <span class="predefined-type">Set</span>&lt;ToDoItem&gt; dependencies = <span class="keyword">new</span> <span class="predefined-type">TreeSet</span>&lt;&gt;();
...</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>While this can be done, it’s likely to be a bad idea, because doing so will cause DataNucleus to query for more data irrespective of how the object is used/rendered.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Of course, your mileage may vary, so do experiment.</p> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_ugfun_crud">8. Object Management (CRUD)</h2>
       <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
        <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
        <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
        <ul class="dropdown-menu">
         <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
         <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
         <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
         <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
        </ul>
       </div> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>This chapter shows the idioms for creating, reading, updating and deleting <a href="../ugfun/ugfun.html#_ugfun_building-blocks_types-of-domain-objects_domain-entities">domain entities</a>.</p> 
        </div> 
        <div class="paragraph"> 
         <p>It also shows how to instantiate <a href="../ugfun/ugfun.html#_ugfun_building-blocks_types-of-domain-objects_view-models">view models</a> and how to programmatically instantiate <a href="../ugfun/ugfun.html#_ugfun_building-blocks_types-of-domain-objects_mixins">mixins</a> (useful primarily for <a href="../ugtst/ugtst.html#_ugtst_integ-test-support">integration testing</a>).</p> 
        </div> 
        <div class="admonitionblock note"> 
         <table> 
          <tbody>
           <tr> 
            <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
            <td class="content"> 
             <div class="paragraph"> 
              <p>The main domain services used are <a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-api_RepositoryService"><code>RepositoryService</code></a> and <a href="../rgsvc/rgsvc.html#_rgsvc_core-domain-api_FactoryService"><code>FactoryService</code></a>. These (and some other services) replace the now deprecated <a href="../rgsvc/rgsvc.html#_rgsvc_core-domain-api_DomainObjectContainer"><code>DomainObjectContainer</code></a>.</p> 
             </div> </td> 
           </tr> 
          </tbody>
         </table> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_crud_instantiating">8.1. Instantiating</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_instantiating.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_instantiating.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_instantiating.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_instantiating.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_instantiating.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>Both domain entities and view models can be instantiated using the <a href="../rgsvc/rgsvc.html#_rgsvc_core-domain-api_FactoryService"><code>FactoryService</code></a> provided by the framework. For example:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java">Customer customer = factoryService.instantiate(Customer.class);</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>or</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java">Dashboard dashboardVM = factoryService.instantiate(Dashboard.class);</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>When the framework instantiates the object, all services are injected into the framework, and an <code>ObjectCreatedEvent</code> <a href="../ugfun/ugfun.html#_ugfun_building-blocks_events_lifecycle-events">lifecycle event</a> will also be emitted.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For this to work the target class <em>must</em> have a no-arg constructor.</p> 
         </div> 
         <div class="paragraph"> 
          <p>However, you may prefer for your domain objects to have regular constructor defining their minimum set of mandatory properties.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For example:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Customer</span> {

    <span class="directive">public</span> Customer(<span class="predefined-type">String</span> reference, <span class="predefined-type">String</span> firstName, <span class="predefined-type">String</span> lastName) { ... }

    ...
}</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>In such cases, the domain object cannot be instantiated using <code>FactoryService</code>. Instead the <a href="../rgsvc/rgsvc.html#_rgsvc_metadata-api_ServiceRegistry"><code>ServiceRegistry</code></a> service can be used to inject services:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java">Customer customer = <span class="keyword">new</span> Customer(reference, firstName, lastName);
serviceRegister.injectServicesInto(customer);</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Note that this does <em>not</em> raise any lifecycle event.</p> 
         </div> 
         <div class="paragraph"> 
          <p>To instantiate a mixin, a different API of <code>FactoryService</code> is used:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java">Customer_placeOrder placeOrderMixin = factoryService.mixin(Customer_placeOrder.class, customer);</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Alternatively and equivalently, the mixin can be manually instantiated, and then the services injected directly:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java">Customer_placeOrder placeOrderMixin = <span class="keyword">new</span> Customer_placeOrder(customer);
serviceRegistry.injectServicesInto(placeOrderMixin);</code></pre> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_crud_persisting">8.2. Persisting</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_persisting.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_persisting.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_persisting.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_persisting.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_persisting.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>Once a domain entity has been instantiated, it must be persisted. This is done using the <a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-api_RepositoryService"><code>RepositoryService</code></a>. For example:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java">Customer customer = ...

repositoryService.persist(customer);</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>If using the no-arg form to instantiate the entity, then (to save having to inject two services), the <code>RepositoryService</code> can also be used to instantiate. This gives rise to this common idiom:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java">Customer customer = repositoryService.instantiate(Customer.class);
customer.setReference(reference);
customer.setFirstName(firstName);
customer.setLastName(lastName);
...
repositoryService.persist(customer);</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>It’s worth being aware that the framework does <em>not</em> eagerly persist the object. Rather, it queues up an internal command structure representing the object persistence request. This is then executed either at the end of the transaction, or if a <a href="../ugfun/ugfun.html#_ugfun_crud_finding">query is run</a>, or if the internal queue is manually flushed using <a href="../rgsvc/rgsvc.html#_rgsvc_application-layer-api_TransactionService"><code>TransactionService</code></a>'s <code>flush()</code> method.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Alternatively, you can use:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java">repositoryService.persistAndFlush(customer);</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>to eagerly perform the object insertion into the database.</p> 
         </div> 
         <div class="paragraph"> 
          <p>When an object is persisted the framework will emit <code>ObjectPersistingEvent</code> and <code>ObjectPersistedEvent</code> <a href="../ugfun/ugfun.html#_ugfun_building-blocks_events_lifecycle-events">lifecycle events</a>.</p> 
         </div> 
         <div class="admonitionblock tip"> 
          <table> 
           <tbody>
            <tr> 
             <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
             <td class="content"> 
              <div class="paragraph"> 
               <p>It is also possible to configure DataNucleus to automatically persist domain entities if they are associated with other already-persistent entities. This avoid the need to explicitly call "persist".</p> 
              </div> 
              <div class="paragraph"> 
               <p>For this, configure the persistence-by-reachability property:</p> 
              </div> 
              <div class="listingblock"> 
               <div class="title">
                isis.properties
               </div> 
               <div class="content"> 
                <pre class="CodeRay highlight"><code data-lang="ini">isis.persistor.datanucleus.impl.datanucleus.persistenceByReachabilityAtCommit=true</code></pre> 
               </div> 
              </div> 
              <div class="paragraph"> 
               <p>The downside is that the code is arguably less easy to debug.</p> 
              </div> </td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_crud_finding">8.3. Finding Objects</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_finding.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_finding.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_finding.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_finding.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_finding.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>Retrieving domain entities typically requires a JDOQL query defined on the domain entity, and a corresponding repository service for that domain entity type. This repository calls the framework-provided <a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-api_RepositoryService"><code>RepositoryService</code></a> to actually submit the query.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For example:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@javax</span>.jdo.annotations.Queries({
    <span class="annotation">@javax</span>.jdo.annotations.Query(                       <i class="conum" data-value="1"></i><b>(1)</b>
        name = <span class="string"><span class="delimiter">"</span><span class="content">findByName</span><span class="delimiter">"</span></span>,                            <i class="conum" data-value="2"></i><b>(2)</b>
        value = <span class="string"><span class="delimiter">"</span><span class="content">SELECT </span><span class="delimiter">"</span></span>                               <i class="conum" data-value="3"></i><b>(3)</b>
                + <span class="string"><span class="delimiter">"</span><span class="content">FROM com.mydomain.myapp.Customer </span><span class="delimiter">"</span></span>   <i class="conum" data-value="4"></i><b>(4)</b>
                + <span class="string"><span class="delimiter">"</span><span class="content">WHERE name.indexOf(:name) &gt;= 0 </span><span class="delimiter">"</span></span>)    <i class="conum" data-value="5"></i><b>(5)</b>
})
...
public <span class="type">class</span> <span class="class">Customer</span> { ... }</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody>
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>There may be several <code>@Query</code> annotations, nested within a <code>@Queries</code> annotation) defines queries using JDOQL.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Defines the name of the query.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="3"></i><b>3</b></td> 
             <td>The definition of the query, using JDOQL syntax.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="4"></i><b>4</b></td> 
             <td>The fully-qualified class name. Must correspond to the class on which the annotation is defined (the framework checks this automatically on bootstrapping).</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="5"></i><b>5</b></td> 
             <td>In this particular query, is an implementation of a LIKE "name%" query.</td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
         <div class="paragraph"> 
          <p>and</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainService</span>(nature=NatureOfService.DOMAIN)
<span class="directive">public</span> <span class="type">class</span> <span class="class">CustomerRepository</span> {

    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;Customer&gt; findByName(<span class="predefined-type">String</span> name) {
        <span class="keyword">return</span> repositoryService.allMatches(            <i class="conum" data-value="1"></i><b>(1)</b>
                <span class="keyword">new</span> QueryDefault&lt;&gt;(Customer.class,      <i class="conum" data-value="2"></i><b>(2)</b>
                            <span class="string"><span class="delimiter">"</span><span class="content">findByName</span><span class="delimiter">"</span></span>,               <i class="conum" data-value="3"></i><b>(3)</b>
                            <span class="string"><span class="delimiter">"</span><span class="content">name</span><span class="delimiter">"</span></span>,                     <i class="conum" data-value="4"></i><b>(4)</b>
                            name);
    }

    <span class="annotation">@javax</span>.inject.Inject
    RepositoryService repositoryService;
}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody>
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>The <a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-api_RepositoryService"><code>RepositoryService</code></a> is a generic facade over the JDO/DataNucleus API.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Specifies the class that is annotated with @Query</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="3"></i><b>3</b></td> 
             <td>Corresponds to the <code>@Query#name()</code> attribute</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="4"></i><b>4</b></td> 
             <td>Corresponds to the <code>:name</code> parameter in the query JDOQL string</td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
         <div class="paragraph"> 
          <p>Whenever a query is submitted, the framework will automatically "flush" any pending changes. This ensures that the database query runs against an up-to-date table so that all matching instances (with respect to the current transaction) are correctly retrieved.</p> 
         </div> 
         <div class="paragraph"> 
          <p>When an object is loaded from the database the framework will emit <code>ObjectLoadedEvent</code> <a href="../ugfun/ugfun.html#_ugfun_building-blocks_events_lifecycle-events">lifecycle event</a>.</p> 
         </div> 
         <div class="sect3"> 
          <h4 id="_type_safe_queries">8.3.1. Type-safe queries</h4> 
          <div class="paragraph"> 
           <p>DataNucleus also supports type-safe queries; see <a href="../rgsvc/rgsvc.html#__rgsvc_persistence-layer-api_IsisJdoSupport_type-safe-jdoql-queries">here</a> for further details.</p> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_crud_updating">8.4. Updating Objects</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_updating.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_updating.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_updating.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_updating.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_updating.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>There is no specific API to update a domain entity. Rather, the ORM (DataNucleus) automatically keeps track of the state of each object and will update the corresponding database rows when the transaction completes.</p> 
         </div> 
         <div class="paragraph"> 
          <p>That said, it is possible to "flush" pending changes:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_application-layer-api_TransactionService"><code>TransactionService</code></a> acts at the Apache Isis layer, and flushes any pending object persistence or object deletions</p> </li> 
           <li> <p>using <a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-api_IsisJdoSupport"><code>IsisJdoSupport</code></a> it is possible to reach down to the underlying JDO API, and perform a flush of pending object updates also.</p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>When an object is updated the framework will emit <code>ObjectUpdatingEvent</code> and <code>ObjectUpdatedEvent</code> <a href="../ugfun/ugfun.html#_ugfun_building-blocks_events_lifecycle-events">lifecycle events</a>.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_crud_deleting">8.5. Deleting Objects</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_deleting.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_deleting.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_deleting.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_deleting.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_crud_deleting.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>Domain entities can be deleted using <a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-api_RepositoryService"><code>RepositoryService</code></a>. For example:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java">Customer customer = ...
repositoryService.remove(customer);</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>It’s worth being aware that (as for persisting new entities) the framework does <em>not</em> eagerly delete the object. Rather, it queues up an internal command structure representing the object deletion request. This is then executed either at the end of the transaction, or if a <a href="../ugfun/ugfun.html#_ugfun_crud_finding">query is run</a>, or if the internal queue is manually flushed using <a href="../rgsvc/rgsvc.html#_rgsvc_application-layer-api_TransactionService"><code>TransactionService</code></a>'s <code>flush()</code> method.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Alternatively, you can use:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java">repositoryService.removeAndFlush(customer);</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>to eagerly perform the object deletion from the database.</p> 
         </div> 
         <div class="paragraph"> 
          <p>When an object is deleted the framework will emit <code>ObjectRemovingEvent</code> <a href="../ugfun/ugfun.html#_ugfun_building-blocks_events_lifecycle-events">lifecycle event</a>.</p> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_ugfun_business-rules">9. Business Rules</h2>
       <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
        <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_business-rules.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
        <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
        <ul class="dropdown-menu">
         <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_business-rules.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
         <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_business-rules.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
         <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_business-rules.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
         <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_business-rules.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
        </ul>
       </div> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>When a domain object is rendered in the UI or the end-user interacts with the domain object through the UI, the framework applies a series of precondition business rules to each object member (property, collection or action).</p> 
        </div> 
        <div class="paragraph"> 
         <p>When the object is being rendered, the framework checks:</p> 
        </div> 
        <div class="ulist"> 
         <ul> 
          <li> <p>is the object member visible?<br></p> 
           <div class="paragraph"> 
            <p>Members that are not visible are simply omitted from the page. If all the members in a fieldset (property group) are hidden, then the fieldset is not shown. If all the members in a tab are hidden, then the tab is not shown. If all the members of the object are hidden, then a "404" style message ("no such object") is returned to the user.</p> 
           </div> </li> 
          <li> <p>if the object member is visible, is the object member enabled?<br></p> 
           <div class="paragraph"> 
            <p>An enabled property can be edited (otherwise it is read-only), and an enabled action can be invoked (otherwise it’s button is "greyed-out"). Note that collections are always read-only.</p> 
           </div> </li> 
          <li> <p>for enabled object members, if the user then interacts with that member, are the supplied values valid (can the user "do it").<br></p> 
           <div class="paragraph"> 
            <p>For an editable property this means validating the proposed new value of the property. For an invokable action this means validating that arguments being used to invoke the action.</p> 
           </div> </li> 
         </ul> 
        </div> 
        <div class="paragraph"> 
         <p>One way to remember this is: <strong>"see it, use it, do it"</strong></p> 
        </div> 
        <div class="paragraph"> 
         <p>The framework provides a multitude of ways to implement these business rules. One decoupled approach is using <a href="../ugfun/ugfun.html#_ugfun_building-blocks_events_domain-events">domain events</a>; the checks above correspond to the phases of the domain event. A simpler approach is to just implement the business rules imperatively in the domain object, or in a mixin for the object.</p> 
        </div> 
        <div class="sect2"> 
         <h3 id="_visibility_see_it">9.1. Visibility ("see it")</h3> 
         <div class="paragraph"> 
          <p>To hide an object action:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> Customer placeOrder(Product p, <span class="type">int</span> quantity) { ... }
<span class="directive">public</span> <span class="type">boolean</span> hidePlaceOrder() { ... }</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>If the <code>hideXxx</code> method returns <code>true</code> then the action is hidden. Note that the supporting method takes no parameters.</p> 
         </div> 
         <div class="paragraph"> 
          <p>A property or collection can be hidden similarly:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="predefined-type">String</span> getStatus() { ... }
<span class="directive">public</span> <span class="type">void</span> setStatus(<span class="predefined-type">String</span> status) { ... }

<span class="directive">public</span> <span class="type">boolean</span> hideStatus() { ... }</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>For more information, see the <a href="../rgcms/rgcms.html#_rgcms_methods_prefixes_hide"><code>hide…​()</code></a> section in the appropriate reference guide.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_usability_use_it">9.2. Usability ("use it")</h3> 
         <div class="paragraph"> 
          <p>To disable an object action:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> Customer placeOrder(Product p, <span class="type">int</span> quantity) { ... }
<span class="directive">public</span> <span class="predefined-type">String</span> disablePlaceOrder() { ... }</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Here a non-<code>null</code> value is used as the reason why the action is disabled. It is also possible to return a localized string by returning a <code>TranslatableString</code>.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Properties are similar (note that collections are implicitly read-only in the <a href="../ugvw/ugvw.html">Wicket viewer</a>:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="predefined-type">String</span> getStatus() { ... }
<span class="directive">public</span> <span class="type">void</span> setStatus(<span class="predefined-type">String</span> status) { ... }

<span class="directive">public</span> <span class="predefined-type">String</span> disableStatus() { ... }</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>For more information, see <a href="../rgcms/rgcms.html#_rgcms_methods_prefixes_disable"><code>disable…​()</code></a> section in the appropriate reference guide.</p> 
         </div> 
         <div class="paragraph"> 
          <p>It is also possible to make all properties of a domain object unmodifiable, using:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainObject</span>(
    editing=Editing.DISABLED
)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Customer</span> { ... }</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>This can be made a global policy using a <a href="../rgcfg/rgcfg.html#__rgcfg_configuring-core_isis-objects-editing">configuration setting</a>:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="title">
           isis.properties
          </div> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="ini">isis.objects.editing=false</code></pre> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_validity_do_it">9.3. Validity ("do it")</h3> 
         <div class="paragraph"> 
          <p>Action arguments can be validated either singly or as a set. For example:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> Customer placeOrder(Product p, <span class="type">int</span> quantity) { ... }
<span class="directive">public</span> <span class="predefined-type">String</span> validate0PlaceOrder(Product p) { ... }               <i class="conum" data-value="1"></i><b>(1)</b>
<span class="directive">public</span> <span class="predefined-type">String</span> validate1PlaceOrder(<span class="type">int</span> quantity) { ... }            <i class="conum" data-value="2"></i><b>(2)</b>
<span class="directive">public</span> <span class="predefined-type">String</span> validatePlaceOrder(Product p, <span class="type">int</span> quantity) { ... }  <i class="conum" data-value="3"></i><b>(3)</b></code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody>
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>validates the 0th argument of the action (0-based numbering), ie <code>Product</code></td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>validates the 1st argument of the action, ie <code>int quantity</code></td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="3"></i><b>3</b></td> 
             <td>validates all the arguments of the action together.</td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
         <div class="paragraph"> 
          <p>The framework validates each argument separately; only if all are valid does it check all the arguments together.</p> 
         </div> 
         <div class="paragraph"> 
          <p>As for usability check, a non-<code>null</code> value is used as the reason why the action arguments are invalid. It is also possible to return a localized string by returning a <code>TranslatableString</code>.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Similarly, property edits can also be validated:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="predefined-type">String</span> getStatus() { ... }
<span class="directive">public</span> <span class="type">void</span> setStatus(<span class="predefined-type">String</span> status) { ... }

<span class="directive">public</span> <span class="predefined-type">String</span> validateStatus(<span class="predefined-type">String</span> status) { ... }</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>For more information, see the <a href="../rgcms/rgcms.html#_rgcms_methods_prefixes_validate"><code>validate…​()</code></a> section in the appropriate reference guide. The reference guide also explains how to define validation declaratively, using the <a href="../rgant/rgant.html#_rgant-Parameter_mustSatisfy"><code>@Parameter#mustSatisfy()</code></a> or <a href="../rgant/rgant.html#_rgant-Property_mustSatisfy"><code>@Property#mustSatisfy()</code></a> attributes.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_actions_2">9.4. Actions</h3> 
         <div class="paragraph"> 
          <p>Of course, the precondition business rules described above are only one type of business rule.</p> 
         </div> 
         <div class="paragraph"> 
          <p>More generally, business rules are implemented in the form of the implementation of actions. Rather than have the end-user have to edit individual properties of numerous objects, an action can encode these rules and allow only safe transformations of the application from one consistent state to the next.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_side_effects">9.5. Side effects</h3> 
         <div class="paragraph"> 
          <p>Often when the state of an object is modified there is a business rule for some sort of side-effect. For example, suppose that a <code>Person</code> has a persisted derived property:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Person</span> {

    <span class="annotation">@Getter</span> <span class="annotation">@Setter</span>                     <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">private</span> LocalDate dateOfBirth;

    <span class="annotation">@Getter</span> <span class="annotation">@Setter</span>
    <span class="directive">private</span> <span class="type">int</span> age;                    <i class="conum" data-value="2"></i><b>(2)</b></code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody>
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>using Lombok to remove boilerplate.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>persisted derived property based on <code>dateOfBirth</code>.</td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
         <div class="paragraph"> 
          <p>One design would be to only allow the two properties to be modified through an action:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> Person updateDateOfBirth(LocalDate dateOfBirth) {
    setDateOfBirth(dateOfBirth);
    setAge(Years.between(clockService.now(), dateOfBirth));
    <span class="keyword">return</span> <span class="local-variable">this</span>;
}</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Alternatively we could allow the property to be edited, and then compute the side-effect.</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> setDateOfBirth(LocalDate dateOfBirth) {
    <span class="local-variable">this</span>.dateOfBirth = dateOfBirth;
    setAge(Years.between(clockService.now(), dateOfBirth));
    <span class="keyword">return</span> <span class="local-variable">this</span>;
}</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Datanucleus does <em>not</em> call the setter when reloading the object from the database, so there is no issue in having the side-effect code (calling <code>setAge(…​)</code>).</p> 
         </div> 
         <div class="admonitionblock note"> 
          <table> 
           <tbody>
            <tr> 
             <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
             <td class="content"> 
              <div class="paragraph"> 
               <p>The framework also allows side-effect code to be placed in separate <a href="../rgcms/rgcms.html#_rgcms_methods_prefixes_modify"><code>modify…​()</code></a>, <a href="../rgcms/rgcms.html#_rgcms_methods_prefixes_clear"><code>clear…​()</code></a> supporting methods; if present then these will be called by the framework rather than the setter. However, because of DataNucleus' smart handling of setters, these supporting methods are in essence redundant, and so should be considered deprecated.</p> 
              </div> </td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_ugfun_drop-downs-and-defaults">10. Drop Downs and Defaults</h2>
       <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
        <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_drop-downs-and-defaults.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
        <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
        <ul class="dropdown-menu">
         <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_drop-downs-and-defaults.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
         <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_drop-downs-and-defaults.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
         <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_drop-downs-and-defaults.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
         <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_drop-downs-and-defaults.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
        </ul>
       </div> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>Invoking an action whose parameters are primitives or values (int, date, string etc) is simple: the user can just type in or use a date picker. Invoking an action with a parameter of reference type (such as <code>Customer</code> or <code>Order</code>) requires the viewer to provide some mechanism by which the end-user can select the relevant instance.</p> 
        </div> 
        <div class="paragraph"> 
         <p>If the list of available options is fixed then the developer can provided a list a <a href="../rgcms/rgcms.html#_rgcms_methods_prefixes_choices"><code>choices…​()</code></a> supporting method (for either and action parameter or when editing a property). These are rendered in a drop-down.</p> 
        </div> 
        <div class="paragraph"> 
         <p>If the list of available options is much larger, then the developer can use an <a href="../rgcms/rgcms.html#_rgcms_methods_prefixes_autoComplete"><code>autoComplete…​()</code></a> supporting method. The user user enters a few characters and this is used to search for matching reference(s), again rendered in a drop-down.</p> 
        </div> 
        <div class="paragraph"> 
         <p>Similarly, when invoking an action, there may well be suitable defaults for the action arguments. For example, if placing an <code>Order</code> then — even if the <code>Product</code> argument might not have a sensible default — the quantity argument could reasonably be defaulted to 1. Or, the <code>Product</code> might indeed have a default, say the product previously placed by this user. The developer indicates this using a <a href="../rgcms/rgcms.html#_rgcms_methods_prefixes_default"><code>default…​()</code></a> supporting method.</p> 
        </div> 
        <div class="sect2"> 
         <h3 id="_choices_and_default">10.1. Choices and Default</h3> 
         <div class="paragraph"> 
          <p>For example, <em>choices</em> for a property are specified using:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Getter</span> <span class="annotation">@Setter</span>
<span class="directive">private</span> <span class="predefined-type">String</span> paymentMethod;

<span class="directive">public</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; choicesPaymentMethod() {
    <span class="keyword">return</span> <span class="predefined-type">Arrays</span>.asList(<span class="string"><span class="delimiter">"</span><span class="content">Visa</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">Mastercard</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">Amex</span><span class="delimiter">"</span></span>);
}</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Note the "choices" prefix, while the suffix matches up with the getter.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Or, for an action the <em>choices</em> and a suitable <em>default</em> method would be:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> Order changePaymentMethod(
                <span class="annotation">@ParameterLayout</span>(named=<span class="string"><span class="delimiter">"</span><span class="content">Payment Method</span><span class="delimiter">"</span></span>)
                <span class="predefined-type">String</span> paymentMethod) {
    setPaymentMethod(paymentMethod);
    <span class="keyword">return</span> <span class="local-variable">this</span>;
}

<span class="directive">public</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; choices0ChangePaymentMethod() {
    <span class="keyword">return</span> <span class="predefined-type">Arrays</span>.asList(<span class="string"><span class="delimiter">"</span><span class="content">Visa</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">Mastercard</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">Amex</span><span class="delimiter">"</span></span>);
}

<span class="directive">public</span> <span class="predefined-type">String</span> default0ChangePaymentMethod() {
    <span class="keyword">return</span> getPaymentMethod();
}</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Note the "choices" and "default" prefix, the digit is the 0-based argument number, while the suffix matches up with the action’s name.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_autocomplete">10.2. AutoComplete</h3> 
         <div class="paragraph"> 
          <p>The <em>autocomplete</em> is similar to <em>choices</em>, but accepts a string parameter, to search for matching results. A property for example might have:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Getter</span> <span class="annotation">@Setter</span>
<span class="directive">private</span> Product product;

<span class="directive">public</span> <span class="predefined-type">List</span>&lt;Product&gt; autoCompleteProduct(<span class="annotation">@MinLength</span>(<span class="integer">2</span>) <span class="predefined-type">String</span> search) {
    <span class="keyword">return</span> productRepository.findByReferenceOrName(search);
}</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Note the "autoComplete" prefix, while (again) the suffix matches up with the getter. The <code>@MinLength(…​)</code> annotation indicates the minimum number of characters that must be entered before a search is initiated.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Actions are very similar:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> Order changeProduct(Product product) {
    setProduct(product);
    <span class="keyword">return</span> <span class="local-variable">this</span>;
}

<span class="directive">public</span> <span class="predefined-type">List</span>&lt;Product&gt; autoComplete0Product(<span class="annotation">@MinLength</span>(<span class="integer">2</span>) <span class="predefined-type">String</span> search) {
    <span class="keyword">return</span> productRepository.findByReferenceOrName(search);
}</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>An <em>autoComplete</em> method can be used in conjunction with a <em>default</em> method, but it doesn’t make sense to provide both an <em>autoComplete</em> and a <em>choices</em> method.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="__globally_defined_drop_downs">10.3. "Globally" defined drop-downs</h3> 
         <div class="paragraph"> 
          <p>Very often the set of available choices depends on the data type of the property/action parameter, rather than the individual property/parameter itself. And similarly the algorithm to search for references again may well depend only on that reference type.</p> 
         </div> 
         <div class="paragraph"> 
          <p>In the case of <em>choices</em>, annotating a class as "bounded" (as in a "bounded" or fixed number of instances) means that a <em>choices</em> drop-down will automatically be defined. For example:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainObject</span>(
    bounded = <span class="predefined-constant">true</span>
)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Product</span> { ... }</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>For more on this, see <a href="../rgant/rgant.html#_rgant-DomainObject_bounded"><code>@DomainObject#bounded()</code></a>.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Or, if the data type is an enum, then a drop-down will be provided automatically. A payment method is a good example of this:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">enum</span> PaymentMethod {
    VISA, MASTERCARD, AMEX;
}</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Something similar can be achieved for <em>autoComplete</em>. Here the domain object indicates a repository query to execute. For example:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainObject</span>(
    autoCompleteRepository = Customers.class,
    autoCompleteAction = <span class="string"><span class="delimiter">"</span><span class="content">findByReferenceOrName</span><span class="delimiter">"</span></span>
)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Customer</span> { ... }</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>with:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainService</span>(nature=NatureOfService.VIEW_MENU_ONLY)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Customers</span> {
    <span class="annotation">@Action</span>(semantics=SemanticsOf.SAFE)
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;Customer&gt; findByReferenceOrName(<span class="annotation">@MinLength</span>(<span class="integer">3</span>) <span class="predefined-type">String</span> refOrName) {
        ...
    }
}</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>For more on this, see <a href="../rgant/rgant.html#_rgant-DomainObject_autoCompleteRepository"><code>@DomainObject#autoCompleteRepository()</code></a>.</p> 
         </div> 
         <div class="admonitionblock tip"> 
          <table> 
           <tbody>
            <tr> 
             <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
             <td class="content"> 
              <div class="paragraph"> 
               <p>There’s no need for the nominated method to be an actual action; any method of any domain service will do, so long as it accepts a string and returns the correct list.</p> 
              </div> </td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_multi_select_action_parameters">10.4. Multi-select action parameters</h3> 
         <div class="paragraph"> 
          <p>As well as scalar values, action parameters can also be collections. For this to be valid, a <em>choices</em> or <em>autoComplete</em> supporting method must be provided.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For example, suppose we want to "tag" or "label" an object:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> StoryCard tag(<span class="predefined-type">List</span>&lt;Tag&gt; tags) {
    getTags().addAll(tags);
}

<span class="directive">public</span> <span class="predefined-type">List</span>&lt;Tag&gt; autoCompleteTag(<span class="annotation">@MinLength</span>(<span class="integer">1</span>) search) {
    <span class="keyword">return</span> tagRepository.findByName(search);
}</code></pre> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_dependent_choices_for_action_parameters">10.5. Dependent choices for action parameters</h3> 
         <div class="paragraph"> 
          <p>For action it is also possible (in a limited form) to define dependencies between parameters. Specifically, if one parameter is a drop-down choice, then other drop-down choices can be derived from it.</p> 
         </div> 
         <div class="paragraph"> 
          <p>A good example is a category/sub-category:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> ToDoItem categorize(Category category, Subcategory subcategory) {
    setCategory(category);
    setSubcategory(subcategory);
}

<span class="directive">public</span> <span class="predefined-type">List</span>&lt;Category&gt; choices0Categorize() {
    <span class="keyword">return</span> categoryRepository.allCategories();
}
<span class="directive">public</span> <span class="predefined-type">List</span>&lt;Subcategory&gt; choices1Categorize(Category category) {
    <span class="keyword">return</span> subcategoryRepository.findBy(category);
}</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Note how the <em>choices</em> method for the 2nd parameter also accepts the first parameter.</p> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_ugfun_available-domain-services">11. Available Domain Services</h2>
       <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
        <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_available-domain-services.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
        <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
        <ul class="dropdown-menu">
         <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_available-domain-services.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
         <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_available-domain-services.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
         <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_available-domain-services.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
         <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_available-domain-services.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
        </ul>
       </div> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>There are a number of domain services/modules already implemented for you to use directly within your applications. Some of these are provided by the framework, while others are third-party (but still open source).</p> 
        </div> 
        <div class="paragraph"> 
         <p>This chapter surveys some of the domain services currently available.</p> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_available-domain-services_framework-provided">11.1. Framework-provided Services</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_available-domain-services_framework-provided.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_available-domain-services_framework-provided.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_available-domain-services_framework-provided.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_available-domain-services_framework-provided.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_available-domain-services_framework-provided.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>Most framework domain services are API: they exist to provide support functionality to the application’s domain objects and services. In this case an implementation of the service will be available, either by Apache Isis itself or by Isis Addons (non ASF).</p> 
         </div> 
         <div class="paragraph"> 
          <p>Some framework domain services are SPI: they exist primarily so that the application can influence the framework’s behaviour. In these cases there is (usually) no default implementation; it is up to the application to provide an implementation.</p> 
         </div> 
         <div class="paragraph"> 
          <p>General purpose:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_core-domain-api_DomainObjectContainer"><code>DomainObjectContainer</code></a>; mostly deprecated, replaced by:</p> 
            <div class="ulist"> 
             <ul> 
              <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_core-domain-api_ClockService"><code>ClockService</code></a></p> </li> 
              <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_core-domain-api_ConfigurationService"><code>ConfigurationService</code></a></p> </li> 
              <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_application-layer-api_MessageService"><code>MessageService</code></a></p> </li> 
              <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-api_RepositoryService"><code>RepositoryService</code></a></p> </li> 
              <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_metadata-api_ServiceRegistry"><code>ServiceRegistry</code></a></p> </li> 
              <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_application-layer-api_TitleService"><code>TitleService</code></a></p> </li> 
              <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_core-domain-api_UserService"><code>UserService</code></a></p> </li> 
             </ul> 
            </div> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-api_IsisJdoSupport"><code>IsisJdoSupport</code></a></p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_application-layer-api_WrapperFactory"><code>WrapperFactory</code></a></p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_core-domain-api_EventBusService"><code>EventBusService</code></a></p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_integration-api_EmailService"><code>EmailService</code></a></p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>Commands/Interactions/Background/Auditing/Publishing/Profiling:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_application-layer-api_CommandContext"><code>CommandContext</code></a> (SPI)</p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_application-layer-spi_CommandService"><code>CommandService</code></a> (SPI)</p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_application-layer-api_InteractionContext"><code>InteractionContext</code></a> (SPI)</p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-spi_AuditingService"><code>AuditingService</code></a> (SPI) (deprecated)</p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-spi_AuditerService"><code>AuditerService</code></a> (SPI)</p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_application-layer-api_BackgroundService"><code>BackgroundService</code></a></p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_application-layer-spi_BackgroundCommandService"><code>BackgroundCommandService</code></a> (SPI)</p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-spi_PublishingService"><code>PublishingService</code></a> (SPI) (deprecated)</p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-spi_PublisherService"><code>PublishererService</code></a> (SPI)</p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-api_MetricsService"><code>MetricsService</code></a></p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>Information Sharing:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_core-domain-api_Scratchpad"><code>Scratchpad</code></a></p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_application-layer-api_ActionInvocationContext"><code>ActionInvocationContext</code></a></p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-api_QueryResultsCache"><code>QueryResultsCache</code></a></p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>UserManagement:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_presentation-layer-spi_UserProfileService"><code>UserProfileService</code></a> (SPI)</p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-spi_UserRegistrationService"><code>UserRegistrationService</code></a> (SPI)</p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_presentation-layer-spi_EmailNotificationService"><code>EmailNotificationService</code></a> (SPI)</p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>Bookmarks and Mementos:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_integration-api_BookmarkService"><code>BookmarkService</code></a></p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_integration-api_MementoService"><code>MementoService</code></a></p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_presentation-api_DeepLinkService"><code>DeepLinkService</code></a></p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_integration-api_JaxbService"><code>JaxbService</code></a></p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_integration-api_XmlSnapshotService"><code>XmlSnapshotService</code></a></p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>Layout and UI Management:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_presentation-layer-spi_GridLoaderService"><code>GridLoaderService</code></a> (SPI)</p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_presentation-layer-spi_GridService"><code>GridService</code></a> (SPI)</p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_presentation-layer-spi_GridSystemService"><code>GridSystemService</code></a> (SPI)</p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_application-layer-spi_HomePageProviderService"><code>HomePageProviderService</code></a></p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_presentation-layer-spi_HintStore"><code>HintStore</code></a> (SPI)</p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_metadata-api_LayoutService"><code>LayoutService</code></a></p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_presentation-layer-spi_RoutingService"><code>RoutingService</code></a> (SPI)</p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_presentation-layer-spi_UrlEncodingService"><code>UrlEncodingService</code></a> (SPI)</p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>REST Support:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_presentation-layer-api_AcceptHeaderService"><code>AcceptHeaderService</code></a></p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_metadata-api_SwaggerService"><code>SwaggerService</code></a></p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_presentation-layer-spi_ContentMappingService"><code>ContentMappingService</code></a> (SPI)</p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>Metamodel:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_metadata-api_ApplicationFeatureRepository"><code>ApplicationFeatureRepository</code></a></p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_metadata-api_MetamodelService"><code>MetamodelService</code></a></p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>Other API:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_testing_FixtureScripts"><code>FixtureScripts</code></a></p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_presentation-api_GuiceBeanProvider"><code>GuiceBeanProvider</code></a></p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_testing_SudoService"><code>SudoService</code></a></p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_application-layer-api_TransactionService"><code>TransactionService</code></a></p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>Other SPI:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_bootstrapping-spi_ClassDiscoveryService"><code>ClassDiscoveryService</code></a> (SPI)</p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_presentation-layer-spi_ErrorReportingService"><code>ErrorReportingService</code></a> (SPI)</p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_persistence-layer-spi_EventSerializer"><code>EventSerializer</code></a> (SPI)</p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_presentation-layer-spi_ExceptionRecognizer"><code>ExceptionRecognizer</code></a> (SPI)</p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_testing_FixtureScriptsSpecificationProvider"><code>FixtureScriptsSpecificationProvider</code></a> (SPI)</p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_presentation-layer-spi_LocaleProvider"><code>LocaleProvider</code></a> (SPI)</p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_presentation-layer-spi_TranslationService"><code>TranslationService</code></a> (SPI)</p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_presentation-layer-spi_TranslationsResolver"><code>TranslationsResolver</code></a> (SPI)</p> </li> 
           <li> <p><a href="../rgsvc/rgsvc.html#_rgsvc_presentation-layer-spi_TranslationsResolver"><code>TranslationsResolver</code></a> (SPI)</p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>A full list of services can be found in the <a href="../rgsvc/rgsvc.html#_rgsvc">Domain Services</a> reference guide.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_ugfun_available-domain-services_incode-platform">11.2. Incode Platform</h3>
         <div class="btn-group" style="float: right; font-size: small; padding: 6px; margin-top: -55px; ">
          <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_available-domain-services_incode-platform.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
          <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
          <ul class="dropdown-menu">
           <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_available-domain-services_incode-platform.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
           <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_available-domain-services_incode-platform.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
           <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_available-domain-services_incode-platform.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
           <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/guides/ugfun/_ugfun_available-domain-services_incode-platform.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
          </ul>
         </div> 
         <div class="paragraph"> 
          <p>The (non-ASF) <a href="http://platform.incode.org" target="_blank">Incode Platform</a> provides a number of reusable modules for Apache Isis, focusing either on specific technologies, technical cross-cutting concerns, or providing business logic for generic subdomains. Some of these modules implement SPIs defined by the framework.</p> 
         </div> 
         <div class="admonitionblock warning"> 
          <table> 
           <tbody>
            <tr> 
             <td class="icon"> <i class="fa icon-warning" title="Warning"></i> </td> 
             <td class="content"> 
              <div class="paragraph"> 
               <p>Note that the Incode Platform, although maintained by Apache Isis committers, are not part of the ASF.</p> 
              </div> </td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
         <div class="paragraph"> 
          <p>The modules themselves fall into a number of broader groups:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p>technical libraries, such as excel, word and freemarker</p> </li> 
           <li> <p>SPI implementations, such as security, commands, auditing and publishing</p> </li> 
           <li> <p>framework extensions, such as flyway, quartz and feature toggles</p> </li> 
           <li> <p>wicket components, such as maps, calendars and PDF viewer</p> </li> 
           <li> <p>business modules, such as documents, notes and communications.</p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>Each module can be used independently or combined, and the Incode Platform also provides a quickstart application to get you started quickly.</p> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="hidden-xs hidden-sm hidden-md col-lg-3"> 
     <nav id="toc" data-spy="affix" data-toggle="toc"></nav> 
    </div> 
   </div> 
  </div> 
  <footer class="footer"> 
   <div class="container"> 
    <div class="row"> 
     <p class="text-center small text-muted"> Copyright © 2010~2017 The Apache&nbsp;Software&nbsp;Foundation, licensed under the Apache&nbsp;License,&nbsp;v2.0. <br> Apache, the Apache feather logo, Apache&nbsp;Isis, and the Apache&nbsp;Isis project logo are all trademarks of The&nbsp;Apache&nbsp;Software&nbsp;Foundation. </p> 
    </div> 
   </div> 
  </footer> 
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script> 
  <script src="../../js/bootstrap/3.3.7/bootstrap.min.js"></script> 
  <script src="../../js/bootstrap-toc/0.4.1/bootstrap-toc.min.js"></script> 
  <script src="../../js/slick/1.5.0/slick.min.js"></script> 
  <script src="../../js/elasticlunr/elasticlunr.min.js"></script> 
  <script src="../../js/sticky-header/sticky-header.js"></script> 
  <script src="../../js/search-panel/search-panel.js"></script> 
  <script src="../../js/header-link/header-link.js"></script> 
  <script src="../../js/toc-scroll/toc-scroll.js"></script>  
 </body>
</html>
